import{b as de,d as s,u as b,j as e,H as ce,L as $,e as F}from"./app-IqX4uogi.js";import{A as xe}from"./AuthenticatedLayout-0KSuHWV6.js";import{M as f,S as k}from"./SecondaryButton-XkABNY0F.js";import{T as pe}from"./TextInput-B1GZsLMx.js";import{I as i}from"./InputLabel-PNu8gOJ3.js";import{F as me,i as he,a as ue,b as ge}from"./index-BmX7dQJK.js";import"./transition-DV5wk6ZA.js";import"./ThemeToggle-CfkklMH8.js";import"./LiquidBackground-CEOYZBjN.js";import"./with-selector-BEVR_1R8.js";function He({bookings:L,availableSchedules:K=[],calendarSchedules:W=[]}){const{auth:M,flash:be,errors:fe}=de().props,G=M.user.roles.some(t=>["admin","super_admin"].includes(t.name)),[l,U]=s.useState(null),[p,R]=s.useState(null),[m,A]=s.useState(null),[w,z]=s.useState(null),[v,j]=s.useState("calendar"),[n,y]=s.useState("pending"),[ke,we]=s.useState(!1),[E,V]=s.useState(typeof window<"u"?window.innerWidth<768:!1);s.useEffect(()=>{const t=()=>V(window.innerWidth<768);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const{data:ve,setData:je,post:ye,processing:Ne,reset:_e,errors:Se}=b({date:"",start_time:"",end_time:"",quota:1,schedule_type:"consultation"}),{data:h,setData:c,post:q,processing:N,reset:J,errors:Ce}=b({recording_link:"",therapist_notes:"",patient_visible_notes:"",completion_outcome:"Normal"}),{data:u,setData:_,post:O,processing:S,reset:Y}=b({new_schedule_id:"",reschedule_reason:""}),{data:I,setData:C,post:Q,processing:D,reset:X}=b({no_show_party:"patient",no_show_reason:""}),H=()=>{U(null)},Z=t=>{confirm("Mulai sesi terapi sekarang? Status akan berubah menjadi Sedang Berlangsung.")&&F.post(route("schedules.start",t))},ee=t=>{R(t),c({recording_link:t.recording_link||"",therapist_notes:t.therapist_notes||"",patient_visible_notes:t.patient_visible_notes||"",completion_outcome:t.completion_outcome||"Normal"})},B=()=>{R(null),J()},te=t=>{t.preventDefault(),q(route("schedules.complete",p.id),{onSuccess:()=>B()})},ae=t=>{A(t),_({new_schedule_id:"",reschedule_reason:""})},T=()=>{A(null),Y()},re=t=>{t.preventDefault(),O(route("schedules.reschedule",m.id),{onSuccess:()=>T()})},se=t=>{z(t),C({no_show_party:"patient",no_show_reason:""})},P=()=>{z(null),X()},ne=t=>{t.preventDefault(),Q(route("schedules.no-show",w.id),{onSuccess:()=>P()})},ie=t=>{const a=t.event.extendedProps.bookings?.[0];a?(j("history"),setTimeout(()=>{const r=document.getElementById(`booking-${a.id}`);r&&(r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("ring-2","ring-indigo-500","animate-pulse"),setTimeout(()=>r.classList.remove("ring-2","ring-indigo-500","animate-pulse"),3e3))},100)):confirm("Slot ini masih kosong. Hapus slot ini?")&&F.delete(route("schedules.destroy",t.event.id))},le=t=>{const{event:a}=t,r=a.extendedProps.is_mine,g=a.extendedProps.bookings&&a.extendedProps.bookings.length>0,x=g?a.extendedProps.bookings[0].status:"available",oe=g?a.extendedProps.bookings[0].patient?.name:null;let o="h-full w-full p-2 rounded-xl flex flex-col justify-center gap-1 overflow-hidden transition-all duration-300 ",d="font-black truncate leading-tight uppercase tracking-tight pointer-events-none ";return r?x==="in_progress"?(o+="bg-gradient-to-br from-red-500 to-rose-600 text-white shadow-lg shadow-red-500/20",d+="text-xs text-white"):x==="completed"?(o+="bg-gradient-to-br from-slate-400 to-slate-500 text-white shadow-inner opacity-80",d+="text-[10px] text-white"):(o+="bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/20",d+="text-xs text-white"):g?(o+="bg-slate-100 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 opacity-60",d+="text-[9px] text-slate-400 dark:text-slate-500"):(o+="bg-white dark:bg-slate-800 border-2 border-indigo-100 dark:border-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm hover:border-indigo-300",d+="text-[9px] text-slate-900 dark:text-white"),e.jsxs("div",{className:o,children:[e.jsxs("div",{className:"flex items-center justify-between pointer-events-none mb-0.5",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest opacity-60 leading-none",children:t.timeText}),r&&x==="confirmed"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse shadow-[0_0_8px_white]"})]}),e.jsx("div",{className:d,children:r?x==="in_progress"?"ðŸ”´ LIVE":oe||"TUGAS ANDA":g?"TERISI":"SLOT TERSEDIA"}),e.jsxs("div",{className:"text-[8px] font-bold opacity-60 uppercase tracking-widest pointer-events-none flex items-center gap-1",children:[a.extendedProps.schedule_type==="class"?"ðŸŽ“ Kelas":"ðŸ‘¥ Sesi",r&&x==="completed"&&" â€¢ SELESAI"]})]})};return e.jsxs(xe,{user:M.user,header:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white uppercase tracking-tight leading-none",children:"Kelola Jadwal"}),e.jsx("p",{className:"text-xs font-bold text-slate-400 dark:text-slate-300 mt-2 uppercase tracking-[0.2em]",children:"Pantau sesi terapi Anda"})]})}),children:[e.jsx(ce,{title:"Kelola Jadwal Praktik"}),e.jsx("style",{children:`
        .fc {
            --fc-border-color: rgba(255, 255, 255, 0.05);
            --fc-button-bg-color: transparent;
            --fc-button-border-color: rgba(255, 255, 255, 0.1);
            --fc-button-hover-bg-color: rgba(99, 102, 241, 0.1);
            --fc-button-active-bg-color: rgba(99, 102, 241, 0.2);
            --fc-today-bg-color: rgba(99, 102, 241, 0.05);
            font-family: 'Inter', sans-serif;
            border: none !important;
        }
        .dark .fc {
            --fc-border-color: rgba(255, 255, 255, 0.03);
        }
        .fc-theme-standard td, .fc-theme-standard th {
            border: 1px solid var(--fc-border-color) !important;
        }
        .fc-col-header-cell {
            padding: 20px 0 !important;
            background: rgba(255, 255, 255, 0.02);
        }
        .fc-col-header-cell-cushion {
            text-transform: uppercase;
            font-size: 11px;
            font-weight: 900;
            letter-spacing: 0.1em;
            color: #6366f1;
        }
        .fc-timegrid-slot {
            height: 4em !important;
            border-bottom: 1px solid var(--fc-border-color) !important;
        }
        .fc-timegrid-slot-label-cushion {
            font-size: 10px;
            font-weight: 800;
            color: #94a3b8;
            text-transform: uppercase;
        }
        .fc-event {
            border: none !important;
            border-radius: 12px !important;
            padding: 4px !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .fc-event:hover {
            transform: scale(1.02) translateY(-2px);
            z-index: 50;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }
        .fc-v-event {
            background: transparent !important;
        }
        .fc-event-main {
            padding: 4px !important;
        }
        .fc-timegrid-now-indicator-line {
            border-color: #6366f1 !important;
            border-width: 2px !important;
        }
        .fc-timegrid-now-indicator-arrow {
            border-color: #6366f1 !important;
            border-top-color: transparent !important;
            border-bottom-color: transparent !important;
        }
        .fc-toolbar-title {
            font-size: 1.25rem !important;
            font-weight: 900 !important;
            text-transform: uppercase;
            letter-spacing: -0.025em;
            color: #1e293b;
        }
        .dark .fc-toolbar-title {
            color: #f8fafc;
        }
        .fc-daygrid-day-number {
            font-weight: 400 !important;
            font-size: 14px !important;
            color: #475569;
        }
        .dark .fc-daygrid-day-number {
            color: #94a3b8;
        }
        .fc-daygrid-day-top {
            font-weight: 400 !important;
        }
        .fc-daygrid-event {
            font-weight: 500 !important;
        }
        .fc-button-primary {
            background-color: white !important;
            border: 1px solid rgba(0,0,0,0.05) !important;
            color: #475569 !important;
            font-weight: 800 !important;
            font-size: 11px !important;
            text-transform: uppercase !important;
            border-radius: 12px !important;
            padding: 8px 16px !important;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1) !important;
        }
        .dark .fc-button-primary {
            background-color: #1e293b !important;
            border-color: rgba(255,255,255,0.05) !important;
            color: #cbd5e1 !important;
        }
        .fc-button-primary:hover {
            background-color: #f8fafc !important;
        }
        .dark .fc-button-primary:hover {
            background-color: #334155 !important;
        }
        .fc-button-active {
            background-color: #4f46e5 !important;
            border-color: #4f46e5 !important;
            color: white !important;
        }
        @media (max-width: 767px) {
            .fc-toolbar { flex-direction: column !important; gap: 8px !important; align-items: stretch !important; }
            .fc-toolbar-title { font-size: 0.9rem !important; text-align: center; }
            .fc-toolbar-chunk { display: flex !important; justify-content: center !important; }
            .fc-button-primary { font-size: 9px !important; padding: 4px 8px !important; }
            .fc .fc-col-header-cell-cushion { font-size: 10px !important; }
            .fc .fc-timegrid-slot-label-cushion { font-size: 10px !important; }
        }
    `}),e.jsxs("div",{className:"relative py-12 bg-slate-50 dark:bg-slate-950 min-h-screen overflow-hidden transition-colors duration-700",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none opacity-40 dark:opacity-20 z-0",children:[e.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-400/30 to-purple-500/30 blur-[120px] rounded-full animate-pulse",style:{animationDuration:"8s"}}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[50%] h-[50%] bg-gradient-to-tr from-cyan-400/20 to-emerald-400/20 blur-[100px] rounded-full animate-pulse",style:{animationDuration:"12s",animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-[20%] left-[20%] w-[30%] h-[30%] bg-gradient-to-r from-rose-400/10 to-orange-400/10 blur-[80px] rounded-full animate-pulse",style:{animationDuration:"10s",animationDelay:"1s"}})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"flex gap-2 mb-6 md:mb-8 bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl p-1 md:p-1.5 rounded-xl md:rounded-[1.5rem] w-full md:w-fit border border-white/40 dark:border-slate-700 shadow-lg shadow-black/5",children:[e.jsx("button",{onClick:()=>j("calendar"),className:`flex-1 md:flex-none px-4 md:px-8 py-2.5 md:py-3 rounded-lg md:rounded-[1.2rem] text-[10px] font-black uppercase tracking-widest transition-all ${v==="calendar"?"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-white/50 dark:hover:bg-slate-900/50"}`,children:"Kalender"}),e.jsx("button",{onClick:()=>j("history"),className:`flex-1 md:flex-none px-4 md:px-8 py-2.5 md:py-3 rounded-lg md:rounded-[1.2rem] text-[10px] font-black uppercase tracking-widest transition-all ${v==="history"?"bg-white dark:bg-slate-900 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 hover:bg-white/50 dark:hover:bg-slate-900/50"}`,children:"Daftar Sesi"})]}),e.jsx("div",{className:"bg-white/70 dark:bg-slate-900/40 backdrop-blur-3xl border border-white dark:border-slate-800 rounded-[3.5rem] shadow-[0_30px_100px_rgba(0,0,0,0.1)] dark:shadow-none overflow-hidden transition-all duration-700 p-2",children:e.jsx("div",{className:"bg-white dark:bg-slate-900/20 rounded-[3rem] p-3 sm:p-5 md:p-10 transition-colors",children:v==="calendar"?e.jsx("div",{className:"animate-in fade-in duration-500",children:e.jsx(me,{plugins:[he,ue,ge],initialView:E?"timeGridDay":"timeGridWeek",headerToolbar:E?{left:"prev,next",center:"title",right:"timeGridDay,dayGridMonth"}:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},titleFormat:{year:"numeric",month:"long",day:"numeric"},events:W,eventClick:ie,eventContent:le,height:"auto",slotMinTime:"07:00:00",slotMaxTime:"22:00:00",slotDuration:"01:00:00",allDaySlot:!1,nowIndicator:!0,locale:"id",expandRows:!0,stickyHeaderDates:!0})}):e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex gap-2 mb-8 p-1.5 bg-slate-100/50 dark:bg-slate-800/30 rounded-2xl w-fit border border-slate-200/50 dark:border-slate-800",children:[e.jsx("button",{onClick:()=>y("pending"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${n==="pending"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:bg-white dark:hover:bg-slate-800"}`,children:"Belum Selesai"}),e.jsx("button",{onClick:()=>y("completed"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${n==="completed"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:bg-white dark:hover:bg-slate-800"}`,children:"Selesai"}),e.jsx("button",{onClick:()=>y("all"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${n==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-slate-500 hover:bg-white dark:hover:bg-slate-800"}`,children:"Semua"})]}),L.filter(t=>n==="all"?!0:n==="pending"?["confirmed","in_progress"].includes(t.status):t.status==="completed").length===0?e.jsx("div",{className:"text-center py-20 bg-gray-50 dark:bg-gray-800/50 rounded-[2rem] border-2 border-dashed border-gray-200 dark:border-gray-700",children:e.jsx("p",{className:"text-gray-400 font-medium italic",children:n==="pending"?"Hore! Tidak ada sesi yang perlu diselesaikan.":"Belum ada sesi yang selesai."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:L.filter(t=>n==="all"?!0:n==="pending"?["confirmed","in_progress"].includes(t.status):t.status==="completed").map(t=>{const a=t.completion_outcome?.startsWith("No-Show"),r=!!t.rescheduled_at;return e.jsxs("div",{id:`booking-${t.id}`,className:`rounded-[2.5rem] border shadow-sm p-7 relative overflow-hidden flex flex-col transition-all duration-300 ${a?"bg-orange-50/30 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800/50":t.status==="completed"?"bg-gray-50/50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700":t.status==="in_progress"?"bg-red-50/30 dark:bg-red-900/20 border-red-200 dark:border-red-800/50 ring-2 ring-red-500 shadow-xl":"bg-white dark:bg-slate-900 border-indigo-100 dark:border-indigo-900/50 ring-1 ring-indigo-50 dark:ring-indigo-900/30 hover:shadow-xl hover:border-indigo-200 dark:hover:border-indigo-700"}`,children:[e.jsxs("div",{className:"absolute top-6 right-6 flex flex-col items-end gap-2",children:[t.status==="confirmed"&&new Date-new Date(t.updated_at)<1440*60*1e3&&e.jsx("span",{className:"text-[9px] font-black px-2 py-0.5 rounded bg-amber-400 text-amber-900 animate-bounce shadow-lg shadow-amber-400/20",children:"PASIEN BARU"}),e.jsx("div",{className:"text-[10px] font-black px-4 py-1.5 rounded-full uppercase tracking-widest bg-white dark:bg-slate-800 shadow-sm border border-gray-100 dark:border-gray-700",children:a?e.jsx("span",{className:"text-orange-600 dark:text-orange-400",children:"Tidak Hadir"}):t.status==="completed"?e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Selesai"}):t.status==="in_progress"?e.jsx("span",{className:"text-red-600 dark:text-red-400 animate-pulse",children:"Sedang Berlangsung"}):e.jsx("span",{className:"text-indigo-600 dark:text-indigo-400",children:r?"Dijadwal Ulang":"Akan Datang"})})]}),e.jsxs("div",{className:"mb-6 pr-24",children:[e.jsx("h4",{className:"font-black text-xl text-gray-900 dark:text-white uppercase tracking-tight leading-none mb-1",children:t.patient.name}),e.jsx("p",{className:"text-xs text-gray-400 font-bold italic",children:t.patient.email}),G&&e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] font-black text-white bg-indigo-500 px-2 py-0.5 rounded uppercase tracking-tighter",children:"Terapis"}),e.jsx("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-400",children:t.schedule?.therapist?.name})]})]}),e.jsxs("div",{className:"bg-indigo-50/50 dark:bg-slate-800 rounded-3xl p-5 mb-6 border border-indigo-100/50 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center text-xs text-indigo-900 dark:text-indigo-300 font-black mb-2 uppercase tracking-widest",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-indigo-500 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(t.schedule.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),e.jsxs("div",{className:"flex items-center text-xs text-indigo-800 dark:text-indigo-400 font-bold",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-indigo-400 dark:text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.schedule.start_time?.substring(0,5)," - ",t.schedule.end_time?.substring(0,5)," WIB"]}),e.jsxs("div",{className:"flex items-center text-[10px] font-black text-indigo-600 dark:text-indigo-500 mt-3 pt-3 border-t border-indigo-100/50 dark:border-slate-700 uppercase tracking-[0.2em]",children:["Paket: ",t.package_type||"REGULER"]})]}),t.status==="completed"&&e.jsxs("div",{className:"mb-6 p-4 bg-emerald-50 rounded-2xl border border-emerald-100",children:[e.jsx("p",{className:"text-[10px] font-black text-emerald-800 uppercase tracking-widest mb-1",children:"Hasil / Outcome"}),e.jsx("p",{className:"text-sm font-bold text-emerald-700",children:t.completion_outcome||"Normal"})]}),e.jsxs("div",{className:"flex flex-col gap-3 mt-auto",children:[e.jsxs($,{href:route("schedules.patient-detail",t.patient.id),className:"w-full text-center text-[10px] font-black text-emerald-700 bg-emerald-50/50 hover:bg-emerald-100 border border-emerald-200 py-3 rounded-2xl transition-all uppercase tracking-widest flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Rekam Medis & Detail"]}),t.status==="confirmed"&&e.jsx("button",{onClick:()=>Z(t.id),className:"w-full text-center text-xs font-black text-white bg-indigo-600 hover:bg-indigo-700 py-3 rounded-2xl transition-all shadow-lg shadow-indigo-600/20 uppercase tracking-widest active:scale-95",children:"Mulai Sesi"}),t.status==="in_progress"?e.jsx($,{href:route("schedules.active-session",t.id),className:"w-full text-center text-xs font-black text-white bg-red-600 hover:bg-red-700 py-3 rounded-2xl transition-all shadow-lg shadow-red-600/20 uppercase tracking-widest",children:"Selesaikan Sesi"}):t.status==="completed"&&e.jsx("button",{onClick:()=>ee(t),className:"w-full text-center text-xs font-black text-white bg-slate-900 hover:bg-slate-800 py-3 rounded-2xl transition-all uppercase tracking-widest",children:"Update Data Sesi"}),["confirmed","in_progress"].includes(t.status)&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ae(t),className:"flex-1 text-center text-[9px] font-black text-amber-700 bg-amber-50 hover:bg-amber-100 border border-amber-200 py-2.5 rounded-2xl transition-all uppercase tracking-[0.1em]",children:"Jadwal Ulang"}),e.jsx("button",{onClick:()=>se(t),className:"flex-1 text-center text-[9px] font-black text-red-700 bg-red-50 hover:bg-red-100 border border-red-200 py-2.5 rounded-2xl transition-all uppercase tracking-[0.1em]",children:"Tidak Hadir"})]}),t.status==="completed"&&t.recording_link&&e.jsxs("a",{href:t.recording_link,target:"_blank",rel:"noreferrer",className:"text-center text-[10px] font-black text-indigo-600 hover:underline mt-2 uppercase tracking-widest flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Lihat Rekaman"]})]})]},t.id)})})]})})}),e.jsxs("div",{className:"mt-8 flex flex-wrap items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Terisi"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)] animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Berlangsung"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Selesai"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Tersedia"})]})]})]})]}),e.jsx(f,{show:l!==null,onClose:H,maxWidth:"2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 uppercase tracking-tight",children:"Riwayat Pasien"}),e.jsxs("div",{className:"mb-8 p-6 bg-slate-50 dark:bg-slate-800/50 rounded-[2rem] border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xs font-black text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-4",children:"Data & Skrining Pasien"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mb-1",children:"Kelengkapan Profil"}),e.jsxs("p",{className:"font-black text-gray-800",children:[l?.patient_profile_stats?.percentage||0,"% Lengkap"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mb-1",children:"Hasil Skrining"}),e.jsx("p",{className:"font-black text-indigo-600",children:l?.recommended_package||"Belum ada data"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Partisipasi Kelas (Course)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l?.courses?.length>0?l.courses.map(t=>e.jsx("span",{className:"inline-flex items-center px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-purple-100 text-purple-700 border border-purple-200",children:t.title},t.id)):e.jsx("span",{className:"text-gray-400 italic text-xs",children:"Belum terdaftar di kelas manapun."})})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mb-1",children:"Pesan Admin (Skrining)"}),e.jsx("p",{className:"italic text-gray-600 text-xs bg-white p-4 rounded-2xl border border-gray-100",children:l?.screening_results?.[0]?.admin_notes||"Tidak ada catatan admin."})]})]})]}),e.jsx("h3",{className:"text-sm font-black text-gray-900 mb-4 px-2 uppercase tracking-widest",children:"Riwayat Sesi Sebelumnya"}),e.jsx("div",{className:"space-y-4 max-h-[40vh] overflow-y-auto pr-2 custom-scrollbar",children:l?.bookings?.map(t=>e.jsxs("div",{className:`p-6 rounded-[2rem] border flex gap-5 transition-all ${t.status==="completed"?"bg-indigo-50/30 border-indigo-100":"bg-white border-gray-100"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-2xl flex items-center justify-center font-black ${t.status==="completed"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-400"}`,children:t.status==="completed"?"âœ“":"..."}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-black text-gray-900 text-sm uppercase tracking-tight",children:new Date(t.schedule?.date||"").toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold mt-1 uppercase tracking-widest",children:["Terapis: ",e.jsx("span",{className:"text-emerald-600",children:t.schedule?.therapist?.name})]}),e.jsxs("div",{className:"mt-3 text-xs bg-white/50 p-4 rounded-2xl border border-gray-100 text-gray-600 italic",children:[e.jsx("p",{className:"font-black text-gray-400 uppercase text-[9px] tracking-widest mb-1 not-italic",children:"Catatan Klinis"}),e.jsx("p",{className:"whitespace-pre-wrap",children:t.therapist_notes||"Tidak ada catatan."})]}),t.recording_link&&e.jsxs("a",{href:t.recording_link,target:"_blank",rel:"noreferrer",className:"text-[10px] font-black text-indigo-600 hover:underline mt-4 flex items-center gap-2 uppercase tracking-widest",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Link Rekaman Sesi"]})]})]},t.id))}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx(k,{onClick:H,className:"rounded-2xl px-8",children:"Tutup"})})]})}),e.jsx(f,{show:p!==null,onClose:B,children:e.jsxs("form",{onSubmit:te,className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 uppercase tracking-tight",children:"Akhiri Sesi"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-8",children:["Sesi dengan ",e.jsx("strong",{children:p?.patient?.name})," pada ",p?.schedule?.date,"."]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"recording_link",value:"Link Rekaman YouTube (Private/Unlisted)"}),e.jsx(pe,{id:"recording_link",type:"url",className:"mt-1 block w-full rounded-2xl border-gray-200",placeholder:"https://youtu.be/...",value:h.recording_link,onChange:t=>c("recording_link",t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"completion_outcome",value:"Status Selesai Sesi"}),e.jsxs("select",{id:"completion_outcome",className:"mt-1 block w-full border-gray-200 rounded-2xl shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm font-bold",value:h.completion_outcome,onChange:t=>c("completion_outcome",t.target.value),required:!0,children:[e.jsx("option",{value:"Normal",children:"Normal (Selesai dengan Baik)"}),e.jsx("option",{value:"Abnormal/Emergency",children:"Upnormal / Emergency (Butuh Perhatian Khusus)"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"patient_visible_notes",value:"Pesan untuk Pasien (Dashboard Pasien)"}),e.jsx("textarea",{id:"patient_visible_notes",className:"mt-1 block w-full border-gray-200 rounded-2xl shadow-sm focus:border-emerald-500 focus:ring-emerald-500 text-sm",rows:"3",placeholder:"Tuliskan homework atau ringkasan singkat untuk pasien...",value:h.patient_visible_notes,onChange:t=>c("patient_visible_notes",t.target.value)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"therapist_notes",value:"Catatan Klinis (Privat)"}),e.jsx("textarea",{id:"therapist_notes",className:"mt-1 block w-full border-gray-200 rounded-2xl shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",rows:"4",placeholder:"Tuliskan perkembangan klinis detail...",value:h.therapist_notes,onChange:t=>c("therapist_notes",t.target.value)})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(k,{onClick:B,disabled:N,className:"rounded-2xl",children:"Batal"}),e.jsx("button",{type:"submit",disabled:N,className:`inline-flex items-center px-6 py-3 bg-red-600 border border-transparent rounded-2xl font-black text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 transition-all ${N&&"opacity-25"}`,children:"Akhiri Sesi & Simpan"})]})]})}),e.jsx(f,{show:m!==null,onClose:T,children:e.jsxs("form",{onSubmit:re,className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 uppercase tracking-tight",children:"Jadwal Ulang"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-8",children:["Pasien: ",e.jsx("strong",{children:m?.patient?.name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"new_schedule_id",value:"Pilih Slot Baru"}),e.jsxs("select",{id:"new_schedule_id",className:"mt-1 block w-full border-gray-200 rounded-2xl shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm font-bold",value:u.new_schedule_id,onChange:t=>_("new_schedule_id",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Slot Tersedia --"}),K.filter(t=>t.id!==m?.schedule_id).map(t=>e.jsxs("option",{value:t.id,children:[new Date(t.date).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"})," â€” ",t.start_time?.substring(0,5)," WIB"]},t.id))]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"reschedule_reason",value:"Alasan Perubahan"}),e.jsx("textarea",{id:"reschedule_reason",className:"mt-1 block w-full border-gray-200 rounded-2xl shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",rows:"3",placeholder:"Tuliskan alasan rescheduling...",value:u.reschedule_reason,onChange:t=>_("reschedule_reason",t.target.value),required:!0})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(k,{onClick:T,disabled:S,className:"rounded-2xl",children:"Batal"}),e.jsx("button",{type:"submit",disabled:S||!u.new_schedule_id,className:`inline-flex items-center px-6 py-3 bg-amber-600 border border-transparent rounded-2xl font-black text-xs text-white uppercase tracking-widest hover:bg-amber-700 transition-all ${(S||!u.new_schedule_id)&&"opacity-25"}`,children:"Konfirmasi Jadwal Baru"})]})]})}),e.jsx(f,{show:w!==null,onClose:P,children:e.jsxs("form",{onSubmit:ne,className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 uppercase tracking-tight",children:"Tandai Tidak Hadir"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-8",children:["Pasien: ",e.jsx("strong",{children:w?.patient?.name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"no_show_party",value:"Keterangan Ketidakhadiran"}),e.jsxs("select",{id:"no_show_party",className:"mt-1 block w-full border-gray-200 rounded-2xl shadow-sm focus:border-red-500 focus:ring-red-500 text-sm font-bold",value:I.no_show_party,onChange:t=>C("no_show_party",t.target.value),required:!0,children:[e.jsx("option",{value:"patient",children:"Pasien Berhalangan Hadir"}),e.jsx("option",{value:"therapist",children:"Praktisi Berhalangan Hadir"})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"no_show_reason",value:"Keterangan Tambahan"}),e.jsx("textarea",{id:"no_show_reason",className:"mt-1 block w-full border-gray-200 rounded-2xl shadow-sm focus:border-red-500 focus:ring-red-500 text-sm",rows:"3",placeholder:"Detail ketidakhadiran...",value:I.no_show_reason,onChange:t=>C("no_show_reason",t.target.value)})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(k,{onClick:P,disabled:D,className:"rounded-2xl",children:"Batal"}),e.jsx("button",{type:"submit",disabled:D,className:`inline-flex items-center px-6 py-3 bg-red-600 border border-transparent rounded-2xl font-black text-xs text-white uppercase tracking-widest hover:bg-red-700 transition-all ${D&&"opacity-25"}`,children:"Konfirmasi No-Show"})]})]})})]})}export{He as default};
