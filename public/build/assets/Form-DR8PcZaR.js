import{u as S,d as L,j as e,H as _,L as c}from"./app-CM1Y6LTV.js";import{A as B}from"./AuthenticatedLayout-Dl4Dk0q9.js";import{I}from"./InputError-BQToVfe0.js";import{I as A}from"./InputLabel-C6WJAqK4.js";import{T as P}from"./TextInput-DM6KsWeU.js";import{S as m}from"./shield-Cmaf5CVf.js";import{S as R}from"./save-D4GzRTGF.js";import{C as E}from"./chevron-left-Bpu6nXF9.js";import{c as g}from"./createLucideIcon-DIkDG3cp.js";import{B as K}from"./book-open-BXqqqEjY.js";import{U as O}from"./users-CWoDFXnf.js";import{C as T}from"./credit-card-GFII7VAa.js";import{C as $}from"./calendar-64sKU_1M.js";import"./transition-CEtJQUh1.js";import"./ThemeToggle-BMQkgMfp.js";import"./LiquidBackground-BWBex_Uv.js";const H=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],M=g("chart-no-axes-column-increasing",H);const z=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],D=g("settings",z);function ie({roleModel:n,permissions:l,rolePermissions:x}){const o=!!n.id,{data:t,setData:d,post:p,put:u,processing:h,errors:b}=S({name:n.name||"",permissions:x||[]}),k=L.useMemo(()=>{const a={"Booking & Konsultasi":["booking","schedule"],"Transaksi & Pembayaran":["transaction","pricing","voucher"],"Manajemen Pengguna":["user","role","permission"],"Konten & Blog":["blog","course","lesson"],"Laporan & Statistik":["report","finance","expense"],Lainnya:[]},r={};return Object.keys(a).forEach(i=>r[i]=[]),l.forEach(i=>{let s=!1;for(const[N,v]of Object.entries(a))if(v.some(C=>i.name.toLowerCase().includes(C))){r[N].push(i),s=!0;break}s||r.Lainnya.push(i)}),Object.fromEntries(Object.entries(r).filter(([i,s])=>s.length>0))},[l]),f=a=>{const{value:r,checked:i}=a.target;i?d("permissions",[...t.permissions,r]):d("permissions",t.permissions.filter(s=>s!==r))},y=a=>{const r=a.map(s=>s.name);if(r.every(s=>t.permissions.includes(s)))d("permissions",t.permissions.filter(s=>!r.includes(s)));else{const s=[...new Set([...t.permissions,...r])];d("permissions",s)}},j=a=>{a.preventDefault(),o?u(route("admin.roles.update",n.id)):p(route("admin.roles.store"))},w=a=>{switch(a){case"Booking & Konsultasi":return e.jsx($,{className:"w-4 h-4"});case"Transaksi & Pembayaran":return e.jsx(T,{className:"w-4 h-4"});case"Manajemen Pengguna":return e.jsx(O,{className:"w-4 h-4"});case"Konten & Blog":return e.jsx(K,{className:"w-4 h-4"});case"Laporan & Statistik":return e.jsx(M,{className:"w-4 h-4"});default:return e.jsx(D,{className:"w-4 h-4"})}};return e.jsxs(B,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{href:route("admin.users.index"),className:"p-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 text-gray-400 hover:text-indigo-600 transition-colors shadow-sm",children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white uppercase tracking-tight",children:o?"Konfigurasi Hak Akses":"Tambah Role Baru"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest mt-1",children:o?`Mengatur Izin Untuk Role: ${n.name}`:"Mendefinisikan Peran Baru Dalam Sistem"})]})]}),children:[e.jsx(_,{title:o?"Atur Hak Akses":"Tambah Role"}),e.jsx("div",{className:"py-12 bg-gray-50 dark:bg-gray-950 min-h-[calc(100vh-64px)]",children:e.jsx("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] p-8 shadow-xl border border-white dark:border-gray-800 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(m,{className:"w-32 h-32"})}),e.jsxs("div",{className:"max-w-xl",children:[e.jsx(A,{htmlFor:"name",className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 mb-3 ml-1",children:"Nama Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{id:"name",type:"text",value:t.name,className:"w-full bg-gray-50 dark:bg-gray-950 border-transparent focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 rounded-2xl pl-6 pr-6 py-4 text-sm font-bold text-gray-900 dark:text-white transition-all",onChange:a=>d("name",a.target.value.toLowerCase().replace(/\s+/g,"_")),placeholder:"Contoh: manager_klinik, asisten_admin",required:!0,disabled:n.name==="super_admin"}),n.name==="super_admin"&&e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 px-3 py-1 bg-rose-50 text-rose-600 rounded-lg text-[9px] font-black uppercase tracking-widest border border-rose-100",children:[e.jsx(m,{className:"w-3 h-3"}),"System Role"]})]}),e.jsx(I,{message:b.name,className:"mt-2 ml-1"}),e.jsx("p",{className:"mt-3 text-[10px] text-gray-400 font-medium px-1",children:"Gunakan huruf kecil dan garis bawah (underscore) untuk nama role teknis."})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 px-2",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-600 rounded-full"}),e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:"Daftar Izin Akses"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(k).map(([a,r])=>{const i=r.map(s=>s.name).every(s=>t.permissions.includes(s));return e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2rem] p-6 shadow-lg border border-white dark:border-gray-800 transition-all hover:shadow-indigo-500/5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-50 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-indigo-50 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400",children:w(a)}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest text-gray-900 dark:text-white",children:a})]}),e.jsx("button",{type:"button",onClick:()=>y(r),className:`text-[9px] font-black uppercase tracking-widest px-3 py-1.5 rounded-lg transition-all ${i?"bg-rose-50 text-rose-600":"bg-indigo-50 text-indigo-600 hover:bg-indigo-100"}`,children:i?"Lepas Semua":"Pilih Semua"})]}),e.jsx("div",{className:"space-y-3",children:r.map(s=>e.jsxs("label",{className:`flex items-center justify-between p-3 rounded-xl border transition-all cursor-pointer group ${t.permissions.includes(s.name)?"bg-indigo-500/5 border-indigo-200 dark:border-indigo-900/50 ring-1 ring-indigo-100 dark:ring-indigo-900/20":"bg-gray-50 dark:bg-gray-800/50 border-transparent hover:border-gray-200 dark:hover:border-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all ${t.permissions.includes(s.name)?"bg-indigo-600 border-indigo-600":"border-gray-300 dark:border-gray-600 group-hover:border-indigo-400"}`,children:t.permissions.includes(s.name)&&e.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[11px] font-bold uppercase tracking-tight transition-colors ${t.permissions.includes(s.name)?"text-indigo-700 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"}`,children:s.name.replace(/_/g," ")})]}),e.jsx("input",{type:"checkbox",className:"hidden",value:s.name,checked:t.permissions.includes(s.name),onChange:f})]},s.id))})]},a)})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-900 p-6 rounded-[2rem] shadow-xl border border-white dark:border-gray-800 sticky bottom-8 transition-all duration-500",children:[e.jsx(c,{href:route("admin.users.index"),className:"text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-gray-600 transition-colors px-6",children:"Batal & Kembali"}),e.jsxs("button",{type:"submit",disabled:h,className:"flex items-center gap-3 px-8 py-4 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] hover:bg-indigo-700 transition-all shadow-xl shadow-indigo-600/20 active:scale-95 disabled:opacity-50",children:[e.jsx(R,{className:"w-4 h-4"}),o?"Simpan Hak Akses":"Buat Role Sistem"]})]})]})})})]})}export{ie as default};
