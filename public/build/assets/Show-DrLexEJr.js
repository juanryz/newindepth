import{r as v,u as x,j as e,H as N,L as h}from"./app-V6bTe-_8.js";import{A as w}from"./AuthenticatedLayout-Bt3BhxTL.js";import{P as _}from"./PrimaryButton-0Yw21ufy.js";import"./transition-SSSckw22.js";import"./ThemeToggle-DkiOlbUF.js";function B({booking:s,userVouchers:u=[]}){const t=s.status==="pending_payment",i=s.status==="pending_screening",n=s.status==="pending_validation",d=s.status==="confirmed";s.status;const o=!!s.user_voucher_id,c=u.filter(a=>a.is_active),[g,r]=v.useState(!1),{data:m,setData:p,post:j,processing:b}=x({booking_id:s.id,user_voucher_id:""}),{delete:f,processing:l}=x(),y=()=>{f(route("bookings.cancel",s.id),{onFinish:()=>r(!1)})},k=a=>{a.preventDefault(),j(route("vouchers.apply"))};return e.jsxs(w,{header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Detail Reservasi #",s.booking_code]}),children:[e.jsx(N,{title:`Booking ${s.booking_code}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-3xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[e.jsx("div",{className:`p-4 rounded-lg shadow-sm border-l-4 
                        ${d?"bg-green-50 border-green-500 text-green-800":""}
                        ${t?"bg-yellow-50 border-yellow-500 text-yellow-800":""}
                        ${n?"bg-blue-50 border-blue-500 text-blue-800":""}
                        ${i?"bg-gray-50 border-gray-500 text-gray-800":""}
                        ${s.status==="cancelled"?"bg-red-50 border-red-500 text-red-800":""}
                    `,children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",children:[d&&"Pendaftaran Dikonfirmasi!",t&&"Menunggu Pembayaran",n&&"Menunggu Validasi Admin",i&&"Menunggu Evaluasi Skrining",s.status==="cancelled"&&"Dibatalkan"]}),e.jsxs("p",{className:"text-sm mt-1",children:[d&&"Sesi Anda dengan terapis sudah dijadwalkan. Silakan datang tepat waktu.",t&&"Terapis telah menyetujui skrining Anda. Silakan lanjutkan ke pembayaran.",n&&"Bukti pembayaran Anda sedang diverifikasi oleh tim kami.",i&&"Admin/Terapis sedang meninjau form skrining Anda."]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h3",{className:"text-lg font-medium border-b pb-4 mb-4",children:"Informasi Jadwal"}),e.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-6",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Terapis"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 font-semibold",children:s.schedule.therapist?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Tanggal"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(s.schedule.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Waktu"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[s.schedule.start_time.substring(0,5)," - ",s.schedule.end_time.substring(0,5)," WIB"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Lokasi"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:"Klinik Utama (Offline)"})]})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-6",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h3",{className:"text-lg font-medium border-b pb-4 mb-4",children:"Ringkasan Pemesanan (Order Summary)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-600",children:"Layanan InDepth Mental Wellness"}),e.jsx("span",{className:"font-medium truncate",children:s.package_type==="vip"?"Paket VIP (Intensive Care)":s.package_type==="upgrade"?"Paket Upgrade (Pengembangan Diri)":"Paket Hipnoterapi"})]}),o&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-green-100",children:[e.jsx("span",{className:"text-sm text-green-700",children:"✅ Voucher Diterapkan"}),e.jsxs("span",{className:"text-sm font-semibold text-green-700",children:["- ",s.user_voucher?`Rp ${new Intl.NumberFormat("id-ID").format(s.user_voucher.voucher?.discount_amount||0)}`:"Diskon aktif"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Pembayaran"}),e.jsxs("span",{className:"text-xl font-bold text-indigo-700",children:["Rp ",new Intl.NumberFormat("id-ID").format(s.transaction?.amount||0)]})]}),t&&e.jsxs("div",{className:"mt-4 p-4 bg-orange-50 border border-orange-200 rounded-lg text-sm text-orange-800",children:[e.jsxs("span",{className:"font-bold flex items-center gap-2 mb-1",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Perhatian Kode Unik"]}),"Pastikan Anda mentransfer ",e.jsx("strong",{children:"tepat sesuai nominal di atas hingga 3 digit terakhir"})," untuk memastikan kelancaran verifikasi sistem kami."]})]})]})}),t&&!o&&e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mt-6",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("h3",{className:"text-lg font-medium border-b pb-4 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Gunakan Voucher"]}),c.length===0?e.jsxs("div",{className:"text-sm text-gray-500",children:["Anda tidak memiliki voucher aktif. ",e.jsx(h,{href:route("vouchers.index"),className:"text-indigo-600 hover:underline",children:"Klaim voucher sekarang →"})]}):e.jsxs("form",{onSubmit:k,className:"flex gap-3 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Voucher"}),e.jsxs("select",{value:m.user_voucher_id,onChange:a=>p("user_voucher_id",a.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"— Pilih voucher —"}),c.map(a=>e.jsxs("option",{value:a.id,children:[a.code," — Diskon Rp ",new Intl.NumberFormat("id-ID").format(a.discount_amount)]},a.id))]})]}),e.jsx("button",{type:"submit",disabled:b||!m.user_voucher_id,className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-semibold rounded-lg disabled:opacity-50 transition-colors",children:"Terapkan"})]})]})}),t&&e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-red-600 border border-red-200 rounded-xl hover:bg-red-50 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Batalkan Pesanan"]}),e.jsx(h,{href:`/payments/upload/${s.id}`,children:e.jsx(_,{children:"Lanjutkan ke Pembayaran"})})]}),n&&e.jsx("div",{className:"mt-6 flex justify-start",children:e.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold text-red-600 border border-red-200 rounded-xl hover:bg-red-50 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Batalkan Pesanan"]})}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:"Batalkan Pesanan?"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Pesanan Anda akan dibatalkan dan slot waktu akan dikembalikan. Tindakan ini tidak dapat diurungkan."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>r(!1),disabled:l,className:"px-4 py-2 text-sm font-semibold text-gray-600 border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors",children:"Tidak, Kembali"}),e.jsx("button",{onClick:y,disabled:l,className:"px-4 py-2 text-sm font-semibold text-white bg-red-600 hover:bg-red-700 rounded-xl transition-colors disabled:opacity-50",children:l?"Membatalkan...":"Ya, Batalkan"})]})]})})]})})]})}export{B as default};
