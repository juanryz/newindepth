import{j as e,r as b,a as p,u as y,H as f}from"./app-RhsxsvPH.js";import{A as j}from"./AuthenticatedLayout-Eg-QgpwE.js";import{P as w}from"./PrimaryButton-DKKr2VdW.js";import"./transition-DY_JvhiZ.js";import"./ThemeToggle-BB46KKmv.js";function N({schedules:m=[],selectedScheduleId:i,onSelect:l}){if(m.length===0)return e.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-md text-gray-500 text-sm",children:"Belum ada jadwal yang tersedia untuk saat ini."});const[u,c]=b.useState("week"),o=m.filter(r=>{const d=(r.date||"").substring(0,10),a=new Date(`${d}T00:00:00Z`),n=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Jakarta"}).format(new Date),t=new Date(`${n}T00:00:00Z`);switch(u){case"day":return a.getTime()===t.getTime();case"week":const s=new Date(t);return s.setDate(t.getDate()+7),a.getTime()>=t.getTime()&&a.getTime()<=s.getTime();case"month":return a.getUTCMonth()===t.getUTCMonth()&&a.getUTCFullYear()===t.getUTCFullYear();case"year":return a.getUTCFullYear()===t.getUTCFullYear();default:return!0}}).reduce((r,d)=>{const a=(d.date||"").substring(0,10);return r[a]||(r[a]=[]),r[a].push(d),r},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"day",label:"Hari Ini"},{id:"week",label:"Minggu Ini"},{id:"month",label:"Bulan Ini"},{id:"year",label:"Tahun Ini"},{id:"all",label:"Semua Jadwal"}].map(r=>e.jsx("button",{type:"button",onClick:()=>c(r.id),className:`px-4 py-2 text-sm font-medium rounded-full transition-colors border ${u===r.id?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:r.label},r.id))}),Object.keys(o).length===0?e.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-md text-gray-500 text-sm text-center italic",children:"Tidak ada jadwal yang sesuai dengan filter ini."}):Object.entries(o).map(([r,d])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:new Date(r).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:d.map(a=>{const n=i===a.id,t=a.bookings_count??a.booked_count??0,s=a.status==="full"||t>=a.quota;return e.jsxs("button",{type:"button",onClick:()=>!s&&l(a.id),disabled:s,className:`
                                        flex flex-col items-center justify-center p-3 rounded-lg border-2 transition-all
                                        ${s?"bg-gray-100 border-gray-200 text-gray-400 cursor-not-allowed":""}
                                        ${!s&&n?"bg-indigo-50 border-indigo-500 text-indigo-700":""}
                                        ${!s&&!n?"bg-white border-gray-200 text-gray-700 hover:border-indigo-300 hover:shadow-sm":""}
                                    `,children:[e.jsxs("span",{className:"font-bold text-sm text-center",children:[a.start_time.substring(0,5)," - ",a.end_time.substring(0,5)]}),e.jsx("span",{className:"text-xs mt-1",children:s?"Penuh":`${a.quota-t} slot sisa`})]},a.id)})})]},r))]})}function S({schedules:m,packageOptions:i,screeningResult:l}){const{flash:u,errors:c}=p().props,{data:g,setData:o,post:r,processing:d,errors:a}=y({schedule_id:"",package_type:i.recommended}),n=t=>{t.preventDefault(),r(route("bookings.store"))};return e.jsxs(j,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Buat Janji Temu Hipnoterapi"}),children:[e.jsx(f,{title:"Booking Hipnoterapi"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-6xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[l&&e.jsx("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden border border-gold-100",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-gold-50 to-white",children:[e.jsxs("h3",{className:"text-lg font-medium text-gold-800 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-gold-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Hasil Analisis Skrining Anda"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider bg-gold-100 text-gold-800 border border-gold-200",children:["Tingkat Keparahan: ",l.severity_label]}),e.jsxs("p",{className:"text-gray-700 leading-relaxed italic border-l-4 border-gold-400 pl-4 py-1",children:['"',l.ai_summary,'"']})]})]})}),e.jsxs("div",{className:"bg-white shadow sm:rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Pilih Program Terapi"}),i.is_vip_only?e.jsx("p",{className:"text-sm text-amber-600 font-medium",children:"⚠️ Berdasarkan hasil skrining, kondisi Anda memerlukan penanganan intensif dan prioritas penjadwalan. Anda hanya dapat memilih Paket VIP."}):e.jsx("p",{className:"text-sm text-gray-500",children:"Silakan pilih paket terapi yang sesuai dengan kebutuhan Anda. Kami merekomendasikan Paket Reguler berdasarkan hasil skrining Anda."})]}),e.jsxs("div",{className:"p-6 bg-gray-50 leading-relaxed",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Object.values(i.packages).map(t=>{const s=i.recommended===t.id,h=i.is_vip_only&&t.id!=="vip",x=g.package_type===t.id;return e.jsxs("div",{className:`relative rounded-2xl border-2 p-6 transition-all duration-300 cursor-pointer flex flex-col ${x?"border-gold-500 bg-gold-50/30 shadow-lg transform -translate-y-1":h?"border-gray-200 bg-gray-100 opacity-60 cursor-not-allowed":"border-gray-200 bg-white hover:border-gold-300 hover:shadow-md hover:-translate-y-0.5"}`,onClick:()=>!h&&o("package_type",t.id),children:[i.is_vip_only&&t.id==="vip"&&e.jsx("div",{className:"absolute -top-3 right-4 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm animate-pulse",children:"Wajib Dipilih"}),!i.is_vip_only&&s&&e.jsx("div",{className:"absolute -top-3 right-4 bg-gradient-to-r from-gold-500 to-yellow-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm",children:"Rekomendasi Utama"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h4",{className:`font-bold text-lg leading-tight ${x?"text-gray-900":"text-gray-800"}`,children:t.name}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 transition-colors ${x?"border-gold-500 bg-white":"border-gray-300"}`,children:x&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-gold-500"})})]}),e.jsxs("div",{className:"mb-5",children:[t.original_price&&e.jsxs("div",{className:"text-sm text-gray-400 line-through decoration-red-500/50 decoration-2 mb-1",children:["Rp ",new Intl.NumberFormat("id-ID").format(t.original_price)]}),e.jsxs("p",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-gold-600 to-yellow-600 select-none",children:["Rp ",new Intl.NumberFormat("id-ID").format(t.price)]})]}),e.jsx("p",{className:"text-sm text-gray-600 flex-grow font-medium",children:t.description})]},t.id)})}),a.package_type&&e.jsx("p",{className:"text-sm font-medium text-red-600 mt-4 px-2",children:a.package_type})]})]}),c.error&&e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50",children:c.error}),e.jsx("form",{onSubmit:n,children:e.jsxs("div",{className:"p-6 bg-white shadow sm:rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Pilih Waktu Konsultasi"}),e.jsx(N,{schedules:m,selectedScheduleId:g.schedule_id,onSelect:t=>o("schedule_id",t)}),a.schedule_id&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:a.schedule_id}),e.jsx("div",{className:"mt-8 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-400 font-medium",children:[e.jsx("span",{className:"font-bold uppercase",children:"Perhatian:"})," Maksimal keterlambatan adalah 1 jam. Bila terjadi, maka klien/pasien dianggap tidak hadir. Hipnoterapis dianggap sudah menjalankan tugas, sesi terapi selesai, dan uang klien/pasien hangus."]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(w,{type:"submit",disabled:!g.schedule_id||d,children:"Konfirmasi Booking & Lanjut Pembayaran"})})]})})]})})]})}export{S as default};
