import{d as s,b as he,u as o,e as L,j as e,H as be,L as ue,f as fe}from"./app-CM1Y6LTV.js";import{A as ye}from"./AuthenticatedLayout-Dl4Dk0q9.js";import{F as je,i as ke,a as we,b as Ne}from"./index-DqqiZ-ZV.js";import ve from"./Form-BO9wbEO0.js";import{M,S as A}from"./SecondaryButton-DBcDJX6y.js";import{I as b}from"./InputLabel-C6WJAqK4.js";import{P as _e}from"./PrimaryButton-DInjwyJ8.js";import{C as Se}from"./calendar-64sKU_1M.js";import{U as Ce}from"./users-CWoDFXnf.js";import{C as De}from"./credit-card-GFII7VAa.js";import{C as Te}from"./chevron-right-Cz2zzFlN.js";import{F as Pe}from"./file-text-CRDLraww.js";import{A as Be}from"./index-BT4GQVzV.js";import{m as v}from"./proxy-CueuSXPz.js";import{E as Re}from"./eye-D_KDrRj4.js";import{C as E}from"./circle-check-Ce99v5oU.js";import"./transition-CEtJQUh1.js";import"./ThemeToggle-BMQkgMfp.js";import"./LiquidBackground-BWBex_Uv.js";import"./with-selector-B-R1ka5x.js";import"./createLucideIcon-DIkDG3cp.js";function Ie(i){const r=i.event.extendedProps.bookings?.length>0;return e.jsxs("div",{className:`h-full w-full p-2 rounded-xl transition-all flex flex-col justify-center gap-1 overflow-hidden ${r?"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white shadow-lg shadow-emerald-500/20":"bg-white dark:bg-slate-800 border-2 border-indigo-100 dark:border-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm"}`,children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-80 leading-none",children:i.timeText}),e.jsx("div",{className:`text-xs font-black truncate leading-tight uppercase tracking-tight ${r?"text-white":"text-slate-900 dark:text-white"}`,children:r?"âœ… TERISI":i.event.extendedProps.therapist?.name}),!r&&e.jsx("div",{className:"text-[8px] font-bold text-indigo-400 dark:text-indigo-500 uppercase tracking-widest",children:i.event.extendedProps.schedule_type==="class"?"ðŸŽ“ Kelas":"ðŸ‘¥ Konsultasi"}),r&&e.jsxs("div",{className:"text-[8px] font-black text-white/70 uppercase tracking-widest",children:[i.event.extendedProps.bookings.length," Pasien"]})]})}const Le=`
    .fc { --fc-border-color: rgba(255,255,255,0.05); --fc-button-bg-color: transparent; --fc-button-border-color: rgba(255,255,255,0.1); --fc-button-hover-bg-color: rgba(99,102,241,0.1); --fc-button-active-bg-color: rgba(99,102,241,0.2); --fc-today-bg-color: rgba(99,102,241,0.05); font-family: 'Inter', sans-serif; border: none !important; }
    .dark .fc { --fc-border-color: rgba(255,255,255,0.03); }
    .fc-theme-standard td, .fc-theme-standard th { border: 1px solid var(--fc-border-color) !important; }
    .fc-col-header-cell { padding: 20px 0 !important; background: rgba(255,255,255,0.02); }
    .fc-col-header-cell-cushion { text-transform: uppercase; font-size: 11px; font-weight: 900; letter-spacing: 0.1em; color: #6366f1; }
    .fc-timegrid-slot { height: 4em !important; border-bottom: 1px solid var(--fc-border-color) !important; }
    .fc-timegrid-slot-label-cushion { font-size: 10px; font-weight: 800; color: #94a3b8; text-transform: uppercase; }
    .fc-event { border: none !important; border-radius: 12px !important; padding: 4px !important; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: all 0.3s cubic-bezier(0.4,0,0.2,1); }
    .fc-event:hover { transform: scale(1.02) translateY(-2px); z-index: 50; box-shadow: 0 12px 24px rgba(0,0,0,0.15); }
    .fc-v-event { background: transparent !important; }
    .fc-event-main { padding: 4px !important; }
    .fc-timegrid-now-indicator-line { border-color: #6366f1 !important; border-width: 2px !important; }
    .fc-toolbar-title { font-size: 1.25rem !important; font-weight: 900 !important; text-transform: uppercase; letter-spacing: -0.025em; color: #1e293b; }
    .dark .fc-toolbar-title { color: #f8fafc; }
    .fc-button-primary { background-color: white !important; border: 1px solid rgba(0,0,0,0.05) !important; color: #475569 !important; font-weight: 800 !important; font-size: 11px !important; text-transform: uppercase !important; border-radius: 12px !important; padding: 8px 16px !important; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1) !important; }
    .dark .fc-button-primary { background-color: #1e293b !important; border-color: rgba(255,255,255,0.05) !important; color: #cbd5e1 !important; }
    .fc-button-primary:hover { background-color: #f8fafc !important; }
    .dark .fc-button-primary:hover { background-color: #334155 !important; }
    .fc-button-active { background-color: #4f46e5 !important; border-color: #4f46e5 !important; color: white !important; }
`;function ta({schedules:i,bookings:r,transactions:l,therapists:u,availableSchedules:F=[],filters:f}){const[d,$]=s.useState("schedules"),{flash:_,errors:S}=he().props,[z,c]=s.useState(!1),[x,J]=s.useState(f.therapist_id||""),[V,H]=s.useState("timeGridWeek"),K=s.useRef(null),{data:C,setData:D,patch:O,processing:U}=o({therapist_id:""}),[W,y]=s.useState(null),[p,m]=s.useState(null),[j,g]=s.useState(null),{data:k,setData:T,post:G,processing:q,reset:Y}=o({new_schedule_id:"",reschedule_reason:""}),{data:P,setData:B,post:Q,processing:X,reset:Z}=o({no_show_party:"therapist",no_show_reason:""}),[w,N]=s.useState(null),{data:ee,setData:ae,post:te,reset:re,processing:R}=o({rejection_reason:""}),{post:se,processing:I}=o({}),ie=[{id:"schedules",label:"Jadwal",icon:Se,count:i?.length||0},{id:"bookings",label:"Booking",icon:Ce,count:r?.length||0},{id:"transactions",label:"Pembayaran",icon:De,count:l?.length||0}];s.useEffect(()=>{const a=()=>H(window.innerWidth<1024?"timeGridDay":"timeGridWeek");return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s.useEffect(()=>{x!==(f.therapist_id||"")&&L.get(route("admin.orders.index"),{...f,therapist_id:x},{preserveState:!0,replace:!0})},[x]);const ne=a=>L.visit(route("admin.schedules.show",a.event.id)),de=a=>O(route("admin.bookings.assign-therapist",a),{onSuccess:()=>y(null)}),le=a=>{a.preventDefault(),G(route("admin.bookings.reschedule",p.id),{onSuccess:()=>{m(null),Y()}})},oe=a=>{a.preventDefault(),Q(route("admin.bookings.no-show",j.id),{onSuccess:()=>{g(null),Z()}})},ce=a=>{confirm(`Validasi transaksi ini?

Terapis akan otomatis ditugaskan secara acak.`)&&se(route("admin.transactions.validate",a.id))},xe=a=>{a.preventDefault(),te(route("admin.transactions.reject",w.id),{onSuccess:()=>{N(null),re()}})},pe=a=>{const t={pending_screening:"bg-yellow-100 text-yellow-800",pending_payment:"bg-blue-100 text-blue-800",pending_validation:"bg-indigo-100 text-indigo-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},n={pending_screening:"Menunggu Skrining",pending_payment:"Menunggu Bayar",pending_validation:"Menunggu Validasi",confirmed:"Dikonfirmasi",completed:"Selesai",cancelled:"Dibatalkan"};return e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t[a]||t.pending_payment}`,children:n[a]||a})},me=a=>{const t=a.transactionable;if(!t?.schedule)return null;const n=t.schedule;try{return{dateStr:new Date(n.date).toLocaleDateString("id-ID",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),startTime:n.start_time?.substring(0,5)||"--:--",endTime:n.end_time?.substring(0,5)||"--:--"}}catch{return null}},h=l?.filter(a=>a.status==="pending")?.length||0;return e.jsxs(ye,{header:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white leading-tight",children:"Manajemen Order"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-black uppercase tracking-[0.2em] mt-1",children:"Mengelola Jadwal, Pasien dan Pembayaran"})]})}),children:[e.jsx(be,{title:"Manajemen Order"}),e.jsx("style",{children:Le}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[_?.success&&e.jsx("div",{className:"p-4 text-sm text-green-800 dark:text-green-300 rounded-2xl bg-green-50/80 dark:bg-green-900/30 border border-green-200 dark:border-green-800/50 backdrop-blur-xl",children:_.success}),S?.error&&e.jsx("div",{className:"p-4 text-sm text-red-800 dark:text-red-300 rounded-2xl bg-red-50/80 dark:bg-red-900/30 border border-red-200 dark:border-red-800/50 backdrop-blur-xl",children:S.error}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"lg:w-72 flex-shrink-0 space-y-4",children:[e.jsx("div",{className:"bg-white/50 dark:bg-gray-800/40 backdrop-blur-md rounded-[2rem] border border-gray-100 dark:border-gray-700/50 p-2 shadow-sm",children:ie.map(a=>e.jsxs("button",{onClick:()=>$(a.id),className:`w-full flex items-center gap-4 px-5 py-4 rounded-2xl text-sm font-black transition-all duration-300 ${d===a.id?"bg-indigo-600 text-white shadow-xl shadow-indigo-600/20 translate-x-1":"text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[e.jsx(a.icon,{className:`w-5 h-5 ${d===a.id?"text-white":"text-indigo-500"}`}),e.jsx("span",{className:"flex-1 text-left",children:a.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.id==="transactions"&&h>0&&e.jsx("span",{className:`w-5 h-5 rounded-full text-[9px] font-black flex items-center justify-center ${d===a.id?"bg-white/20 text-white":"bg-amber-500 text-white animate-pulse"}`,children:h}),d===a.id&&e.jsx(Te,{className:"w-5 h-5 opacity-50"})]})]},a.id))}),e.jsxs("div",{className:"bg-indigo-50/50 dark:bg-indigo-950/10 rounded-[2rem] border border-indigo-100 dark:border-indigo-900/30 p-6",children:[e.jsxs("h4",{className:"flex items-center gap-2 text-[10px] font-black tracking-[0.2em] text-indigo-600 dark:text-indigo-500 uppercase mb-4",children:[e.jsx(Pe,{className:"w-4 h-4"})," Ringkasan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Total Slot Jadwal"}),e.jsx("p",{className:"text-xl font-black text-gray-900 dark:text-white",children:i?.length||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Total Booking"}),e.jsx("p",{className:"text-xl font-black text-gray-900 dark:text-white",children:r?.length||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Transaksi Pending"}),e.jsx("p",{className:`text-xl font-black ${h>0?"text-amber-600":"text-emerald-600"}`,children:h})]})]})]})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(Be,{mode:"wait",children:[d==="schedules"&&e.jsx(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 p-8 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-teal-500 rounded-full"}),"Kelola Jadwal Praktek"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>window.print(),className:"px-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-[10px] font-black uppercase tracking-widest text-gray-600 dark:text-gray-300 hover:bg-gray-100 transition-all",children:"Cetak"}),e.jsx("button",{onClick:()=>c(!0),className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-600/20",children:"+ Tambah Slot"})]})]}),e.jsxs("div",{className:"mb-8 pb-6 border-b border-gray-100 dark:border-gray-700/50",children:[e.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 block",children:"Filter Terapis"}),e.jsxs("select",{value:x,onChange:a=>J(a.target.value),className:"w-full sm:w-64 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 text-sm font-bold text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[e.jsx("option",{value:"",children:"Semua Terapis"}),u.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-900/20 rounded-[2rem] transition-colors overflow-hidden",children:e.jsx(je,{ref:K,plugins:[ke,we,Ne],initialView:V,headerToolbar:{left:"prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},locale:"id",slotMinTime:"08:00:00",slotMaxTime:"22:00:00",slotDuration:"01:00:00",allDaySlot:!1,events:i,eventClick:ne,editable:!1,droppable:!1,eventContent:Ie,height:"auto",expandRows:!0,stickyHeaderDates:!0,nowIndicator:!0})}),e.jsxs("div",{className:"flex gap-6 mt-6 pt-6 border-t border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"}),e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Terisi"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"}),e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Tersedia"})]})]})]})},"schedules"),d==="bookings"&&e.jsx(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-8 border-b border-gray-50 dark:border-gray-700/50 flex justify-between items-center bg-gray-50/30 dark:bg-gray-900/20",children:[e.jsxs("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-600 rounded-full"}),"Booking Pasien"]}),e.jsxs("span",{className:"px-4 py-1 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest",children:[r.length," Total"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:e.jsxs("tr",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] border-b border-white/40 dark:border-gray-700/30",children:[e.jsx("th",{className:"px-6 py-5",children:"Info Booking"}),e.jsx("th",{className:"px-6 py-5",children:"Pasien & Screening"}),e.jsx("th",{className:"px-6 py-5",children:"Jadwal"}),e.jsx("th",{className:"px-6 py-5 text-center",children:"Status"}),e.jsx("th",{className:"px-6 py-5",children:"Terapis & Aksi"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800/50",children:[r.map(a=>e.jsxs("tr",{className:"group hover:bg-gray-50/50 dark:hover:bg-gray-800/20 transition-all",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-black text-gray-900 dark:text-white mb-1",children:a.booking_code}),e.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-md w-fit",children:a.package_type?.toUpperCase()||"KONSULTASI"})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:a.patient?.name}),e.jsx("div",{className:"text-xs text-gray-500",children:a.patient?.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-1 my-1",children:e.jsx("div",{className:`h-1 rounded-full ${a.patient_profile_stats?.percentage===100?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${a.patient_profile_stats?.percentage||0}%`}})}),e.jsxs("span",{className:"text-[9px] font-black text-gray-400 uppercase",children:[a.patient_profile_stats?.percentage||0,"%"]})]}),a.patient?.screening_completed_at?e.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase border-l border-gray-200 dark:border-gray-700 pl-3",children:"OK"}):e.jsx("span",{className:"text-[9px] font-black text-rose-500 uppercase border-l border-gray-200 dark:border-gray-700 pl-3",children:"No"})]})]})}),e.jsx("td",{className:"px-6 py-5",children:a.schedule?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:new Date(a.schedule.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[a.schedule.start_time?.substring(0,5)," WIB"]})]}):e.jsx("span",{className:"text-xs text-gray-400 italic",children:"No Slot"})}),e.jsx("td",{className:"px-6 py-5 text-center",children:pe(a.status)}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"flex flex-col gap-3",children:W===a.id?e.jsxs("div",{className:"flex flex-col gap-2 bg-white/80 dark:bg-gray-800/80 backdrop-blur p-3 rounded-xl border border-white dark:border-gray-700 shadow-lg",children:[e.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Assign Terapis"}),e.jsxs("select",{className:"text-xs bg-gray-50 dark:bg-gray-900 border-none rounded-lg focus:ring-2 focus:ring-indigo-500/20",value:C.therapist_id,onChange:t=>D("therapist_id",t.target.value),children:[e.jsx("option",{value:"",children:"Pilih Terapis"}),u.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("button",{onClick:()=>de(a.id),className:"flex-1 py-1.5 bg-indigo-600 text-white text-[10px] font-black uppercase rounded-lg disabled:opacity-50",disabled:U||!C.therapist_id,children:"Simpan"}),e.jsx("button",{onClick:()=>y(null),className:"flex-1 py-1.5 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-[10px] font-black uppercase rounded-lg",children:"Batal"})]})]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between group/tp",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-0.5",children:"PJ"}),a.therapist?e.jsx("span",{className:"text-xs font-bold text-gray-900 dark:text-white",children:a.therapist.name}):e.jsx("span",{className:"text-xs font-bold text-amber-500",children:["pending_payment","pending_validation"].includes(a.status)?"â³ Otomatis":"BELUM"})]}),e.jsx("button",{onClick:()=>{y(a.id),D("therapist_id",a.therapist_id||"")},className:"p-1.5 text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg opacity-0 group-hover:opacity-100 group-hover/tp:opacity-100 transition-all",children:e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 pt-2 border-t border-gray-100 dark:border-gray-800/50",children:[a.schedule_id&&e.jsx(ue,{href:route("admin.schedules.show",a.schedule_id),className:"px-2 py-1.5 bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-400 text-[9px] font-black uppercase tracking-widest rounded-lg border border-gray-200 dark:border-gray-700 hover:border-indigo-500/50 hover:text-indigo-500 transition-all",children:"Detail"}),["confirmed","in_progress"].includes(a.status)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m(a),className:"px-2 py-1.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded-lg",children:"Reschedule"}),e.jsx("button",{onClick:()=>g(a),className:"px-2 py-1.5 bg-rose-500 text-white text-[9px] font-black uppercase rounded-lg",children:"No-Show"})]})]})]})})})]},a.id)),r.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-8 py-20 text-center",children:e.jsx("p",{className:"text-gray-500 italic",children:"Belum ada booking pasien."})})})]})]})})]})},"bookings"),d==="transactions"&&e.jsx(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-8 border-b border-gray-50 dark:border-gray-700/50 flex justify-between items-center bg-emerald-50/30 dark:bg-emerald-950/20",children:[e.jsxs("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-emerald-500 rounded-full"}),"Validasi Pembayaran"]}),e.jsxs("span",{className:"px-4 py-1 bg-emerald-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest",children:[l.length," Transaksi"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:e.jsxs("tr",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.15em] border-b border-white/40 dark:border-gray-700/30",children:[e.jsx("th",{className:"px-6 py-5 text-center",children:"Invoice"}),e.jsx("th",{className:"px-6 py-5",children:"Pengguna"}),e.jsx("th",{className:"px-6 py-5",children:"Layanan"}),e.jsx("th",{className:"px-6 py-5",children:"Nominal"}),e.jsx("th",{className:"px-6 py-5",children:"Bukti"}),e.jsx("th",{className:"px-6 py-5",children:"Status"}),e.jsx("th",{className:"px-6 py-5 text-center",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800/50",children:l.map(a=>{const t=me(a),n=a.transactionable_type?.includes("Booking"),ge=a.transactionable?.user_voucher?.voucher;return e.jsxs("tr",{className:"group hover:bg-gray-50/50 dark:hover:bg-gray-800/20 transition-all",children:[e.jsx("td",{className:"px-6 py-5 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm font-black text-gray-900 dark:text-white mb-1",children:a.invoice_number}),e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:a.payment_bank||"-"})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:a.user?.name}),e.jsx("span",{className:"text-xs text-gray-500",children:a.user?.email})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-[10px] font-black px-2 py-0.5 bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 rounded-md border border-indigo-500/20 w-fit uppercase tracking-widest",children:n?"Booking":a.transactionable_type?.split("\\").pop()}),n&&e.jsx("span",{className:"text-[9px] font-black text-indigo-500 uppercase",children:a.transactionable?.package_type||"Package"}),t&&e.jsxs("div",{className:"flex flex-col mt-1",children:[e.jsxs("span",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400",children:["ðŸ“… ",t.dateStr]}),e.jsxs("span",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400",children:["ðŸ• ",t.startTime," â€“ ",t.endTime]})]})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm font-black text-gray-900 dark:text-white",children:["Rp ",new Intl.NumberFormat("id-ID").format(a.amount||0)]}),ge?e.jsxs("div",{className:"mt-1 flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-rose-500 uppercase",children:"ðŸ·ï¸ DISKON"}),e.jsxs("span",{className:"px-2 py-0.5 bg-rose-50 dark:bg-rose-900/30 text-rose-600 text-[10px] font-black rounded-md border border-rose-100 dark:border-rose-800 line-through w-fit",children:["Rp ",new Intl.NumberFormat("id-ID").format((a.amount||0)+(a.transactionable.user_voucher.voucher.discount_amount||0))]})]}):e.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase mt-1",children:"Normal"})]})}),e.jsx("td",{className:"px-6 py-5",children:a.payment_proof?e.jsxs("a",{href:`/storage/${a.payment_proof}`,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 group/proof",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-400 group-hover/proof:bg-indigo-500 group-hover/proof:text-white transition-all",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-[10px] font-black text-gray-500 group-hover/proof:text-indigo-600 uppercase",children:"Lihat"})]}):e.jsx("span",{className:"text-[10px] font-black text-rose-500 uppercase italic",children:"Belum Upload"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-[10px] font-black uppercase tracking-widest rounded-full border ${a.status==="paid"?"bg-emerald-500/10 text-emerald-600 border-emerald-500/20":a.status==="rejected"?"bg-rose-500/10 text-rose-600 border-rose-500/20":a.status==="pending"?"bg-amber-500/10 text-amber-600 border-amber-500/20":"bg-gray-500/10 text-gray-500 border-gray-500/20"}`,children:a.status==="paid"?"Valid":a.status==="rejected"?"Ditolak":a.status==="pending"?"Menunggu":a.status})}),e.jsxs("td",{className:"px-6 py-5 text-center",children:[a.status==="pending"&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{disabled:I,onClick:()=>ce(a),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-[10px] font-black uppercase tracking-widest rounded-xl transition-all shadow-lg shadow-emerald-500/20 disabled:opacity-50",children:I?"...":"Validasi"}),e.jsx("button",{onClick:()=>N(a),className:"px-4 py-2 bg-rose-600/10 hover:bg-rose-600 text-rose-600 hover:text-white text-[10px] font-black uppercase tracking-widest rounded-xl border border-rose-600/20 transition-all",children:"Tolak"})]}),a.status==="paid"&&a.validated_at&&e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("span",{className:"text-[9px] text-gray-400 font-bold",children:["âœ“ ",new Date(a.validated_at).toLocaleDateString("id-ID")]}),a.validated_by&&e.jsxs("span",{className:"text-[9px] font-black text-indigo-500 uppercase flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),a.validated_by_user?.name||a.validated_by?.name||"Admin"]})]})]})]},a.id)})})]})}),l.length===0&&e.jsxs("div",{className:"py-20 text-center",children:[e.jsx(E,{className:"w-12 h-12 text-gray-200 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-black uppercase tracking-[0.2em] italic",children:"Tidak ada transaksi."})]})]})},"transactions")]})})]})]})}),z&&typeof document<"u"&&fe.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900/60 backdrop-blur-md",onClick:()=>c(!1)}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[3rem] p-10 w-full max-w-lg shadow-2xl relative border border-white dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-white tracking-tight",children:"Tambah Slot Jadwal"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(ve,{therapists:u,onSuccess:()=>c(!1)})]})]}),document.body),e.jsx(M,{show:p!==null,onClose:()=>m(null),children:e.jsxs("form",{onSubmit:le,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Reschedule Sesi"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["Pasien: ",e.jsx("strong",{children:p?.patient?.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(b,{htmlFor:"new_schedule_id",value:"Pilih Jadwal Baru"}),e.jsxs("select",{id:"new_schedule_id",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",value:k.new_schedule_id,onChange:a=>T("new_schedule_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Slot Tersedia --"}),F.filter(a=>a.id!==p?.schedule_id).map(a=>e.jsxs("option",{value:a.id,children:[a.therapist?.name," â€” ",new Date(a.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})," â€” ",a.start_time?.substring(0,5)]},a.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(b,{htmlFor:"reschedule_reason",value:"Alasan Reschedule"}),e.jsx("textarea",{id:"reschedule_reason",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm",rows:"2",value:k.reschedule_reason,onChange:a=>T("reschedule_reason",a.target.value),required:!0})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(A,{onClick:()=>m(null),children:"Batal"}),e.jsx("button",{type:"submit",disabled:q||!k.new_schedule_id,className:"inline-flex items-center px-4 py-2 bg-amber-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-amber-700 disabled:opacity-25 transition",children:"Update Jadwal"})]})]})}),e.jsx(M,{show:j!==null,onClose:()=>g(null),children:e.jsxs("form",{onSubmit:oe,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Tandai Tidak Hadir"}),e.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["Booking Code: ",j?.booking_code]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(b,{htmlFor:"no_show_party",value:"Pihak yang Tidak Hadir"}),e.jsxs("select",{id:"no_show_party",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-red-500 focus:ring-red-500 text-sm",value:P.no_show_party,onChange:a=>B("no_show_party",a.target.value),required:!0,children:[e.jsx("option",{value:"therapist",children:"Praktisi (Tidak Hadir)"}),e.jsx("option",{value:"patient",children:"Pasien (Tidak Hadir)"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(b,{htmlFor:"no_show_reason",value:"Keterangan Admin"}),e.jsx("textarea",{id:"no_show_reason",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-red-500 focus:ring-red-500 text-sm",rows:"2",value:P.no_show_reason,onChange:a=>B("no_show_reason",a.target.value)})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(A,{onClick:()=>g(null),children:"Batal"}),e.jsx("button",{type:"submit",disabled:X,className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 disabled:opacity-25 transition",children:"Tandai No-Show"})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/80 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-8 rounded-[2.5rem] w-full max-w-md border border-gray-100 dark:border-gray-800 shadow-2xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold dark:text-white mb-2",children:"Tolak Pembayaran"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Invoice: ",e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:w.invoice_number})]})]}),e.jsxs("form",{onSubmit:xe,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Alasan Penolakan"}),e.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-2xl px-4 py-3 text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500/20 focus:border-red-500 transition-all min-h-[100px]",value:ee.rejection_reason,onChange:a=>ae("rejection_reason",a.target.value),required:!0})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(_e,{type:"submit",disabled:R,className:"!bg-red-600 hover:!bg-red-500 !rounded-2xl !px-6 !py-4 !text-xs !tracking-widest !font-black !h-auto !shadow-xl !shadow-red-600/20 !uppercase !w-full !justify-center",children:R?"Memproses...":"Konfirmasi Penolakan"}),e.jsx("button",{type:"button",onClick:()=>N(null),className:"text-sm font-bold text-gray-500 hover:text-gray-700 transition-colors py-2",children:"Batal"})]})]})]})})]})}export{ta as default};
