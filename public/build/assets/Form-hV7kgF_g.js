import{u as D,b as K,j as e,H as $,L as f}from"./app-DeYC_B3s.js";import{A as M}from"./AuthenticatedLayout-DkqRyDgi.js";import{I as U}from"./InputError-BsioSLxk.js";import{I as z}from"./InputLabel-BYMMY78p.js";import{T as H}from"./TextInput-DCH6hF8f.js";import{S as y}from"./shield-CkBcNvet.js";import{S as V}from"./save-ZVMUOhcn.js";import{C as F}from"./chevron-left-DSsJAi05.js";import{c as j}from"./createLucideIcon-m1P-BP8q.js";import{B as W}from"./book-open-CIImeiOb.js";import{U as G}from"./users-BdyXVM0X.js";import{C as q}from"./credit-card-DBssgo0l.js";import{C as J}from"./calendar-DAHujfPu.js";import"./transition-BXctK92l.js";import"./ThemeToggle-BLXZAytr.js";import"./LiquidBackground-DC_P-gEI.js";const X=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],Y=j("chart-no-axes-column-increasing",X);const Z=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q=j("settings",Z);function ue({roleModel:c,permissions:h,rolePermissions:v}){const g=!!c.id,{data:t,setData:l,post:w,put:N,processing:C,errors:S}=D({name:c.name||"",permissions:v||[]}),u={"Booking & Konsultasi":["bookings","schedules"],"Transaksi & Pembayaran":["transactions","packages","vouchers"],"Manajemen Pengguna":["users","roles","permissions"],"Konten & Blog":["blog_posts","courses","lessons"],"Laporan & Statistik":["reports","finance","expenses","petty_cash"]},E=s=>{const a=s.split(" ");if(a.length>=2){const o=a[0],r=a.slice(1).join("_");return{action:o,resource:r}}return{action:s,resource:"general"}},L=K.useMemo(()=>{const s={};return Object.keys(u).forEach(a=>s[a]={}),h.forEach(a=>{const{action:o,resource:r}=E(a.name);let n="Lainnya";for(const[m,p]of Object.entries(u))if(p.includes(r)){n=m;break}s[n]||(s[n]={}),s[n][r]||(s[n][r]=[]),s[n][r].push({id:a.id,name:a.name,action:o,resource:r})}),Object.fromEntries(Object.entries(s).filter(([a,o])=>Object.keys(o).length>0))},[h]),b=s=>{const{value:a,checked:o}=s.target;o?l("permissions",[...t.permissions,a]):l("permissions",t.permissions.filter(r=>r!==a))},A=s=>{const a=s.map(r=>r.name);if(a.every(r=>t.permissions.includes(r)))l("permissions",t.permissions.filter(r=>!a.includes(r)));else{const r=[...new Set([...t.permissions,...a])];l("permissions",r)}},_=s=>{const a=Object.values(s).flat().map(r=>r.name);if(a.every(r=>t.permissions.includes(r)))l("permissions",t.permissions.filter(r=>!a.includes(r)));else{const r=[...new Set([...t.permissions,...a])];l("permissions",r)}},I=s=>{s.preventDefault(),g?N(route("admin.roles.update",c.id)):w(route("admin.roles.store"))},P=s=>{switch(s){case"Booking & Konsultasi":return e.jsx(J,{className:"w-4 h-4"});case"Transaksi & Pembayaran":return e.jsx(q,{className:"w-4 h-4"});case"Manajemen Pengguna":return e.jsx(G,{className:"w-4 h-4"});case"Konten & Blog":return e.jsx(W,{className:"w-4 h-4"});case"Laporan & Statistik":return e.jsx(Y,{className:"w-4 h-4"});default:return e.jsx(Q,{className:"w-4 h-4"})}},R=s=>s.replace(/_/g," ").toUpperCase(),k=s=>({view:"VIEW",create:"CREATE",edit:"EDIT",delete:"DELETE",cancel:"CANCEL",validate:"VALIDATE",reject:"REJECT",publish:"PUBLISH",approve:"APPROVE",export:"EXPORT",analyze:"ANALYZE",bulk_delete:"BULK DEL",assign:"ASSIGN",view_agreement:"AGREEMENT"})[s]||s.toUpperCase();return e.jsxs(M,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{href:route("admin.users.index",{tab:"roles"}),className:"p-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 text-gray-400 hover:text-indigo-600 transition-colors shadow-sm",children:e.jsx(F,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white uppercase tracking-tight",children:g?"Konfigurasi Hak Akses":"Tambah Role Baru"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest mt-1",children:g?`Mengatur Izin Untuk Role: ${c.name}`:"Mendefinisikan Peran Baru Dalam Sistem"})]})]}),children:[e.jsx($,{title:g?"Atur Hak Akses":"Tambah Role"}),e.jsx("div",{className:"py-12 bg-gray-50 dark:bg-gray-950 min-h-[calc(100vh-64px)]",children:e.jsx("div",{className:"max-w-6xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:I,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] p-8 shadow-xl border border-white dark:border-gray-800 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(y,{className:"w-32 h-32"})}),e.jsxs("div",{className:"max-w-xl",children:[e.jsx(z,{htmlFor:"name",className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 mb-3 ml-1",children:"Nama Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{id:"name",type:"text",value:t.name,className:"w-full bg-gray-50 dark:bg-gray-950 border-transparent focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 rounded-2xl pl-6 pr-6 py-4 text-sm font-bold text-gray-900 dark:text-white transition-all",onChange:s=>l("name",s.target.value.toLowerCase().replace(/\s+/g,"_")),placeholder:"Contoh: manager_klinik, asisten_admin",required:!0,disabled:c.name==="super_admin"}),c.name==="super_admin"&&e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 px-3 py-1 bg-rose-50 text-rose-600 rounded-lg text-[9px] font-black uppercase tracking-widest border border-rose-100",children:[e.jsx(y,{className:"w-3 h-3"}),"System Role"]})]}),e.jsx(U,{message:S.name,className:"mt-2 ml-1"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4 px-2",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-600 rounded-full"}),e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:"Daftar Izin Akses"})]}),Object.entries(L).map(([s,a])=>{const r=Object.values(a).flat().map(n=>n.name).every(n=>t.permissions.includes(n));return e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] shadow-xl border border-white dark:border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-5 bg-gray-50/50 dark:bg-gray-800/30 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 rounded-2xl bg-white dark:bg-gray-900 shadow-sm text-indigo-600 dark:text-indigo-400 border border-gray-100 dark:border-gray-800",children:P(s)}),e.jsx("span",{className:"text-sm font-black uppercase tracking-[0.1em] text-gray-900 dark:text-white",children:s})]}),e.jsx("button",{type:"button",onClick:()=>_(a),className:`text-[10px] font-black uppercase tracking-widest px-5 py-2 rounded-xl transition-all border ${r?"bg-rose-50 border-rose-100 text-rose-600":"bg-indigo-50 border-indigo-100 text-indigo-600 hover:bg-indigo-600 hover:text-white hover:border-indigo-600"}`,children:r?"Lepas Semua Kategori":"Pilih Semua Kategori"})]}),e.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-800/50",children:Object.entries(a).map(([n,m])=>{const p=m.map(i=>i.name).every(i=>t.permissions.includes(i)),x=["view","create","edit","delete"],B=m.filter(i=>x.includes(i.action)),T=m.filter(i=>!x.includes(i.action));return e.jsx("div",{className:"p-8 hover:bg-gray-50/30 dark:hover:bg-gray-800/10 transition-colors",children:e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-start gap-8",children:[e.jsxs("div",{className:"xl:w-1/4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),e.jsx("span",{className:"text-[12px] font-black tracking-widest text-gray-900 dark:text-white",children:R(n)})]}),e.jsx("button",{type:"button",onClick:()=>A(m),className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 uppercase tracking-tighter transition-colors",children:p?"Deselect All":"Select All"})]}),e.jsx("div",{className:"xl:w-3/4",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3",children:[x.map(i=>{const d=B.find(O=>O.action===i);return d?e.jsxs("label",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl border transition-all cursor-pointer group ${t.permissions.includes(d.name)?"bg-indigo-600 border-indigo-600 shadow-lg shadow-indigo-600/20":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-800 hover:border-indigo-200 dark:hover:border-indigo-800"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",value:d.name,checked:t.permissions.includes(d.name),onChange:b}),e.jsx("div",{className:`w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all ${t.permissions.includes(d.name)?"bg-white border-white":"border-gray-200 dark:border-gray-700 group-hover:border-indigo-400"}`,children:t.permissions.includes(d.name)&&e.jsx("svg",{className:"w-2.5 h-2.5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest transition-colors ${t.permissions.includes(d.name)?"text-white":"text-gray-500 dark:text-gray-400"}`,children:k(i)})]},d.id):e.jsx("div",{className:"hidden sm:block"},i)}),T.map(i=>e.jsxs("label",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl border transition-all cursor-pointer group ${t.permissions.includes(i.name)?"bg-emerald-600 border-emerald-600 shadow-lg shadow-emerald-600/20":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-800 hover:border-emerald-200 dark:hover:border-emerald-800"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",value:i.name,checked:t.permissions.includes(i.name),onChange:b}),e.jsx("div",{className:`w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all ${t.permissions.includes(i.name)?"bg-white border-white":"border-gray-200 dark:border-gray-700 group-hover:border-emerald-400"}`,children:t.permissions.includes(i.name)&&e.jsx("svg",{className:"w-2.5 h-2.5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest transition-colors ${t.permissions.includes(i.name)?"text-white":"text-emerald-500/80 dark:text-emerald-400/80"}`,children:k(i.action)})]},i.id))]})})]})},n)})})]},s)})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-900 p-8 rounded-[2.5rem] shadow-2xl border border-white dark:border-gray-800 sticky bottom-8 transition-all duration-500 backdrop-blur-md bg-white/90 dark:bg-gray-900/90",children:[e.jsx(f,{href:route("admin.users.index",{tab:"roles"}),className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-400 hover:text-rose-500 transition-colors px-6",children:"Batal & Kembali"}),e.jsxs("button",{type:"submit",disabled:C,className:"flex items-center gap-4 px-10 py-5 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.3em] hover:bg-indigo-700 hover:-translate-y-1 transition-all shadow-xl shadow-indigo-600/30 active:scale-95 disabled:opacity-50",children:[e.jsx(V,{className:"w-5 h-5"}),g?"Simpan Perubahan":"Buat Role Baru"]})]})]})})})]})}export{ue as default};
