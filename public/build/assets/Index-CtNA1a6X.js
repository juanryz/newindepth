import{a as v,r as u,u as w,j as e,H as S}from"./app-8co7cUK5.js";import{A as _}from"./AuthenticatedLayout-0xxoaf0s.js";import{M as h,S as p}from"./Modal-CtkLmZBn.js";import{T as C}from"./TextInput--QZfJ8lK.js";import{I as L}from"./InputLabel-731M5yYz.js";import"./transition-BcYff2JJ.js";import"./ThemeToggle-Df-flZVm.js";import"./with-selector-CihOFJkY.js";function R({bookings:i}){const{flash:l,errors:d}=v().props,[t,o]=u.useState(null),[a,c]=u.useState(null),{data:b,setData:m,post:j,processing:r,reset:y,errors:x}=w({recording_link:""}),f=s=>{o(s)},g=()=>{o(null)},k=s=>{c(s),m("recording_link","")},n=()=>{c(null),y()},N=s=>{s.preventDefault(),j(route("schedules.complete",a.id),{onSuccess:()=>n()})};return e.jsxs(_,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Jadwal Praktik Saya"}),children:[e.jsx(S,{title:"Jadwal Praktik Saya"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[l.success&&e.jsx("div",{className:"p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 border border-green-200",children:l.success}),d.recording_link&&e.jsxs("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 border border-red-200",children:["Gagal menyimpan: ",d.recording_link]}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg overflow-hidden border border-gray-100",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Sesi Mendatang & Selesai"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Di sini Anda hanya dapat melihat sesi yang sudah dipesan oleh pasien. Anda diwajibkan menyertakan link rekaman (YouTube Private/Unlisted) untuk setiap sesi yang diselesaikan."}),i.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:e.jsx("p",{className:"text-gray-500",children:"Belum ada jadwal pasien yang aktif atau selesai saat ini."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxs("div",{className:`rounded-xl border shadow-sm p-5 relative overflow-hidden ${s.status==="completed"?"bg-gray-50 border-gray-200":"bg-white border-indigo-100 ring-1 ring-indigo-50"}`,children:[e.jsx("div",{className:"absolute top-4 right-4 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider bg-white shadow-sm border",children:s.status==="completed"?e.jsx("span",{className:"text-gray-500",children:"Selesai"}):e.jsx("span",{className:"text-indigo-600",children:"Akan Datang"})}),e.jsxs("div",{className:"mb-4 pr-24",children:[e.jsx("h4",{className:"font-bold text-lg text-gray-900",children:s.patient.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.patient.email})]}),e.jsxs("div",{className:"bg-indigo-50/50 rounded-lg p-3 mb-4 border border-indigo-100/50",children:[e.jsxs("div",{className:"flex items-center text-sm text-indigo-900 font-medium mb-1",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(s.schedule.date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),e.jsxs("div",{className:"flex items-center text-sm text-indigo-800",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.schedule.start_time.substring(0,5)," - ",s.schedule.end_time.substring(0,5)," WIB"]})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-auto",children:[e.jsx("button",{onClick:()=>f(s.patient),className:"w-full text-center text-xs font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 py-2 rounded-lg transition-colors",children:"Tampilkan Riwayat Pasien"}),s.status==="confirmed"&&e.jsx("button",{onClick:()=>k(s),className:"w-full text-center text-sm font-bold text-white bg-indigo-600 hover:bg-indigo-700 py-2 rounded-lg transition-colors shadow-sm",children:"Akhiri Sesi"}),s.status==="completed"&&s.recording_link&&e.jsxs("a",{href:s.recording_link,target:"_blank",rel:"noreferrer",className:"w-full text-center text-xs font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 border border-gray-300 py-2 rounded-lg transition-colors flex items-center justify-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Buka Link Rekaman"]})]})]},s.id))})]})})]})}),e.jsx(h,{show:t!==null,onClose:g,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Riwayat Pasien"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Nama: ",e.jsx("span",{className:"font-semibold text-gray-800",children:t?.name})," ",e.jsx("br",{}),"Email: ",t?.email]}),e.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[t?.bookings?.map(s=>e.jsxs("div",{className:`p-4 rounded-lg border flex gap-4 ${s.status==="completed"?"bg-gray-50 border-gray-200":"bg-white border-blue-100"}`,children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:s.status==="completed"?"✓":"..."}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900 text-sm",children:["Tanggal: ",new Date(s.schedule?.date||"").toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Terapis: ",e.jsx("span",{className:"font-medium",children:s.schedule?.therapist?.name})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Status: ",s.status==="completed"?"Selesai":"Akan Datang"]}),s.recording_link&&e.jsx("a",{href:s.recording_link,target:"_blank",rel:"noreferrer",className:"text-xs text-indigo-600 hover:underline mt-2 inline-block",children:"Link Rekaman Tersedia →"})]})]},s.id)),t?.bookings?.length===0&&e.jsx("p",{className:"text-gray-500 italic text-center py-4",children:"Belum ada riwayat sesi yang tercatat."})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(p,{onClick:g,children:"Tutup"})})]})}),e.jsx(h,{show:a!==null,onClose:n,children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Akhiri Sesi & Simpan Dokumentasi"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Sesi dengan ",e.jsx("strong",{children:a?.patient?.name})," pada ",a?.schedule?.date,". ",e.jsx("br",{}),"Sebagai dokumentasi perusahaan, harap masukkan link Live Streaming YouTube (Private/Unlisted) untuk sesi ini."]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(L,{htmlFor:"recording_link",value:"Link Rekaman YouTube"}),e.jsx(C,{id:"recording_link",type:"url",className:"mt-1 block w-full border-gray-300",placeholder:"https://youtu.be/...",value:b.recording_link,onChange:s=>m("recording_link",s.target.value),required:!0}),x.recording_link?e.jsx("p",{className:"text-sm text-red-600 mt-2",children:x.recording_link}):e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"* URL harus valid, berawalan http:// atau https://"})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(p,{onClick:n,disabled:r,children:"Batal"}),e.jsx("button",{type:"submit",disabled:r,className:`inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150 ${r&&"opacity-25"}`,children:"Akhiri Sesi"})]})]})})]})}export{R as default};
