import{j as e,r as C,a as S,u as P,H as F}from"./app-CRP12ciw.js";import{A as I}from"./AuthenticatedLayout-BOZ6Em7l.js";import{P as U}from"./PrimaryButton-CTi2fx3u.js";import"./transition-D4ClLI7o.js";import"./ThemeToggle-DGL5zUxT.js";function A({schedules:c=[],selectedScheduleId:s,onSelect:l}){if(c.length===0)return e.jsx("div",{className:"p-4 bg-gray-50/50 dark:bg-gray-900/40 border border-gray-200 dark:border-gray-700/50 rounded-xl text-gray-500 dark:text-gray-400 text-sm italic text-center",children:"Belum ada jadwal yang tersedia untuk saat ini."});const[h,x]=C.useState("week"),g=c.filter(t=>{const i=(t.date||"").substring(0,10),r=new Date(`${i}T00:00:00Z`),n=new Intl.DateTimeFormat("en-CA",{timeZone:"Asia/Jakarta"}).format(new Date),a=new Date(`${n}T00:00:00Z`);switch(h){case"day":return r.getTime()===a.getTime();case"week":const o=new Date(a);return o.setDate(a.getDate()+7),r.getTime()>=a.getTime()&&r.getTime()<=o.getTime();case"month":return r.getUTCMonth()===a.getUTCMonth()&&r.getUTCFullYear()===a.getUTCFullYear();case"year":return r.getUTCFullYear()===a.getUTCFullYear();default:return!0}}).reduce((t,i)=>{const r=(i.date||"").substring(0,10);return t[r]||(t[r]=[]),t[r].push(i),t},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"day",label:"Hari Ini"},{id:"week",label:"Minggu Ini"},{id:"month",label:"Bulan Ini"},{id:"year",label:"Tahun Ini"},{id:"all",label:"Semua Jadwal"}].map(t=>e.jsx("button",{type:"button",onClick:()=>x(t.id),className:`px-4 py-2 text-sm font-bold rounded-full transition-all duration-200 border ${h===t.id?"bg-indigo-600 text-white border-indigo-600 shadow-md transform -translate-y-0.5":"bg-white/40 dark:bg-gray-800/40 text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700/50 hover:bg-gray-50 dark:hover:bg-gray-700/60"}`,children:t.label},t.id))}),Object.keys(g).length===0?e.jsx("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-900/40 border border-gray-200 dark:border-gray-700/50 rounded-2xl text-gray-500 dark:text-gray-400 text-sm text-center italic",children:"Tidak ada jadwal yang sesuai dengan filter ini."}):Object.entries(g).map(([t,i])=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold uppercase tracking-wider text-gray-400 dark:text-gray-500 mb-4 px-2",children:new Date(t).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:i.map(r=>{const n=s===r.id,a=r.bookings_count??0,o=new Date,d=new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Jakarta",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(o).reduce((f,j)=>(f[j.type]=j.value,f),{}),w=new Date(Date.UTC(d.year,d.month-1,d.day,d.hour,d.minute,d.second)),v=new Date(w.getTime()+3600*1e3),[N,D,T]=r.start_time.split(":"),y=new Date(r.date),_=new Date(Date.UTC(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate(),N,D,T)),p=r.status==="full"||a>=r.quota,k=_<v,m=p||k;return e.jsxs("button",{type:"button",onClick:()=>!m&&l(r.id),disabled:m,className:`
                                        flex flex-col items-center justify-center p-4 rounded-xl border-2 transition-all duration-200
                                        ${m?"bg-gray-100/50 dark:bg-gray-800/20 border-gray-200 dark:border-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed":""}
                                        ${!m&&n?"bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-500 text-indigo-700 dark:text-indigo-400 shadow-md transform -translate-y-1":""}
                                        ${!m&&!n?"bg-white/40 dark:bg-gray-800/40 border-gray-200 dark:border-gray-700/50 text-gray-700 dark:text-gray-300 hover:border-indigo-300 dark:hover:border-indigo-700 hover:shadow-sm":""}
                                    `,children:[e.jsxs("span",{className:"font-bold text-sm text-center",children:[r.start_time.substring(0,5)," - ",r.end_time.substring(0,5)]}),e.jsx("span",{className:"text-xs mt-1",children:p?"Penuh":k?"Lewat":`${r.quota-a} slot sisa`})]},r.id)})})]},t))]})}function Y({schedules:c,packageOptions:s,screeningResult:l}){const{flash:h,errors:x}=S().props,{data:b,setData:g,post:t,processing:i,errors:r}=P({schedule_id:"",package_type:s.recommended}),n=a=>{a.preventDefault(),t(route("bookings.store"))};return e.jsxs(I,{header:e.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white leading-tight",children:"Buat Janji Temu Hipnoterapi"}),children:[e.jsx(F,{title:"Booking Hipnoterapi"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-6xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[l&&e.jsx("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl shadow-sm sm:rounded-2xl overflow-hidden border border-gold-100 dark:border-gold-900/30",children:e.jsxs("div",{className:"p-6 bg-gradient-to-r from-gold-50/50 to-white/30 dark:from-gold-900/20 dark:to-transparent",children:[e.jsxs("h3",{className:"text-lg font-bold text-gold-800 dark:text-gold-300 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-gold-600 dark:text-gold-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Hasil Analisis Skrining Anda"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider bg-gold-100/80 dark:bg-gold-900/40 text-gold-800 dark:text-gold-300 border border-gold-200 dark:border-gold-800/50",children:["Tingkat Keparahan: ",l.severity_label]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed italic border-l-4 border-gold-400 dark:border-gold-600 pl-4 py-1",children:['"',l.ai_summary,'"']})]})]})}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl shadow-sm sm:rounded-2xl overflow-hidden border border-gray-100 dark:border-gray-700/50",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Pilih Program Terapi"}),s.is_vip_only?e.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"⚠️ Berdasarkan hasil skrining, kondisi Anda memerlukan penanganan intensif dan prioritas penjadwalan. Anda hanya dapat memilih Paket VIP."}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Silakan pilih paket terapi yang sesuai dengan kebutuhan Anda. Kami merekomendasikan Paket Reguler berdasarkan hasil skrining Anda."})]}),e.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-900/30 leading-relaxed",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Object.values(s.packages).map(a=>{const o=s.recommended===a.id,u=s.is_vip_only&&a.id!=="vip",d=b.package_type===a.id;return e.jsxs("div",{className:`relative rounded-2xl border-2 p-6 transition-all duration-300 cursor-pointer flex flex-col ${d?"border-gold-500 bg-gold-50/50 dark:bg-gold-900/30 shadow-lg transform -translate-y-1":u?"border-gray-200 dark:border-gray-700/50 bg-gray-100/50 dark:bg-gray-800/30 opacity-60 cursor-not-allowed":"border-gray-200 dark:border-gray-700/50 bg-white/40 dark:bg-gray-800/40 hover:border-gold-300 dark:hover:border-gold-600 hover:shadow-md hover:-translate-y-0.5"}`,onClick:()=>!u&&g("package_type",a.id),children:[s.is_vip_only&&a.id==="vip"&&e.jsx("div",{className:"absolute -top-3 right-4 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm animate-pulse",children:"Wajib Dipilih"}),!s.is_vip_only&&o&&e.jsx("div",{className:"absolute -top-3 right-4 bg-gradient-to-r from-gold-500 to-yellow-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm",children:"Rekomendasi Utama"}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h4",{className:`font-bold text-lg leading-tight ${d?"text-gray-900 dark:text-white":"text-gray-800 dark:text-gray-200"}`,children:a.name}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center shrink-0 transition-colors ${d?"border-gold-500 bg-white dark:bg-gray-800":"border-gray-300 dark:border-gray-600"}`,children:d&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-gold-500"})})]}),e.jsxs("div",{className:"mb-5",children:[a.original_price&&e.jsxs("div",{className:"text-sm text-gray-400 line-through decoration-red-500/50 decoration-2 mb-1",children:["Rp ",new Intl.NumberFormat("id-ID").format(a.original_price)]}),e.jsxs("p",{className:"text-2xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-gold-600 to-yellow-600 select-none",children:["Rp ",new Intl.NumberFormat("id-ID").format(a.price)]})]}),e.jsx("p",{className:`text-sm flex-grow font-medium ${d?"text-gray-700 dark:text-gray-300":"text-gray-600 dark:text-gray-400"}`,children:a.description})]},a.id)})}),r.package_type&&e.jsx("p",{className:"text-sm font-medium text-red-600 mt-4 px-2",children:r.package_type})]})]}),x.error&&e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50",children:x.error}),e.jsx("form",{onSubmit:n,children:e.jsxs("div",{className:"p-6 bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl shadow-sm sm:rounded-2xl border border-gray-100 dark:border-gray-700/50",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6",children:"Pilih Waktu Konsultasi"}),e.jsx(A,{schedules:c,selectedScheduleId:b.schedule_id,onSelect:a=>g("schedule_id",a)}),r.schedule_id&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:r.schedule_id}),e.jsx("div",{className:"mt-8 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-r-lg",children:e.jsxs("p",{className:"text-sm text-red-800 dark:text-red-400 font-medium",children:[e.jsx("span",{className:"font-bold uppercase",children:"Perhatian:"})," Maksimal keterlambatan adalah 1 jam. Bila terjadi, maka klien/pasien dianggap tidak hadir. Hipnoterapis dianggap sudah menjalankan tugas, sesi terapi selesai, dan uang klien/pasien hangus."]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(U,{type:"submit",disabled:!b.schedule_id||i,children:"Konfirmasi Booking & Lanjut Pembayaran"})})]})})]})})]})}export{Y as default};
