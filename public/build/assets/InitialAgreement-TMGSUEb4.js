import{u as $,r as g,j as e,H as z}from"./app-CXkUezj2.js";import{A as B}from"./AuthenticatedLayout-Cfl7mhxF.js";import{P as R}from"./PrimaryButton-Bn4bR2l7.js";import{T as N}from"./TextInput-Dc8X1yFX.js";import{I as L}from"./InputError-BQzKf5hT.js";import"./transition-BqIySBFP.js";import"./ThemeToggle-CFpc5G7w.js";function F({userAge:b}){const r=b!==null&&b<17,{data:i,setData:s,post:v,processing:C,transform:S,errors:T}=$({cond_data_benar:!1,cond_bukan_pengganti_medis:!1,cond_sadar_penuh:!1,cond_riwayat_penyakit:!1,status_medis:"",izin_wali:!r,nama_wali:"",telepon_wali:"",risk_hubungi_medis:!1,risk_henti_sesi:!1,doc_direkam:!1,doc_hukum:!1,konfirmasi_akhir:!1,signature:""}),u=g.useRef(null),[D,p]=g.useState(!1),[c,f]=g.useState(!1),y=a=>{const n=u.current;if(!n)return;const d=n.getContext("2d"),o=n.getBoundingClientRect(),t=a.touches?a.touches[0].clientX:a.clientX,m=a.touches?a.touches[0].clientY:a.clientY;d.beginPath(),d.moveTo(t-o.left,m-o.top),p(!0),f(!0)},j=a=>{if(!D)return;a.preventDefault();const n=u.current,d=n.getContext("2d"),o=n.getBoundingClientRect(),t=a.touches?a.touches[0].clientX:a.clientX,m=a.touches?a.touches[0].clientY:a.clientY;d.lineTo(t-o.left,m-o.top),d.strokeStyle="#000",d.lineWidth=2,d.stroke()},h=()=>{p(!1);const a=u.current;a&&c&&s("signature",a.toDataURL("image/png"))},P=()=>{const a=u.current;if(!a)return;const n=a.getContext("2d");n.clearRect(0,0,a.width,a.height),n.fillStyle="white",n.fillRect(0,0,a.width,a.height),f(!1),s("signature","")},[x,Y]=g.useState(!1),[k,_]=g.useState([]);g.useEffect(()=>{const a=i.status_medis!=="";let n=!0;r&&(n=i.izin_wali&&i.nama_wali.trim()!==""&&i.telepon_wali.trim()!=="");const o=[i.cond_data_benar,i.cond_bukan_pengganti_medis,i.cond_sadar_penuh,i.cond_riwayat_penyakit,i.risk_hubungi_medis,i.risk_henti_sesi,i.doc_direkam,i.doc_hukum,i.konfirmasi_akhir].every(Boolean),t=[];i.cond_data_benar||t.push("1. Pernyataan kebenaran data"),i.cond_bukan_pengganti_medis||t.push("1. Kondisi hipnoterapi bukan pengganti medis"),i.cond_sadar_penuh||t.push("1. Kondisi sadar penuh"),i.cond_riwayat_penyakit||t.push("1. Pertimbangan kondisi riwayat penyakit (Tetap wajib dicentang sebagai bentuk kesadaran risiko meskipun tidak memiliki)"),a||t.push("2. Status Perawatan Medis (Ya/Tidak)"),r&&(i.izin_wali||t.push("3. Centang izin wali"),i.nama_wali.trim()===""&&t.push("3. Kolom Nama Wali"),i.telepon_wali.trim()===""&&t.push("3. Kolom Nomor Telepon Wali"));const m=r?"4":"3";i.risk_hubungi_medis||t.push(`${m}. Pernyataan risiko medis darurat`),i.risk_henti_sesi||t.push(`${m}. Pernyataan penghentian sesi darurat`);const w=r?"5":"4";i.doc_direkam||t.push(`${w}. Persetujuan sistem rekaman sesi`),i.doc_hukum||t.push(`${w}. Persetujuan rekaman untuk hukum`);const I=r?"6":"5";i.konfirmasi_akhir||t.push(`${I}. Konfirmasi Akhir`);const M=r?"7":"6";c||t.push(`${M}. Tanda Tangan Digital`),Y(o&&a&&n&&c),_(t)},[i,r,c]);const A=a=>{a.preventDefault(),!(!x||!c)&&(S(n=>({agreement_data:n,signature:n.signature})),v(route("agreement.store"),{onError:n=>{console.error("Backend validation failed:",n),n&&n.agreement_data&&_([n.agreement_data])}}))},l=({id:a,label:n,checked:d,onChange:o})=>e.jsxs("label",{className:`flex items-start gap-3 p-4 rounded-xl border cursor-pointer transition-all ${d?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-900 dark:text-indigo-100":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-indigo-300"}`,children:[e.jsx("input",{type:"checkbox",id:a,checked:d,onChange:t=>o(t.target.checked),className:"mt-1 accent-indigo-600 rounded text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm leading-relaxed",children:n})]});return e.jsxs(B,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Persetujuan Awal Layanan InDepth"}),children:[e.jsx(z,{title:"Persetujuan Awal"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800/60 backdrop-blur-xl border border-gray-100 dark:border-gray-700/50 rounded-2xl shadow-lg p-6 sm:p-10",children:[e.jsxs("div",{className:"mb-8 border-b pb-6 dark:border-gray-700 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Form Pernyataan Awal"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Harap baca dengan teliti dan centang seluruh pernyataan di bawah ini untuk melanjutkan ke proses booking."})]}),e.jsxs("form",{onSubmit:A,className:"space-y-10",children:[e.jsxs("section",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:"1"}),"Pernyataan Kondisi Pribadi"]}),e.jsxs("div",{className:"space-y-3 pl-8",children:[e.jsx(l,{label:"Saya menyatakan bahwa data yang saya isi pada tahap screening adalah benar dan sesuai kondisi saya saat ini.",checked:i.cond_data_benar,onChange:a=>s("cond_data_benar",a)}),e.jsx(l,{label:"Saya memahami bahwa layanan hipnoterapi bukan pengganti pengobatan medis darurat.",checked:i.cond_bukan_pengganti_medis,onChange:a=>s("cond_bukan_pengganti_medis",a)}),e.jsx(l,{label:"Saya dalam kondisi sadar penuh dan tidak berada di bawah pengaruh alkohol atau zat terlarang saat melakukan pendaftaran.",checked:i.cond_sadar_penuh,onChange:a=>s("cond_sadar_penuh",a)}),e.jsx(l,{label:"Jika saya memiliki riwayat penyakit jantung, gangguan saraf berat, epilepsi, atau kondisi medis serius lainnya, saya telah mempertimbangkan kondisi tersebut sebelum melanjutkan.",checked:i.cond_riwayat_penyakit,onChange:a=>s("cond_riwayat_penyakit",a)})]})]}),e.jsxs("section",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:"2"}),"Status Perawatan Medis"]}),e.jsxs("div",{className:"pl-8 space-y-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Apakah Anda saat ini masih menjalani perawatan medis atau psikologis?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-xl border cursor-pointer transition-all ${i.status_medis==="Tidak"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-gray-700 hover:border-indigo-300"}`,children:[e.jsx("input",{type:"radio",name:"status_medis",className:"text-indigo-600 accent-indigo-600",value:"Tidak",checked:i.status_medis==="Tidak",onChange:()=>s("status_medis","Tidak")}),e.jsx("span",{className:"text-sm",children:"Tidak"})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-xl border cursor-pointer transition-all ${i.status_medis==="Ya"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-gray-700 hover:border-indigo-300"}`,children:[e.jsx("input",{type:"radio",name:"status_medis",className:"text-indigo-600 accent-indigo-600",value:"Ya",checked:i.status_medis==="Ya",onChange:()=>s("status_medis","Ya")}),e.jsx("span",{className:"text-sm",children:"Ya, dan saya memahami bahwa layanan InDepth bersifat terapi komplementer."})]})]}),i.status_medis==="Ya"&&e.jsx("div",{className:"mt-4 p-4 border-l-4 border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400 text-sm font-medium rounded-r-xl",children:'"Saya memahami bahwa hipnoterapi di InDepth bukan pengganti pengobatan medis yang sedang saya jalani."'})]})]}),r&&e.jsxs("section",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:"3"}),"Pernyataan Usia (Di bawah 17 Tahun)"]}),e.jsxs("div",{className:"space-y-4 pl-8",children:[e.jsx(l,{label:"Saya menyatakan telah mendapatkan izin dari orang tua atau wali sah.",checked:i.izin_wali,onChange:a=>s("izin_wali",a)}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nama Wali *"}),e.jsx(N,{className:"w-full",value:i.nama_wali,onChange:a=>s("nama_wali",a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nomor Telepon Wali *"}),e.jsx(N,{className:"w-full",type:"tel",value:i.telepon_wali,onChange:a=>s("telepon_wali",a.target.value),required:!0})]})]})]})]}),!r&&e.jsx("section",{className:"hidden",children:e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:"3"}),"Pernyataan Usia"]})}),e.jsxs("section",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:r?"4":"3"}),"Pernyataan Risiko & Darurat"]}),e.jsxs("div",{className:"space-y-3 pl-8",children:[e.jsx(l,{label:"Saya memahami bahwa jika terjadi kondisi darurat medis selama sesi berlangsung, tim InDepth akan menghubungi layanan medis terdekat.",checked:i.risk_hubungi_medis,onChange:a=>s("risk_hubungi_medis",a)}),e.jsx(l,{label:"Saya memahami bahwa sesi dapat dihentikan sewaktu-waktu jika kondisi medis darurat terjadi.",checked:i.risk_henti_sesi,onChange:a=>s("risk_henti_sesi",a)})]})]}),e.jsxs("section",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:r?"5":"4"}),"Persetujuan Sistem Dokumentasi"]}),e.jsxs("div",{className:"space-y-3 pl-8",children:[e.jsx(l,{label:"Saya memahami bahwa sesi akan direkam untuk tujuan dokumentasi dan perlindungan hukum, serta ditampilkan visualnya di ruang tunggu tanpa audio.",checked:i.doc_direkam,onChange:a=>s("doc_direkam",a)}),e.jsx(l,{label:"Saya memahami bahwa rekaman hanya dibuka jika diperlukan secara hukum.",checked:i.doc_hukum,onChange:a=>s("doc_hukum",a)})]})]}),e.jsxs("section",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:r?"6":"5"}),"Konfirmasi Akhir"]}),e.jsx("div",{className:"space-y-3 pl-8",children:e.jsx(l,{label:"Saya telah membaca dan memahami seluruh pernyataan di atas dan setuju untuk melanjutkan ke proses booking.",checked:i.konfirmasi_akhir,onChange:a=>s("konfirmasi_akhir",a)})})]}),e.jsxs("section",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-indigo-800 dark:text-indigo-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-sm",children:r?"7":"6"}),"Tanda Tangan Digital"]}),e.jsxs("div",{className:"pl-8",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Silakan bubuhkan tanda tangan Anda di area bawah ini sebagai bentuk verifikasi digital (Sesuai UU ITE)."}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-1 bg-gray-50 dark:bg-gray-900 shadow-inner relative group mx-auto md:mx-0",style:{maxWidth:400,height:180},children:[e.jsx("canvas",{ref:u,width:390,height:170,onMouseDown:y,onMouseMove:j,onMouseUp:h,onMouseOut:h,onTouchStart:y,onTouchMove:j,onTouchEnd:h,className:"cursor-crosshair w-full h-full touch-none dark:invert"}),!c&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 dark:text-gray-500 pointer-events-none text-xs font-medium uppercase tracking-widest",children:"Tanda tangan di sini"})]}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"button",onClick:P,className:"text-xs text-red-600 font-bold hover:text-red-800 underline transition-colors",children:"Hapus & Ulangi Tanda Tangan"})}),e.jsx(L,{message:T.signature,className:"mt-2"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-100 dark:border-gray-700 mt-10",children:[!x&&k.length>0&&e.jsxs("div",{className:"mb-6 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 p-5 rounded-xl border border-red-100 shadow-sm",children:[e.jsxs("p",{className:"font-bold mb-2 text-base text-red-700 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Tidak dapat melanjutkan, masih ada ",k.length," bagian yang belum terisi/tercentang:"]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 ml-2 font-medium",children:k.map((a,n)=>e.jsx("li",{children:a},n))})]}),e.jsx(R,{type:"submit",className:`w-full h-14 text-lg justify-center shadow-lg transition-all ${x?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-400 opacity-70 cursor-pointer"}`,disabled:C,children:"Lanjutkan ke Booking"})]})]})]})})})]})}export{F as default};
