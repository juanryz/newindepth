import{e as c,u as p,j as e,H as v,d as N}from"./app-DXbdJGrK.js";import{A as w}from"./AuthenticatedLayout-29-Xfklt.js";import"./transition-BBdfaFBm.js";import"./ThemeToggle-BUNsUCdQ.js";import"./LiquidBackground-BoEjjlNn.js";function h(t){return"Rp "+new Intl.NumberFormat("id-ID").format(t)}function _({voucher:t,onEdit:o,onDelete:d}){const i=t.valid_until&&new Date(t.valid_until)<new Date;return e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/40 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-mono font-bold text-sm text-indigo-700 dark:text-indigo-400",children:t.code}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300",children:t.description||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-green-700 dark:text-green-400",children:h(t.discount_amount)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:[t.user_vouchers_count," ",t.max_claims?`/ ${t.max_claims}`:"∞"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:t.valid_until?new Date(t.valid_until).toLocaleDateString("id-ID"):"—"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold ${!t.is_active||i?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:t.is_active?i?"Kadaluarsa":"Aktif":"Nonaktif"})}),e.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[e.jsx("button",{onClick:()=>o(t),className:"text-xs text-indigo-600 dark:text-indigo-400 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>d(t.id),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Hapus"})]})]})}function D({pkg:t,onEdit:o}){const d=t.discount_percentage>0,i=!t.discount_ends_at||new Date(t.discount_ends_at)>new Date;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-5 flex-1 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:t.description})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] uppercase font-bold ${t.is_active?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-gray-100 text-gray-500 dark:bg-gray-700 dark:text-gray-400"}`,children:t.is_active?"Aktif":"Draft"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:h(t.current_price)}),d&&i&&e.jsx("span",{className:"text-sm text-gray-400 line-through",children:h(t.base_price)})]}),d&&i&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:"px-1.5 py-0.5 bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400 text-[10px] font-bold rounded",children:["DISKON ",t.discount_percentage,"%"]}),t.discount_ends_at&&e.jsxs("span",{className:"text-[10px] text-gray-500 italic",children:["s/d ",new Date(t.discount_ends_at).toLocaleDateString("id-ID")]})]})]}),e.jsxs("div",{className:"space-y-1 mt-4",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Fitur Utama"}),e.jsx("ul",{className:"space-y-1",children:Array.isArray(t.features)&&t.features.slice(0,3).map((x,n)=>e.jsxs("li",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M5 13l4 4L19 7"})}),x]},n))})]})]}),e.jsx("button",{onClick:()=>o(t),className:"w-full py-3 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700 text-xs font-semibold text-indigo-600 dark:text-indigo-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors uppercase tracking-wider",children:"Edit Paket & Diskon"})]})}function E({vouchers:t=[],packages:o=[]}){const[d,i]=c.useState(window.location.pathname.endsWith("/vouchers")?"vouchers":"packages"),[x,n]=c.useState(!1),[l,g]=c.useState(null),[m,u]=c.useState(null),r=p({code:"",description:"",discount_amount:"",max_claims:"",valid_from:new Date().toISOString().split("T")[0],valid_until:"",is_active:!0}),s=p({name:"",description:"",base_price:"",discount_percentage:0,discount_ends_at:"",is_active:!0,features:[]}),b=a=>{g(a),r.setData({code:a.code,description:a.description||"",discount_amount:a.discount_amount,max_claims:a.max_claims||"",valid_from:a.valid_from?a.valid_from.split("T")[0]:"",valid_until:a.valid_until?a.valid_until.split("T")[0]:"",is_active:!!a.is_active}),n(!0)},y=a=>{u(a),s.setData({name:a.name,description:a.description||"",base_price:a.base_price,discount_percentage:a.discount_percentage,discount_ends_at:a.discount_ends_at?a.discount_ends_at.split("T")[0]:"",is_active:!!a.is_active,features:a.features||[]})},k=a=>{a.preventDefault(),l?r.patch(route("admin.pricing.vouchers.update",l.id),{onSuccess:()=>{n(!1),g(null),r.reset()}}):r.post(route("admin.pricing.vouchers.store"),{onSuccess:()=>{n(!1),r.reset()}})},j=a=>{a.preventDefault(),s.patch(route("admin.pricing.packages.update",m.id),{onSuccess:()=>{u(null)}})};return e.jsxs(w,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Manajemen Harga"}),children:[e.jsx(v,{title:"Kelola Harga & Voucher"}),e.jsx("div",{className:"py-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>i("packages"),className:`px-6 py-3 text-sm font-bold transition-all border-b-2 ${d==="packages"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Paket Layanan"}),e.jsx("button",{onClick:()=>i("vouchers"),className:`px-6 py-3 text-sm font-bold transition-all border-b-2 ${d==="vouchers"?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Voucher Promo"})]}),d==="packages"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(a=>e.jsx(D,{pkg:a,onEdit:y},a.id))}),m&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-indigo-200 dark:border-indigo-900 shadow-xl overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"bg-indigo-600 px-6 py-4 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-white font-bold",children:["Edit Paket: ",m.name]}),e.jsx("button",{onClick:()=>u(null),className:"text-white hover:bg-white/10 rounded-full p-1",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:j,className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Nama Paket"}),e.jsx("input",{type:"text",value:s.data.name,onChange:a=>s.setData("name",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Deskripsi Pendek"}),e.jsx("textarea",{rows:"2",value:s.data.description,onChange:a=>s.setData("description",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Harga Dasar (Rp)"}),e.jsx("input",{type:"number",value:s.data.base_price,onChange:a=>s.setData("base_price",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl"})]}),e.jsx("div",{className:"flex items-end pb-3",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.data.is_active,onChange:a=>s.setData("is_active",a.target.checked),className:"w-5 h-5 rounded text-indigo-600"}),e.jsx("span",{className:"text-sm font-semibold dark:text-gray-300",children:"Tampilkan di public"})]})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4 rounded-2xl space-y-4 border border-gray-100 dark:border-gray-700",children:[e.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Pengaturan Diskon"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Persen Diskon (0-100)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",max:"100",value:s.data.discount_percentage,onChange:a=>s.setData("discount_percentage",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl pr-10"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Berlaku Sampai"}),e.jsx("input",{type:"date",value:s.data.discount_ends_at,onChange:a=>s.setData("discount_ends_at",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl text-sm"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:"Kosongkan jika tidak ada batas waktu diskon."})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:s.processing,className:"w-full py-2.5 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-500/30 transition-all disabled:opacity-50",children:s.processing?"Menyimpan...":"Update Tarif"})})]})]})]})]}),d==="vouchers"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Total: ",e.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:t.length})," voucher terdaftar."]}),e.jsxs("button",{onClick:()=>{n(!0),g(null),r.reset()},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Tambah Voucher"]})]}),x&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm p-6 overflow-hidden animate-in fade-in slide-in-from-top-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:l?`Edit Voucher: ${l.code}`:"Buat Voucher Baru"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[!l&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Kode Voucher *"}),e.jsx("input",{type:"text",value:r.data.code,onChange:a=>r.setData("code",a.target.value.toUpperCase()),className:"w-full border-gray-300 dark:border-gray-600 rounded-xl px-4 py-2 dark:bg-gray-700 dark:text-white uppercase font-mono font-bold",placeholder:"PROMO2024"}),r.errors.code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.errors.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Potongan Harga (Rp) *"}),e.jsx("input",{type:"number",value:r.data.discount_amount,onChange:a=>r.setData("discount_amount",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 rounded-xl px-4 py-2 dark:bg-gray-700 dark:text-white font-bold text-green-600",placeholder:"50000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Keterangan"}),e.jsx("input",{type:"text",value:r.data.description,onChange:a=>r.setData("description",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 rounded-xl px-4 py-2 dark:bg-gray-700 dark:text-white",placeholder:"Khusus pengguna baru..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Kapasitas (kosong = ∞)"}),e.jsx("input",{type:"number",value:r.data.max_claims,onChange:a=>r.setData("max_claims",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 rounded-xl px-4 py-2 dark:bg-gray-700 dark:text-white",placeholder:"100"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Mulai"}),e.jsx("input",{type:"date",value:r.data.valid_from,onChange:a=>r.setData("valid_from",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 rounded-xl text-xs dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-1",children:"Berakhir"}),e.jsx("input",{type:"date",value:r.data.valid_until,onChange:a=>r.setData("valid_until",a.target.value),className:"w-full border-gray-300 dark:border-gray-600 rounded-xl text-xs dark:bg-gray-700 dark:text-white"})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-6",children:[e.jsx("input",{type:"checkbox",checked:r.data.is_active,onChange:a=>r.setData("is_active",a.target.checked),className:"w-5 h-5 rounded text-indigo-600"}),e.jsx("span",{className:"text-sm font-bold dark:text-gray-300",children:"Voucher Aktif"})]})}),e.jsxs("div",{className:"sm:col-span-2 lg:col-span-3 flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-6 py-2 border-gray-300 text-gray-500 font-bold hover:text-gray-700",children:"Batal"}),e.jsx("button",{type:"submit",disabled:r.processing,className:"px-8 py-2 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-700 disabled:opacity-50",children:r.processing?"Menyimpan...":l?"Update Voucher":"Simpan Voucher"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Kode"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Deskripsi"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Potongan"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Penggunaan"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Berlaku s/d"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-gray-400 dark:text-gray-500 italic",children:"Belum ada voucher yang tersedia."})}):t.map(a=>e.jsx(_,{voucher:a,onEdit:b,onDelete:f=>{confirm("Hapus voucher?")&&N.delete(route("admin.pricing.vouchers.destroy",f))}},a.id))})]})})})]})]})})]})}export{E as default};
