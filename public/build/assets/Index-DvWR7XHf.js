import{r as m,u as b,j as e,H as k,b as j}from"./app-Una0EcoJ.js";import{A as f}from"./AuthenticatedLayout-BZJ_Aq2B.js";import"./transition-D45mW8OV.js";import"./ThemeToggle-D6Bw16ei.js";function N(a){return"Rp "+new Intl.NumberFormat("id-ID").format(a)}function v({voucher:a,onEdit:o,onDelete:d}){const r=a.valid_until&&new Date(a.valid_until)<new Date;return e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/40 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-mono font-bold text-sm text-indigo-700 dark:text-indigo-400",children:a.code}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-300",children:a.description||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-green-700 dark:text-green-400",children:N(a.discount_amount)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:[a.user_vouchers_count," ",a.max_claims?`/ ${a.max_claims}`:"∞"]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400",children:a.valid_until?new Date(a.valid_until).toLocaleDateString("id-ID"):"—"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold ${!a.is_active||r?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"}`,children:a.is_active?r?"Kadaluarsa":"Aktif":"Nonaktif"})}),e.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[e.jsx("button",{onClick:()=>o(a),className:"text-xs text-indigo-600 dark:text-indigo-400 hover:underline",children:"Edit"}),e.jsx("button",{onClick:()=>d(a.id),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Hapus"})]})]})}function C({vouchers:a}){const[o,d]=m.useState(!1),[r,x]=m.useState(null),{data:i,setData:s,post:g,patch:u,processing:c,errors:l,reset:n}=b({code:"",description:"",discount_amount:"",max_claims:"",valid_from:new Date().toISOString().split("T")[0],valid_until:"",is_active:!0}),p=t=>{x(t),s({code:t.code,description:t.description||"",discount_amount:t.discount_amount,max_claims:t.max_claims||"",valid_from:t.valid_from?t.valid_from.split("T")[0]:"",valid_until:t.valid_until?t.valid_until.split("T")[0]:"",is_active:t.is_active}),d(!0)},h=t=>{confirm("Hapus voucher ini? Klaim yang sudah ada tidak terpengaruh.")&&j.delete(route("admin.pricing.vouchers.destroy",t))},y=t=>{t.preventDefault(),r?u(route("admin.pricing.vouchers.update",r.id),{onSuccess:()=>{d(!1),x(null),n()}}):g(route("admin.pricing.vouchers.store"),{onSuccess:()=>{d(!1),n()}})};return e.jsxs(f,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-white leading-tight",children:"Manajemen Harga — Kelola Voucher"}),children:[e.jsx(k,{title:"Kelola Voucher"}),e.jsx("div",{className:"py-10",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Kelola kode voucher promosi. Voucher VIP diterbitkan otomatis oleh sistem."}),e.jsxs("button",{onClick:()=>{d(!0),x(null),n()},className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Buat Voucher"]})]}),o&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm p-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-4",children:r?`Edit Voucher: ${r.code}`:"Buat Voucher Baru"}),e.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[!r&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Kode Voucher *"}),e.jsx("input",{type:"text",value:i.code,onChange:t=>s("code",t.target.value.toUpperCase()),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm dark:bg-gray-700 dark:text-white uppercase font-mono",placeholder:"PROMO50"}),l.code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nilai Diskon (IDR) *"}),e.jsx("input",{type:"number",value:i.discount_amount,onChange:t=>s("discount_amount",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm dark:bg-gray-700 dark:text-white",placeholder:"500000"}),l.discount_amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.discount_amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Deskripsi"}),e.jsx("input",{type:"text",value:i.description,onChange:t=>s("description",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm dark:bg-gray-700 dark:text-white",placeholder:"Diskon spesial..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maks. Klaim (kosong = bebas)"}),e.jsx("input",{type:"number",value:i.max_claims,onChange:t=>s("max_claims",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm dark:bg-gray-700 dark:text-white",placeholder:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Berlaku Mulai *"}),e.jsx("input",{type:"date",value:i.valid_from,onChange:t=>s("valid_from",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Berlaku Sampai (kosong = selamanya)"}),e.jsx("input",{type:"date",value:i.valid_until,onChange:t=>s("valid_until",t.target.value),className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm dark:bg-gray-700 dark:text-white"})]}),r&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:i.is_active,onChange:t=>s("is_active",t.target.checked),className:"w-4 h-4 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-gray-700 dark:text-gray-300",children:"Aktifkan voucher"})]}),e.jsxs("div",{className:"sm:col-span-2 flex gap-3 justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),n()},className:"px-4 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 text-sm rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 disabled:opacity-50 transition-colors",children:c?"Menyimpan...":r?"Update":"Simpan"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700/50 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Kode"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Deskripsi"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Nilai Diskon"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Diklaim"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Berlaku s/d"}),e.jsx("th",{className:"px-4 py-3 text-xs font-bold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-gray-400 dark:text-gray-500 italic",children:"Belum ada voucher. Buat voucher pertama Anda!"})}):a.map(t=>e.jsx(v,{voucher:t,onEdit:p,onDelete:h},t.id))})]})})})]})})]})}export{C as default};
