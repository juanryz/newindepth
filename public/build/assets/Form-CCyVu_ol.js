import{u as T,b as K,j as e,H as B,L as b}from"./app-9Y5AvjuY.js";import{A as $}from"./AuthenticatedLayout-C8T9AIDu.js";import{I as D}from"./InputError-DbJrkfjX.js";import{I as O}from"./InputLabel-BJT4tAP7.js";import{T as U}from"./TextInput-DnbCXll7.js";import{S as k}from"./shield-CBRZa8jx.js";import{S as H}from"./save-Cs0deONg.js";import{C as V}from"./chevron-left-BKHekStx.js";import{c as w}from"./createLucideIcon-DXGiVyic.js";import{B as z}from"./book-open-Q1___l1U.js";import{U as F}from"./users-DHHTB5W1.js";import{C as J}from"./credit-card-Dr2ZE64Q.js";import{C as W}from"./calendar-DTces6Q7.js";import"./transition-Bb6LFJxS.js";import"./ThemeToggle-CmbiU6SU.js";import"./LiquidBackground-v4ocQnB7.js";const G=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],q=w("chart-no-axes-column-increasing",G);const X=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Y=w("settings",X);function xe({roleModel:c,permissions:Z,rolePermissions:v}){const p=!!c.id,{data:r,setData:l,post:y,put:f,processing:j,errors:N}=T({name:c.name||"",permissions:v||[]}),C={bookings:"Akses mengelola pesanan (booking) layanan.",schedules:"Mengatur keseluruhan jadwal praktek terapis.",own_schedule:"Akses khusus terapis melihat jadwal prakteknya sendiri.",transactions:"Memvalidasi atau menolak pembayaran dari pesanan baru.",all_transactions:"Akses melihat seluruh history transaksi pengguna.",users:"Manajemen daftar pengguna dan pemberian hak akses.",blog_posts:"Mengelola informasi artikel blog publik.",courses:"Mengelola paket dan konten kursus edukasi.",reports:"Export dan view laporan statistik bulanan.",finance:"Melihat arus kas utama & dashboard finance.",petty_cash:"Mengelola pengajuan dan saldo kas kecil.",packages:"Mengelola daftar jenis paket dan layanan terapi.",vouchers:"Membuat dan mengelola kupon diskon atau promo."},_=K.useMemo(()=>{const a={"Booking & Konsultasi":{bookings:["view","create","edit","delete","cancel","assign"],schedules:["view","create","edit","delete","bulk_delete"],own_schedule:["view"]},"Transaksi & Pembayaran":{transactions:["view","create","edit","delete","validate","reject"],all_transactions:["view"],packages:["view","create","edit","delete"],vouchers:["view","create","edit","delete"]},"Manajemen Pengguna":{users:["view","create","edit","delete","view_agreement"],roles:["view","create","edit","delete"],permissions:["view","create","edit","delete"]},"Konten Akses Publik":{blog_posts:["view","create","edit","delete","publish","analyze"],courses:["view","create","edit","delete"],lessons:["view","create","edit","delete"]},"Laporan & Keuangan":{reports:["view","export"],finance:["view"],expenses:["view","create","edit","delete"],petty_cash:["view","create","edit","delete","approve","reject"]}},t={};for(const[d,s]of Object.entries(a)){t[d]={};for(const[n,m]of Object.entries(s))t[d][n]=m.map(g=>({id:`${g}_${n}`,name:`${g} ${n}`,action:g,resource:n}))}return t},[]),x=a=>{const{value:t,checked:d}=a.target;d?l("permissions",[...r.permissions,t]):l("permissions",r.permissions.filter(s=>s!==t))},S=a=>{const t=a.map(s=>s.name);if(t.every(s=>r.permissions.includes(s)))l("permissions",r.permissions.filter(s=>!t.includes(s)));else{const s=[...new Set([...r.permissions,...t])];l("permissions",s)}},A=a=>{const t=Object.values(a).flat().map(s=>s.name);if(t.every(s=>r.permissions.includes(s)))l("permissions",r.permissions.filter(s=>!t.includes(s)));else{const s=[...new Set([...r.permissions,...t])];l("permissions",s)}},L=a=>{a.preventDefault(),p?f(route("admin.roles.update",c.id)):y(route("admin.roles.store"))},E=a=>{switch(a){case"Booking & Konsultasi":return e.jsx(W,{className:"w-4 h-4"});case"Transaksi & Pembayaran":return e.jsx(J,{className:"w-4 h-4"});case"Manajemen Pengguna":return e.jsx(F,{className:"w-4 h-4"});case"Konten Akses Publik":return e.jsx(z,{className:"w-4 h-4"});case"Laporan & Keuangan":return e.jsx(q,{className:"w-4 h-4"});default:return e.jsx(Y,{className:"w-4 h-4"})}},P=a=>({bookings:"Data Booking Pasien",schedules:"Jadwal Reguler Terapis",own_schedule:"Jadwal Personal (Terapis)",transactions:"Validasi Transaksi Masuk",all_transactions:"Seluruh Riwayat Transaksi",users:"Manajemen Pengguna & Admin",blog_posts:"Artikel Blog Publik",courses:"Layanan Kursus Edukasi",reports:"Laporan Sistem Utama",finance:"Dashboard Keuangan (Finance)",petty_cash:"Kas Kecil Internal/Eksternal",packages:"Manajemen Layanan & Paket",vouchers:"Manajemen Kode Voucher"})[a]||a.replace(/_/g," ").toUpperCase(),h=a=>({view:"VIEW",create:"CREATE",edit:"EDIT",delete:"DELETE",cancel:"CANCEL",validate:"VALIDATE",reject:"REJECT",publish:"PUBLISH",approve:"APPROVE",export:"EXPORT",analyze:"ANALYZE",bulk_delete:"BULK DEL",assign:"ASSIGN",view_agreement:"AGREEMENT"})[a]||a.toUpperCase();return e.jsxs($,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{href:route("admin.users.index",{tab:"roles"}),className:"p-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 text-gray-400 hover:text-indigo-600 transition-colors shadow-sm",children:e.jsx(V,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white uppercase tracking-tight",children:p?"Konfigurasi Hak Akses":"Tambah Role Baru"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest mt-1",children:p?`Mengatur Izin Untuk Role: ${c.name}`:"Mendefinisikan Peran Baru Dalam Sistem"})]})]}),children:[e.jsx(B,{title:p?"Atur Hak Akses":"Tambah Role"}),e.jsx("div",{className:"py-12 bg-gray-50 dark:bg-gray-950 min-h-[calc(100vh-64px)]",children:e.jsx("div",{className:"max-w-6xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:L,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] p-8 shadow-xl border border-white dark:border-gray-800 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(k,{className:"w-32 h-32"})}),e.jsxs("div",{className:"max-w-xl",children:[e.jsx(O,{htmlFor:"name",className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 mb-3 ml-1",children:"Nama Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{id:"name",type:"text",value:r.name,className:"w-full bg-gray-50 dark:bg-gray-950 border-transparent focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 rounded-2xl pl-6 pr-6 py-4 text-sm font-bold text-gray-900 dark:text-white transition-all",onChange:a=>l("name",a.target.value.toLowerCase().replace(/\s+/g,"_")),placeholder:"Contoh: manager_klinik, asisten_admin",required:!0,disabled:c.name==="super_admin"}),c.name==="super_admin"&&e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 px-3 py-1 bg-rose-50 text-rose-600 rounded-lg text-[9px] font-black uppercase tracking-widest border border-rose-100",children:[e.jsx(k,{className:"w-3 h-3"}),"System Role"]})]}),e.jsx(D,{message:N.name,className:"mt-2 ml-1"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4 px-2",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-600 rounded-full"}),e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:"Daftar Izin Akses"})]}),Object.entries(_).map(([a,t])=>{const s=Object.values(t).flat().map(n=>n.name).every(n=>r.permissions.includes(n));return e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] shadow-xl border border-white dark:border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-5 bg-gray-50/50 dark:bg-gray-800/30 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 rounded-2xl bg-white dark:bg-gray-900 shadow-sm text-indigo-600 dark:text-indigo-400 border border-gray-100 dark:border-gray-800",children:E(a)}),e.jsx("span",{className:"text-sm font-black uppercase tracking-[0.1em] text-gray-900 dark:text-white",children:a})]}),e.jsx("button",{type:"button",onClick:()=>A(t),className:`text-[10px] font-black uppercase tracking-widest px-5 py-2 rounded-xl transition-all border ${s?"bg-rose-50 border-rose-100 text-rose-600":"bg-indigo-50 border-indigo-100 text-indigo-600 hover:bg-indigo-600 hover:text-white hover:border-indigo-600"}`,children:s?"Lepas Semua Kategori":"Pilih Semua Kategori"})]}),e.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-800/50",children:Object.entries(t).map(([n,m])=>{const g=m.map(i=>i.name).every(i=>r.permissions.includes(i)),u=["view","create","edit","delete"],M=m.filter(i=>u.includes(i.action)),I=m.filter(i=>!u.includes(i.action));return e.jsx("div",{className:"p-8 hover:bg-gray-50/30 dark:hover:bg-gray-800/10 transition-colors",children:e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-start gap-8",children:[e.jsxs("div",{className:"xl:w-1/4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-1.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[12px] font-black tracking-widest text-gray-900 dark:text-white block mb-0.5",children:P(n)}),e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium leading-relaxed",children:C[n]||"Hak akses untuk mengelola modul ini."})]})]}),e.jsx("button",{type:"button",onClick:()=>S(m),className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 uppercase tracking-tighter transition-colors mt-2 ml-5",children:g?"Hapus Semua Centang":"Pilih Semua (Penuh)"})]}),e.jsx("div",{className:"xl:w-3/4",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3",children:[u.map(i=>{const o=M.find(R=>R.action===i);return o?e.jsxs("label",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl border transition-all cursor-pointer group ${r.permissions.includes(o.name)?"bg-indigo-600 border-indigo-600 shadow-lg shadow-indigo-600/20":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-800 hover:border-indigo-200 dark:hover:border-indigo-800"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",value:o.name,checked:r.permissions.includes(o.name),onChange:x}),e.jsx("div",{className:`w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all ${r.permissions.includes(o.name)?"bg-white border-white":"border-gray-200 dark:border-gray-700 group-hover:border-indigo-400"}`,children:r.permissions.includes(o.name)&&e.jsx("svg",{className:"w-2.5 h-2.5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest transition-colors ${r.permissions.includes(o.name)?"text-white":"text-gray-500 dark:text-gray-400"}`,children:h(i)})]},o.id):e.jsx("div",{className:"hidden sm:block"},i)}),I.map(i=>e.jsxs("label",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl border transition-all cursor-pointer group ${r.permissions.includes(i.name)?"bg-emerald-600 border-emerald-600 shadow-lg shadow-emerald-600/20":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-800 hover:border-emerald-200 dark:hover:border-emerald-800"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",value:i.name,checked:r.permissions.includes(i.name),onChange:x}),e.jsx("div",{className:`w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all ${r.permissions.includes(i.name)?"bg-white border-white":"border-gray-200 dark:border-gray-700 group-hover:border-emerald-400"}`,children:r.permissions.includes(i.name)&&e.jsx("svg",{className:"w-2.5 h-2.5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest transition-colors ${r.permissions.includes(i.name)?"text-white":"text-emerald-500/80 dark:text-emerald-400/80"}`,children:h(i.action)})]},i.id))]})})]})},n)})})]},a)})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-900 p-8 rounded-[2.5rem] shadow-2xl border border-white dark:border-gray-800 sticky bottom-8 transition-all duration-500 backdrop-blur-md bg-white/90 dark:bg-gray-900/90",children:[e.jsx(b,{href:route("admin.users.index",{tab:"roles"}),className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-400 hover:text-rose-500 transition-colors px-6",children:"Batal & Kembali"}),e.jsxs("button",{type:"submit",disabled:j,className:"flex items-center gap-4 px-10 py-5 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.3em] hover:bg-indigo-700 hover:-translate-y-1 transition-all shadow-xl shadow-indigo-600/30 active:scale-95 disabled:opacity-50",children:[e.jsx(H,{className:"w-5 h-5"}),p?"Simpan Perubahan":"Buat Role Baru"]})]})]})})})]})}export{xe as default};
