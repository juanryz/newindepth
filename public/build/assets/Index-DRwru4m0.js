import{b as s,u as K,j as e,H as ne,L as le,f as _}from"./app-gTsR6xkZ.js";import{A as de}from"./AuthenticatedLayout-Dnq5BXUc.js";import{M as R}from"./Modal-BcNla-YR.js";import{T as l}from"./TextInput-BaHyBF-I.js";import{I as i}from"./InputLabel-Dup9WDtK.js";import{I as d}from"./InputError-BCa7YdFA.js";import{S as T}from"./SecondaryButton-vXZCGVBa.js";import{c as S}from"./createLucideIcon-DKBqWfB8.js";import{C as ce,W as oe}from"./wallet-K_3sp6n_.js";import{C as xe}from"./chevron-right-CJBTqDRT.js";import{A as pe}from"./index-OsejzJZm.js";import{m as N}from"./proxy-BuupubRN.js";import{R as B,L as ge,C as he,X as me,Y as ue,T as A,a as ye,P as be,b as ke,c as je,d as fe}from"./PieChart-DTt6kw3W.js";import{P as F}from"./plus-1LoBJGDK.js";import{T as M,S as ve}from"./trash-2-CPL3iguI.js";import{F as we}from"./file-text-CO3zdNlR.js";import{C as Ne}from"./calendar-D4t1Zt5O.js";import"./transition-DJVnopj8.js";import"./ThemeToggle-CgJbnCE1.js";import"./LiquidBackground-FcHA0Oej.js";import"./with-selector-EccEYVA9.js";const Se=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ce=S("download",Se);const De=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],_e=S("history",De);const Le=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Pe=S("layout-dashboard",Le);const Ie=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],E=S("receipt",Ie),O=["#6366f1","#10b981","#f59e0b","#ef4444","#a855f7","#06b6d4"];function ea({reports:r,expenses:h=[],pettyCash:c,filters:m,auth:$e}){const[n,W]=s.useState("reports"),[L,o]=s.useState(null),[H,u]=s.useState(!1),[z,y]=s.useState(!1),[b,q]=s.useState(""),[k,V]=s.useState(""),[j,J]=s.useState(""),[f,X]=s.useState(""),Y=[{id:"reports",label:"Ringkasan Laporan",icon:Pe},{id:"expenses",label:"Biaya Operasional",icon:ce},{id:"petty_cash",label:"Kas Kecil (Petty Cash)",icon:oe},{id:"activity",label:"Log Kegiatan",icon:_e}],{data:v,setData:x,post:G,processing:Z,reset:Q,errors:w}=K({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],receipt:null}),{data:p,setData:g,post:U,processing:ee,reset:ae,errors:C}=K({type:"spending",title:"",amount:"",description:""}),P=a=>{const{name:t,value:D}=a.target;_.get(route("admin.finance.index"),{...m,[t]:D},{preserveState:!0})},I=s.useMemo(()=>{const a=[];return(h||[]).forEach(t=>{a.push({id:`exp-${t.id}`,type:"expense",icon:"ðŸ’¸",color:"rose",actor:t.recorder?.name||"Staff",actorRole:"Operator",action:"mencatat pengeluaran",subject:t.description,detail:`Kategori: ${t.category||"-"} Â· Rp ${new Intl.NumberFormat("id-ID").format(t.amount||0)}`,date:t.created_at||t.expense_date})}),(c?.proposals||[]).forEach(t=>{a.push({id:`prop-create-${t.id}`,type:"proposal_created",icon:"ðŸ“",color:"indigo",actor:t.user?.name||"Staff",actorRole:"Staff",action:"mengajukan kas kecil",subject:t.title,detail:`${t.type==="funding"?"Permohonan Dana":"Belanja"} Â· Rp ${new Intl.NumberFormat("id-ID").format(t.amount||0)}`,date:t.created_at}),(t.status==="approved"||t.status==="completed")&&a.push({id:`prop-approve-${t.id}`,type:"proposal_approved",icon:"âœ…",color:"emerald",actor:t.approver?.name||"Admin",actorRole:"Admin",action:"menyetujui pengajuan kas",subject:t.title,detail:`Rp ${new Intl.NumberFormat("id-ID").format(t.amount||0)}`,date:t.approved_at||t.updated_at}),t.status==="rejected"&&a.push({id:`prop-reject-${t.id}`,type:"proposal_rejected",icon:"âŒ",color:"rose",actor:t.approver?.name||"Admin",actorRole:"Admin",action:"menolak pengajuan kas",subject:t.title,detail:`Alasan: ${t.rejection_reason||"-"}`,date:t.approved_at||t.updated_at})}),(c?.transactions||[]).forEach(t=>{!t.description?.includes("Replenishment")&&!t.description?.includes("Belanja:")&&a.push({id:`pct-${t.id}`,type:"petty_cash_tx",icon:t.type==="in"?"ðŸ“ˆ":"ðŸ“‰",color:t.type==="in"?"emerald":"amber",actor:t.recorder?.name||"Staff",actorRole:"Operator",action:t.type==="in"?"mengisi kas kecil":"mencatat pemakaian kas",subject:t.description,detail:`Rp ${new Intl.NumberFormat("id-ID").format(t.amount||0)} Â· Saldo: Rp ${new Intl.NumberFormat("id-ID").format(t.balance_after||0)}`,date:t.created_at||t.transaction_date})}),a.sort((t,D)=>new Date(D.date)-new Date(t.date))},[h,c]),$=s.useMemo(()=>I.filter(a=>{if(b&&a.type!==b)return!1;if(k){const t=k.toLowerCase();if(!a.actor?.toLowerCase().includes(t)&&!a.subject?.toLowerCase().includes(t)&&!a.detail?.toLowerCase().includes(t)&&!a.action?.toLowerCase().includes(t))return!1}return!(j&&new Date(a.date)<new Date(j)||f&&new Date(a.date)>new Date(f+"T23:59:59"))}),[I,b,k,j,f]),te=a=>{a.preventDefault(),G(route("admin.finance.expenses.store"),{onSuccess:()=>{Q(),u(!1)}})},se=a=>{a.preventDefault(),U(route("admin.petty-cash.proposals.store"),{onSuccess:()=>{ae(),y(!1)}})},re=a=>{confirm("Hapus data pengeluaran ini?")&&_.delete(route("admin.finance.expenses.destroy",a),{preserveScroll:!0})},ie=a=>{confirm("Hapus transaksi kas kecil ini?")&&_.delete(route("admin.finance.petty-cash.destroy",a),{preserveScroll:!0})};return e.jsxs(de,{header:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-2xl text-gray-800 dark:text-white leading-tight tracking-tight uppercase",children:"Manajemen Keuangan"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-[0.2em] mt-1",children:"Laporan, Pengeluaran & Kas Kecil"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("select",{name:"month",className:"h-10 px-4 bg-white/50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-800 rounded-xl text-xs font-black uppercase tracking-widest focus:ring-indigo-500/20 focus:border-indigo-500 dark:text-white transition-all cursor-pointer",value:m.month,onChange:P,children:Array.from({length:12},(a,t)=>t+1).map(a=>e.jsxs("option",{value:a.toString().padStart(2,"0"),children:["Bulan ",a]},a))}),e.jsx("select",{name:"year",className:"h-10 px-4 bg-white/50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-800 rounded-xl text-xs font-black uppercase tracking-widest focus:ring-indigo-500/20 focus:border-indigo-500 dark:text-white transition-all cursor-pointer",value:m.year,onChange:P,children:[2024,2025,2026,2027].map(a=>e.jsx("option",{value:a,children:a},a))}),e.jsxs("a",{href:route("admin.reports.export-csv",m),className:"inline-flex items-center h-10 px-5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl text-[10px] font-black uppercase tracking-[0.2em] transition-all shadow-lg shadow-indigo-600/20 active:scale-95",children:[e.jsx(Ce,{className:"w-3 h-3 mr-2"}),"Export CSV"]})]})]}),children:[e.jsx(ne,{title:"Keuangan"}),e.jsx("div",{className:"py-12 bg-gray-50 dark:bg-gray-950 min-h-[calc(100vh-64px)] transition-colors duration-500",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"w-full lg:w-80 flex-shrink-0 space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] p-4 shadow-xl border border-white dark:border-gray-800 transition-all duration-500 sticky top-24",children:[e.jsx("div",{className:"space-y-2",children:Y.map(a=>e.jsxs("button",{onClick:()=>W(a.id),className:`w-full flex items-center justify-between p-4 rounded-2xl transition-all duration-300 group ${n===a.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/30":"hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-500 dark:text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-xl transition-colors ${n===a.id?"bg-white/20":"bg-gray-100 dark:bg-gray-800 group-hover:bg-white dark:group-hover:bg-gray-700"}`,children:e.jsx(a.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm font-black uppercase tracking-widest",children:a.label})]}),e.jsx(xe,{className:`w-4 h-4 transition-transform duration-300 ${n===a.id?"translate-x-0 opacity-100":"-translate-x-2 opacity-0"}`})]},a.id))}),e.jsxs("div",{className:"mt-8 p-6 bg-gray-50 dark:bg-gray-800/50 rounded-[2rem] border border-gray-100 dark:border-gray-800",children:[e.jsx("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4",children:"Kas Kecil Tersedia"}),e.jsxs("p",{className:"text-2xl font-black text-gray-900 dark:text-white",children:["Rp ",(c?.currentBalance??0).toLocaleString("id-ID")]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[e.jsx("span",{className:"text-gray-400",children:"Total Pemasukan Bulan ini:"}),e.jsxs("span",{className:"text-indigo-600",children:["Rp ",(r?.stats?.revenue??0).toLocaleString("id-ID")]})]})]})]})}),e.jsx("div",{className:"flex-1 min-w-0 pb-12",children:e.jsxs(pe,{mode:"wait",children:[n==="reports"&&e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[{label:"Total Pemasukan",val:r?.stats?.revenue??0,color:"indigo"},{label:"Biaya Operasional",val:r?.stats?.expenses??0,color:"rose"},{label:"Komisi Afiliasi",val:r?.stats?.commissions??0,color:"amber"},{label:"Laba Bersih",val:r?.stats?.netIncome??0,color:"emerald",highlight:!0}].map((a,t)=>e.jsxs("div",{className:`p-8 rounded-[2.5rem] shadow-xl border transition-all duration-500 ${a.highlight?"bg-indigo-600 text-white border-transparent":"bg-white dark:bg-gray-900 border-white dark:border-gray-800"}`,children:[e.jsx("p",{className:`text-[10px] font-black uppercase tracking-[0.2em] mb-4 ${a.highlight?"text-white/70":"text-gray-400"}`,children:a.label}),e.jsxs("h4",{className:`text-2xl font-black ${a.highlight?"text-white":`text-${a.color}-600 dark:text-${a.color}-400`}`,children:["Rp ",a.val.toLocaleString("id-ID")]})]},t))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] p-8 shadow-xl border border-white dark:border-gray-800 transition-all duration-500",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white mb-8 tracking-tight uppercase",children:"Tren Pendapatan"}),e.jsx("div",{className:"h-[350px]",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(ge,{data:r.charts.revenueByMonth,children:[e.jsx(he,{strokeDasharray:"3 3",vertical:!1,stroke:"rgba(156, 163, 175, 0.1)"}),e.jsx(me,{dataKey:"month_year",tick:{fontSize:10,fontWeight:"bold"}}),e.jsx(ue,{tickFormatter:a=>`Rp${a/1e6}jt`,tick:{fontSize:10,fontWeight:"bold"}}),e.jsx(A,{contentStyle:{borderRadius:"1.5rem",border:"none",background:"#111827",color:"#fff"},formatter:a=>[`Rp ${a.toLocaleString("id-ID")}`,"Pemasukan"]}),e.jsx(ye,{type:"monotone",dataKey:"total",stroke:"#6366f1",strokeWidth:4,dot:{r:4},activeDot:{r:8}})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] p-8 shadow-xl border border-white dark:border-gray-800 transition-all duration-500",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white mb-8 tracking-tight uppercase",children:"Kategori Pengeluaran"}),e.jsx("div",{className:"h-[350px]",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(be,{children:[e.jsx(ke,{data:r.charts.expensesByCategory,cx:"50%",cy:"50%",innerRadius:80,outerRadius:110,paddingAngle:5,dataKey:"total",nameKey:"category",children:r.charts.expensesByCategory.map((a,t)=>e.jsx(je,{fill:O[t%O.length]},t))}),e.jsx(A,{formatter:a=>`Rp ${a.toLocaleString("id-ID")}`}),e.jsx(fe,{wrapperStyle:{fontSize:"10px",fontWeight:"bold"}})]})})})]})]})]},"reports"),n==="expenses"&&e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight uppercase",children:"Biaya Operasional"}),e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] transition-all shadow-xl shadow-indigo-600/20 active:scale-95",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Tambah Pengeluaran"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] overflow-hidden shadow-xl border border-white dark:border-gray-800 transition-all duration-500",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100 dark:divide-gray-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Deskripsi"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Kategori"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Operator"}),e.jsx("th",{className:"px-8 py-5 text-right text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Jumlah"}),e.jsx("th",{className:"px-8 py-5 text-center text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Aksi"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:[h.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-800/20 transition-all group",children:[e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:a.description}),e.jsx("div",{className:"text-[10px] text-gray-400 mt-1 font-black uppercase tracking-widest leading-none",children:new Date(a.expense_date).toLocaleDateString("id-ID",{dateStyle:"medium"})})]}),e.jsx("td",{className:"px-8 py-6",children:e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-500 rounded-lg text-[10px] font-black uppercase tracking-wider",children:a.category})}),e.jsx("td",{className:"px-8 py-6",children:e.jsx("div",{className:"text-xs font-bold text-gray-600 dark:text-gray-400",children:a.recorder?.name})}),e.jsx("td",{className:"px-8 py-6 text-right",children:e.jsxs("div",{className:"text-sm font-black text-rose-600 dark:text-rose-400",children:["- Rp ",a.amount.toLocaleString("id-ID")]})}),e.jsx("td",{className:"px-8 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[a.receipt&&e.jsx("button",{onClick:()=>o(`/storage/${a.receipt}`),className:"p-2 bg-indigo-50 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400 rounded-xl hover:scale-110 mb-1 transition-all",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>re(a.id),className:"p-2 bg-rose-50 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400 rounded-xl hover:scale-110 mb-1 transition-all",children:e.jsx(M,{className:"w-4 h-4"})})]})})]},a.id)),h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-8 py-16 text-center text-gray-400 italic",children:"Belum ada catatan pengeluaran operasional."})})]})]})})})]},"expenses"),n==="petty_cash"&&e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight uppercase",children:"Buku Kas Kecil (Petty Cash)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(le,{href:route("admin.petty-cash.index"),className:"inline-flex items-center px-6 py-3 bg-amber-500 hover:bg-amber-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] transition-all shadow-xl shadow-amber-500/20 active:scale-95",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Pengajuan Dana"]}),e.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] transition-all shadow-xl shadow-indigo-600/20 active:scale-95",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Buat Pengajuan Kas"]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] overflow-hidden shadow-xl border border-white dark:border-gray-800 transition-all duration-500",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100 dark:divide-gray-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Tgl / Deskripsi"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Tipe"}),e.jsx("th",{className:"px-8 py-5 text-right text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Nominal"}),e.jsx("th",{className:"px-8 py-5 text-right text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Saldo Akhir"}),e.jsx("th",{className:"px-8 py-5 text-center text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Aksi"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:[c.transactions.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-800/20 transition-all",children:[e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:a.description}),e.jsxs("div",{className:"text-[10px] text-gray-400 mt-1 font-black uppercase tracking-widest leading-none",children:[new Date(a.transaction_date).toLocaleDateString("id-ID")," - ",a.category||"-"]})]}),e.jsx("td",{className:"px-8 py-6",children:e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${a.type==="in"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:a.type==="in"?"Isi Saldo (In)":"Keluar (Out)"})}),e.jsxs("td",{className:`px-8 py-6 text-right font-black text-sm ${a.type==="in"?"text-emerald-600":"text-rose-600"}`,children:[a.type==="in"?"+":"-"," Rp ",a.amount.toLocaleString("id-ID")]}),e.jsxs("td",{className:"px-8 py-6 text-right text-sm font-bold text-gray-900 dark:text-white",children:["Rp ",Number(a.balance_after).toLocaleString("id-ID")]}),e.jsx("td",{className:"px-8 py-6 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[a.receipt&&e.jsx("button",{onClick:()=>o(`/storage/${a.receipt}`),className:"p-2 text-indigo-600",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ie(a.id),className:"p-2 text-rose-600",children:e.jsx(M,{className:"w-4 h-4"})})]})})]},a.id)),c.transactions.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-8 py-16 text-center text-gray-400 italic",children:"Belum ada riwayat transaksi kas kecil."})})]})]})})})]},"petty_cash"),n==="activity"&&e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white tracking-tight uppercase",children:"Log Kegiatan Keuangan"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Cari aktivitas...",value:k,onChange:a=>V(a.target.value),className:"pl-9 pr-4 py-2 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-xl text-xs font-bold w-48 focus:ring-2 focus:ring-indigo-500 transition-all text-gray-700 dark:text-gray-300 shadow-sm"})]}),e.jsxs("select",{value:b,onChange:a=>q(a.target.value),className:"px-4 py-2 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-xl text-xs font-bold focus:ring-2 focus:ring-indigo-500 cursor-pointer text-gray-700 dark:text-gray-300 shadow-sm",children:[e.jsx("option",{value:"",children:"Semua Tipe"}),e.jsx("option",{value:"expense",children:"Pengeluaran"}),e.jsx("option",{value:"proposal_created",children:"Pengajuan (Buat)"}),e.jsx("option",{value:"proposal_approved",children:"Pengajuan (Setuju)"}),e.jsx("option",{value:"proposal_rejected",children:"Pengajuan (Tolak)"}),e.jsx("option",{value:"petty_cash_tx",children:"Transaksi Kas"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 rounded-xl px-2 py-1 shadow-sm",children:[e.jsx(Ne,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"date",value:j,onChange:a=>J(a.target.value),className:"px-2 py-1 bg-transparent border-none text-xs font-bold focus:ring-0 cursor-pointer text-gray-700 dark:text-gray-300"}),e.jsx("span",{className:"text-gray-400 text-xs",children:"-"}),e.jsx("input",{type:"date",value:f,onChange:a=>X(a.target.value),className:"px-2 py-1 bg-transparent border-none text-xs font-bold focus:ring-0 cursor-pointer text-gray-700 dark:text-gray-300"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] overflow-hidden shadow-xl border border-white dark:border-gray-800 transition-all duration-500",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-100 dark:divide-gray-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50/50 dark:bg-gray-800/50",children:[e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest w-32",children:"Waktu"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Aktivitas"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest hidden sm:table-cell",children:"Pelaku"}),e.jsx("th",{className:"px-8 py-5 text-left text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Detail Informasi"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:[$.slice(0,50).map(a=>e.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-800/20 transition-all group",children:[e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("div",{className:"text-xs font-bold text-gray-900 dark:text-white",children:new Date(a.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})}),e.jsx("div",{className:"text-[10px] text-gray-400 mt-1 font-black uppercase tracking-widest",children:new Date(a.date).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-lg",children:a.icon}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white block mb-0.5",children:a.action}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-[9px] font-black uppercase tracking-widest bg-${a.color}-50 text-${a.color}-600 dark:bg-${a.color}-900/20 dark:text-${a.color}-400 inline-block`,children:a.subject.length>30?a.subject.substring(0,30)+"...":a.subject})]})]})}),e.jsx("td",{className:"px-8 py-6 hidden sm:table-cell",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 flex items-center justify-center font-black text-xs",children:a.actor.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-900 dark:text-white leading-tight",children:a.actor}),e.jsx("div",{className:"text-[9px] text-gray-400 font-black uppercase tracking-widest mt-0.5",children:a.actorRole})]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 font-bold leading-relaxed max-w-sm",children:a.detail})})]},a.id)),$.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-8 py-16 text-center text-gray-400 italic",children:"Belum ada aktivitas terekam."})})]})]})})})]},"activity")]})})]})})}),e.jsx(R,{show:H,onClose:()=>u(!1),children:e.jsxs("form",{onSubmit:te,className:"p-8 dark:bg-gray-900 rounded-[2.5rem]",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-6 uppercase tracking-tight",children:"Tambah Pengeluaran Operasional"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{value:"Keperluan",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx(l,{className:"w-full",value:v.description,onChange:a=>x("description",a.target.value),placeholder:"Contoh: Bayar Listrik, ATK, Kebersihan..."}),e.jsx(d,{message:w.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{value:"Kategori",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx(l,{className:"w-full",value:v.category,onChange:a=>x("category",a.target.value),placeholder:"Listrik, Inventaris..."}),e.jsx(d,{message:w.category})]}),e.jsxs("div",{children:[e.jsx(i,{value:"Tanggal",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx(l,{type:"date",className:"w-full",value:v.expense_date,onChange:a=>x("expense_date",a.target.value)}),e.jsx(d,{message:w.expense_date})]})]}),e.jsxs("div",{children:[e.jsx(i,{value:"Nominal Pengeluaran",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx(l,{type:"number",className:"w-full",value:v.amount,onChange:a=>x("amount",a.target.value),placeholder:"0"}),e.jsx(d,{message:w.amount})]}),e.jsxs("div",{children:[e.jsx(i,{value:"Bukti Nota/Kwitansi (Opsional)",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx("input",{type:"file",className:"w-full text-xs font-bold text-gray-500",onChange:a=>x("receipt",a.target.files[0])})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(T,{onClick:()=>u(!1),children:"Batal"}),e.jsx("button",{type:"submit",disabled:Z,className:"inline-flex items-center px-8 py-3 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-lg shadow-indigo-600/20",children:"Simpan Pengeluaran"})]})]})}),e.jsx(R,{show:z,onClose:()=>y(!1),children:e.jsxs("form",{onSubmit:se,className:"p-8 dark:bg-gray-900 rounded-[2.5rem]",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-6 uppercase tracking-tight",children:"Buat Pengajuan Kas Kecil"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 p-2 bg-gray-50 dark:bg-gray-800 rounded-2xl mb-6",children:[e.jsx("button",{type:"button",onClick:()=>g("type","spending"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase transition-all ${p.type==="spending"?"bg-rose-600 text-white shadow-lg":"text-gray-400"}`,children:"Pengajuan Belanja (Out)"}),e.jsx("button",{type:"button",onClick:()=>g("type","funding"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase transition-all ${p.type==="funding"?"bg-emerald-600 text-white shadow-lg":"text-gray-400"}`,children:"Permohonan Dana (In)"})]}),e.jsxs("div",{children:[e.jsx(i,{value:"Judul Pengajuan",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx(l,{className:"w-full",value:p.title,onChange:a=>g("title",a.target.value),placeholder:"Misal: Beli Kertas, Bayar Listrik, dll"}),e.jsx(d,{message:C.title})]}),e.jsxs("div",{children:[e.jsx(i,{value:"Detail Keperluan",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx(l,{className:"w-full",value:p.description,onChange:a=>g("description",a.target.value),placeholder:"Sebutkan keperluan secara detail..."}),e.jsx(d,{message:C.description})]}),e.jsxs("div",{children:[e.jsx(i,{value:"Nominal Budget Dimohon",className:"text-[10px] font-black uppercase tracking-widest text-gray-400 mb-2 ml-1"}),e.jsx(l,{type:"number",className:"w-full",value:p.amount,onChange:a=>g("amount",a.target.value),placeholder:"0"}),e.jsx(d,{message:C.amount})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(T,{onClick:()=>y(!1),children:"Batal"}),e.jsx("button",{type:"submit",disabled:ee,className:"inline-flex items-center px-8 py-3 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-lg shadow-indigo-600/20",children:"Konfirmasi & Kirim ke Workflow"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>o(null),children:e.jsxs("div",{className:"relative max-w-4xl w-full bg-white dark:bg-gray-900 rounded-[3rem] overflow-hidden shadow-2xl",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:()=>o(null),className:"absolute top-6 right-6 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full hover:scale-110 transition-all z-10 font-bold",children:"âœ•"}),e.jsxs("div",{className:"p-12 flex flex-col items-center",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white mb-8 uppercase tracking-widest",children:"Bukti Nota / Kwitansi"}),e.jsx("img",{src:L,className:"max-h-[70vh] rounded-2xl shadow-xl object-contain border border-gray-100 dark:border-gray-800"}),e.jsx("button",{onClick:()=>o(null),className:"mt-8 px-10 py-3 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-gray-200 transition-all",children:"Tutup Preview"})]})]})})]})}export{ea as default};
