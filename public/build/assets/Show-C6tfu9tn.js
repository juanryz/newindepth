import{j as e,b as d,e as je,u as P,H as Ne,f as j,L as z}from"./app-BS48rDuz.js";import{A as we}from"./AuthenticatedLayout-D9fChBI2.js";import{M as b}from"./Modal-BxiicX3D.js";import{T as A}from"./TextInput-ukoS7kbU.js";import{S as N}from"./SecondaryButton-iFged5vv.js";import ve from"./ErrorBoundary-BPZVB5gf.js";import{m as l}from"./proxy-BAOqr2Bt.js";import{A as T}from"./activity-CJ6hOanb.js";import{C as U}from"./calendar-CodDEoVS.js";import{C as _e}from"./clock-DDyDWF1z.js";import{P as Se}from"./plus-BzdJAnSb.js";import{U as F}from"./users-DQBXDIf3.js";import{S as I}from"./shield-check-CR9_IIR2.js";import{C as De}from"./chevron-right-BUVX_joi.js";import{A as V}from"./index-CvEf0b4p.js";import{U as W}from"./user-COnY3Ekh.js";import{C as x}from"./circle-check-DVgD9Qp4.js";import{E as O,H as q}from"./heart-Bb_eRVlm.js";import{c as L}from"./createLucideIcon-BDlxPsVO.js";import{M as Ce}from"./mail-DXnGyXhj.js";import{P as Pe}from"./phone-UUY1N1L1.js";import{C as G}from"./circle-x-DBG57T9i.js";import{V as Ae}from"./video-CAVT9gXG.js";import{E as Y}from"./eye-B_iJxoVn.js";import{S as Te}from"./save-DUuFhRJO.js";import{T as Ie}from"./triangle-alert-Dg6b4pwl.js";import{C as Le}from"./credit-card-rqONt8D1.js";import{F as $e,C as Be}from"./fingerprint-pattern-Dxwc_rg4.js";import{C as Ee}from"./chevron-left-Cgez2OeO.js";import"./transition-CPfBbgFd.js";import"./ThemeToggle-DQaj5Tfz.js";import"./LiquidBackground-CTXSiwuA.js";import"./with-selector-7TN0-zy8.js";const Ke=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],X=L("clipboard-list",Ke);const Re=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],He=L("map-pin",Re);const Me=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Je=L("star",Me);function ze({schedule:t,availableSchedules:Z,patients:Q=[]}){const[n,ee]=d.useState("summary"),[w,u]=d.useState(null),[v,m]=d.useState(null),[ae,p]=d.useState(!1),[r,y]=d.useState(null),[g,$]=d.useState("summary"),[c,_]=d.useState(null),[S,te]=d.useState({}),{auth:re}=je().props,{user:B}=re,D=a=>B.roles?.some(s=>s.name==="super_admin")||B.permissions?.includes(a),{data:o,setData:h,post:se,processing:ie,reset:de}=P({new_schedule_id:"",new_date:"",new_start_time:"",new_end_time:"",reschedule_reason:""}),{data:k,setData:E,post:le,processing:ne,reset:K}=P({no_show_party:"cancel",no_show_reason:""}),{data:R,setData:H,post:ce,processing:oe,reset:xe,errors:Ue}=P({patient_id:"",package_type:"reguler",schedule_id:t.id}),[M,me]=d.useState(()=>{const a={};return t.bookings?.forEach(s=>{a[s.id]={recording_link:s.recording_link||"",therapist_notes:s.therapist_notes||"",patient_visible_notes:s.patient_visible_notes||"",status:s.status||"confirmed",completion_outcome:s.completion_outcome||"Normal",core_method:s.session_checklist?.core_method_type?.[0]||""}}),a}),pe=(a,s,i)=>{me(f=>({...f,[a]:{...f[a],[s]:i}}))},ge=a=>{const s=M[a];j.patch(route("admin.bookings.update-details",a),{recording_link:s.recording_link,therapist_notes:s.therapist_notes,patient_visible_notes:s.patient_visible_notes,status:s.status,completion_outcome:s.completion_outcome,session_checklist:{core_method_type:[s.core_method]}},{preserveScroll:!0})},he=a=>{a.preventDefault(),se(route("admin.bookings.reschedule",w.id),{onSuccess:()=>{u(null),de()},preserveScroll:!0})},be=a=>{a.preventDefault(),k.no_show_party==="cancel"?j.post(route("admin.bookings.cancel",v.id),{},{onSuccess:()=>{m(null),K()},preserveScroll:!0}):le(route("admin.bookings.no-show",v.id),{onSuccess:()=>{m(null),K()},preserveScroll:!0})},ue=a=>{a.preventDefault(),ce(route("admin.bookings.store"),{onSuccess:()=>{p(!1),xe()},preserveScroll:!0})},ye={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}},ke=[{id:"summary",label:"Ringkasan Sesi",icon:T},{id:"patients",label:"Daftar Pasien",icon:F},{id:"settings",label:"Pengaturan Sesi",icon:I}],J=new Date(t.date),fe=J.toLocaleDateString("id-ID",{weekday:"long"}),C=J.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return e.jsxs(we,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(z,{href:route("admin.orders.index"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:e.jsx(Ee,{className:"w-5 h-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white leading-tight",children:"Detail Jadwal Sesi"}),e.jsx("p",{className:"text-[10px] text-gray-500 font-black uppercase tracking-[0.2em] mt-1",children:"Klinik & Jadwal Praktik"})]})]}),children:[e.jsx(Ne,{title:`Jadwal: ${t.therapist?.name} - ${C}`}),e.jsx("div",{className:"py-8 relative z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8",children:[e.jsx(l.div,{variants:ye,initial:"hidden",animate:"visible",className:"bg-white/60 dark:bg-gray-800/60 backdrop-blur-xl border border-gray-100 dark:border-gray-700/50 shadow-sm rounded-[2.5rem] overflow-hidden",children:e.jsxs("div",{className:"md:flex",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-indigo-700 p-8 flex flex-col items-center justify-center text-white relative md:w-80",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-white/10 via-transparent to-transparent pointer-events-none"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"w-24 h-24 bg-white/20 backdrop-blur-md rounded-[2rem] flex items-center justify-center border-4 border-white/30 text-4xl font-black uppercase",children:t.therapist?.name?.charAt(0)||"?"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-8 h-8 bg-emerald-500 border-4 border-indigo-600 rounded-full flex items-center justify-center",children:e.jsx(T,{className:"w-4 h-4 text-white"})})]}),e.jsx("h1",{className:"text-2xl font-black text-center leading-tight uppercase tracking-tight",children:t.therapist?.name}),e.jsx("p",{className:"text-indigo-100 text-[10px] font-black uppercase tracking-widest mt-2",children:t.therapist?.email||"Praktisi / Terapis"})]}),e.jsxs("div",{className:"flex-1 p-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-2",children:"Informasi Waktu"}),e.jsxs("div",{className:"flex items-center gap-4 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 shrink-0",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Hari & Tanggal"}),e.jsxs("p",{className:"text-sm font-black text-gray-900 dark:text-white uppercase",children:[fe,", ",C]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 shrink-0",children:e.jsx(_e,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase",children:"Jam Sesi (WIB)"}),e.jsxs("p",{className:"text-sm font-black text-gray-900 dark:text-white",children:[t.start_time.substring(0,5)," - ",t.end_time.substring(0,5)]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-2",children:"Kapasitas & Ketersediaan"}),e.jsx("div",{className:"flex items-end gap-3 mb-1",children:e.jsx("span",{className:`text-4xl font-black ${t.booked_count>=1?"text-rose-500":new Date(`${t.date}T${t.start_time}`)<new Date?"text-gray-400":"text-emerald-500"}`,children:t.booked_count>=1?"PENUH":new Date(`${t.date}T${t.start_time}`)<new Date?"TIDAK TERSEDIA":"TERBUKA"})}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.booked_count>=1?"bg-rose-500":new Date(`${t.date}T${t.start_time}`)<new Date?"bg-gray-400":"bg-emerald-500 animate-pulse"}`}),e.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:t.booked_count>=1?`${t.booked_count} Pasien Terdaftar`:new Date(`${t.date}T${t.start_time}`)<new Date?"Jadwal waktu sesi telah berlalu":"1 Slot tersedia — menunggu 1 pasien"})]}),e.jsxs("p",{className:"text-[9px] font-bold text-gray-400 italic mt-2 leading-relaxed",children:["Setiap terapis menangani 1 pasien per slot.",e.jsx("br",{}),"Slot lain di jam sama = terapis lain yang tersedia."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-2",children:"Aksi Cepat"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[D("create bookings")&&e.jsxs("button",{onClick:()=>p(!0),disabled:new Date(`${t.date}T${t.start_time}`)<new Date,className:`flex items-center justify-between px-5 py-3 border rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all ${new Date(`${t.date}T${t.start_time}`)<new Date?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed dark:bg-gray-800 dark:border-gray-700":"bg-emerald-50 dark:bg-emerald-900/10 border-emerald-100 dark:border-emerald-800/30 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-100"}`,children:[new Date(`${t.date}T${t.start_time}`)<new Date?"Jadwal Kadaluarsa":"Tambah Pasien"," ",e.jsx(Se,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>j.get(route("admin.schedules.index")),className:"flex items-center justify-between px-5 py-3 bg-indigo-50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-800/30 rounded-2xl text-indigo-600 dark:text-indigo-400 hover:bg-indigo-100 transition-all font-black text-[10px] uppercase tracking-widest",children:["Kembali ke Kalender ",e.jsx(U,{className:"w-4 h-4"})]})]})]})]})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-72 flex-shrink-0",children:e.jsx("div",{className:"sticky top-8 bg-white/50 dark:bg-gray-800/40 backdrop-blur-md rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 p-2 shadow-sm space-y-1",children:ke.map(a=>e.jsxs("button",{onClick:()=>ee(a.id),className:`w-full flex items-center gap-4 px-6 py-4 rounded-2xl text-sm font-black transition-all duration-300 relative z-20 ${n===a.id?"bg-indigo-600 text-white shadow-xl shadow-indigo-600/20 translate-x-2":"text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[e.jsx(a.icon,{className:`w-5 h-5 ${n===a.id?"text-white":"text-indigo-500"}`}),a.label,n===a.id&&e.jsx(De,{className:"w-5 h-5 ml-auto opacity-50"})]},a.id))})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(V,{mode:"wait",children:[n==="summary"&&e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 p-10 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-600 rounded-full"}),"Ringkasan Sesi Klinis"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-3",children:"Deskripsi Sesi"}),e.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-900/50 border border-gray-100 dark:border-gray-700/50 rounded-[2rem] text-sm font-medium text-gray-600 dark:text-gray-400 leading-relaxed capitalize",children:[t.schedule_type," Session - ",t.therapist?.name," pada ",C,". Sesi ini telah dikonfigurasi untuk menangani pendaftaran pasien dengan paket ",t.schedule_type==="class"?"group":"private","."]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-emerald-50/50 dark:bg-emerald-950/20 border border-emerald-100/50 dark:border-emerald-800/30 rounded-2xl",children:[e.jsx("p",{className:"text-[9px] font-black text-emerald-600 uppercase mb-1",children:"Status Jadwal"}),e.jsx("p",{className:"text-xs font-black text-emerald-700 dark:text-emerald-400",children:"AKTIF / TERVERIFIKASI"})]}),e.jsxs("div",{className:"p-4 bg-indigo-50/50 dark:bg-indigo-950/20 border border-indigo-100/50 dark:border-indigo-800/30 rounded-2xl",children:[e.jsx("p",{className:"text-[9px] font-black text-indigo-600 uppercase mb-1",children:"Sistem Booking"}),e.jsx("p",{className:"text-xs font-black text-indigo-700 dark:text-indigo-400",children:"INDEPTH CLOUD v3"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-1",children:"Data Terapis & Kehadiran"}),e.jsxs("div",{className:"p-8 bg-indigo-600 rounded-[2.5rem] text-white shadow-xl shadow-indigo-600/20",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(W,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black uppercase opacity-70",children:"Praktisi Bertugas"}),e.jsx("p",{className:"text-lg font-black uppercase",children:t.therapist?.name})]})]}),e.jsxs("div",{className:"space-y-2 border-t border-white/20 pt-4",children:[e.jsxs("p",{className:"text-[10px] font-bold uppercase tracking-widest flex items-center gap-2",children:[e.jsx(x,{className:"w-3.5 h-3.5"})," Kehadiran Terverifikasi"]}),e.jsxs("p",{className:"text-[10px] font-bold uppercase tracking-widest flex items-center gap-2",children:[e.jsx(x,{className:"w-3.5 h-3.5"})," Slot Tersedia di Kalender"]})]})]})]})]})]})},"summary"),n==="patients"&&e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:t.bookings?.length>0?t.bookings.map(a=>e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-8 bg-gray-50/50 dark:bg-gray-900/30 border-b border-gray-100 dark:border-gray-700/50 flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-[1.5rem] bg-indigo-600 flex items-center justify-center text-white text-2xl font-black shadow-lg shadow-indigo-600/20",children:a.patient?.name?.charAt(0)||"?"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight flex items-center gap-2",children:[e.jsxs(z,{href:route("admin.users.show",a.patient?.id),className:"hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors group flex items-center gap-2",children:[a.patient?.name,e.jsx(O,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity text-indigo-500"})]}),a.package_type==="vip"&&e.jsx(Je,{className:"w-4 h-4 text-amber-500 fill-amber-500"})]}),e.jsxs("div",{className:"text-xs font-bold text-gray-400 flex items-center gap-4 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"})," ",a.patient?.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3"})," ",a.patient?.phone||"-"]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center md:items-end gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"px-4 py-1.5 rounded-full bg-indigo-100 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300 text-[10px] font-black uppercase tracking-widest border border-indigo-200/50",children:["Paket ",a.package_type]}),e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${a.status==="completed"?"bg-emerald-100 text-emerald-700 border-emerald-200/50":"bg-blue-100 text-blue-700 border-blue-200/50"}`,children:a.status})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("p",{className:"text-[10px] font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-widest",children:"Pembayaran Terverifikasi"})]})]})]}),e.jsx("div",{className:"p-8 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Integrasi Sesi"}),e.jsxs("button",{type:"button",onClick:()=>te(s=>({...s,[a.id]:!s[a.id]})),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border ${S[a.id]?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 border-indigo-100 dark:border-indigo-800/40 hover:bg-indigo-100"}`,children:[e.jsx(X,{className:"w-3.5 h-3.5"}),S[a.id]?"Sembunyikan":"Lihat Checklist Sesi"]})]}),S[a.id]&&e.jsxs("div",{className:"p-6 bg-indigo-50/40 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-800/30 rounded-[1.5rem] space-y-4 animate-in fade-in duration-300",children:[e.jsxs("p",{className:"text-[9px] font-black text-indigo-500 uppercase tracking-widest mb-2 flex items-center gap-2",children:[e.jsx(X,{className:"w-3 h-3"})," Checklist Hipnoterapi — Diisi oleh Terapis"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-2xl",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Status Sesi"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-[10px] font-black uppercase ${a.status==="completed"?"bg-emerald-100 text-emerald-700":a.status==="no_show"?"bg-rose-100 text-rose-700":"bg-blue-100 text-blue-700"}`,children:a.status})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-2xl",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Hasil Outcome"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-[10px] font-black uppercase ${a.completion_outcome==="Abnormal/Emergency"?"bg-rose-100 text-rose-700":"bg-emerald-100 text-emerald-700"}`,children:a.completion_outcome||"Normal"})]})]}),e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-2xl",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Metode yang Digunakan"}),e.jsx("p",{className:"text-sm font-black text-indigo-700 dark:text-indigo-300",children:a.session_checklist?.core_method_type?.[0]||e.jsx("span",{className:"text-gray-400 font-bold italic text-xs",children:"Belum diisi terapis"})})]}),a.session_checklist&&Object.keys(a.session_checklist).length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Item Checklist"}),Object.entries(a.session_checklist).filter(([s])=>s!=="core_method_type").map(([s,i])=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-white dark:bg-slate-800 rounded-xl",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-300 capitalize",children:s.replace(/_/g," ")}),typeof i=="boolean"?i?e.jsx(x,{className:"w-4 h-4 text-emerald-500"}):e.jsx(G,{className:"w-4 h-4 text-gray-300"}):e.jsx("span",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 max-w-[50%] text-right break-words",children:Array.isArray(i)?i.join(", "):String(i)})]},s))]}):e.jsx("div",{className:"py-6 text-center text-[10px] font-bold text-gray-400 italic",children:"Checklist belum diisi oleh terapis"}),a.therapist_notes&&e.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-2xl",children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Catatan Terapis"}),e.jsx("p",{className:"text-xs font-bold text-gray-700 dark:text-gray-300 leading-relaxed",children:a.therapist_notes})]}),a.recording_link&&e.jsxs("a",{href:a.recording_link,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-3 bg-white dark:bg-slate-800 rounded-2xl text-[10px] font-black text-indigo-600 hover:bg-indigo-50 transition-all",children:[e.jsx(Ae,{className:"w-4 h-4"})," Lihat Rekaman Sesi"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-wider ml-1 mb-1 block",children:"Pesan untuk Pasien (Muncul di Dashboard)"}),e.jsx("textarea",{value:M[a.id]?.patient_visible_notes||"",onChange:s=>pe(a.id,"patient_visible_notes",s.target.value),className:"w-full bg-emerald-50/30 dark:bg-emerald-900/10 border-emerald-100 dark:border-emerald-800/30 rounded-2xl px-5 py-3.5 text-sm font-bold shadow-inner resize-none",rows:"2",placeholder:"Berikan semangat atau instruksi tugas..."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest px-1",children:"Informasi Praktisi"}),e.jsxs("div",{className:"p-6 bg-indigo-50/50 dark:bg-indigo-950/20 border border-indigo-100/50 dark:border-indigo-800/30 rounded-3xl space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white dark:bg-gray-800 rounded-2xl flex items-center justify-center shadow-sm",children:e.jsx(W,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase",children:"Terapis Bertanggung Jawab"}),e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white uppercase",children:a.therapist?.name||t.therapist?.name})]})]}),e.jsxs("div",{className:"pt-4 border-t border-indigo-100/50 dark:border-indigo-800/30 flex justify-between",children:[e.jsxs("button",{onClick:()=>{y(a.patient),$("summary")},className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 uppercase tracking-widest transition-colors",children:[e.jsx(Y,{className:"w-4 h-4"})," Detail Lengkap Pasien"]}),e.jsxs("button",{onClick:()=>ge(a.id),className:"flex items-center gap-2 text-[10px] font-black text-emerald-600 hover:text-emerald-800 dark:text-emerald-400 uppercase tracking-widest transition-colors",children:[e.jsx(Te,{className:"w-4 h-4"})," Simpan Data"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(a),className:"flex-1 py-3 bg-amber-50 dark:bg-amber-950/20 text-amber-600 text-[10px] font-black uppercase rounded-xl border border-amber-100 dark:border-amber-900/30 hover:bg-amber-100 transition-all",children:"Reschedule"}),e.jsx("button",{onClick:()=>m(a),className:"flex-1 py-3 bg-rose-50 dark:bg-rose-950/20 text-rose-600 text-[10px] font-black uppercase rounded-xl border border-rose-100 dark:border-rose-900/30 hover:bg-rose-100 transition-all",children:"No-Show / Cancel"})]})]})]})})]},a.id)):e.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/40 backdrop-blur-md rounded-[3rem] p-24 text-center border-2 border-dashed border-gray-100 dark:border-gray-800 flex flex-col items-center",children:[e.jsx(F,{className:"w-12 h-12 text-gray-200 mb-4"}),e.jsx("h4",{className:"text-2xl font-black text-gray-300 uppercase tracking-tight",children:"Belum Ada Pasien"}),D("create bookings")&&e.jsx("button",{onClick:()=>p(!0),className:"mt-8 px-10 py-3 bg-indigo-600 text-white font-black text-[10px] uppercase rounded-2xl shadow-xl",children:"Tambah Pasien Manual"})]})},"patients"),n==="settings"&&e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800/80 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 p-10 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight mb-8 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-rose-500 rounded-full"}),"Pengaturan Kontrol Slot"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"p-8 bg-rose-50/30 dark:bg-rose-950/20 border border-rose-100/50 dark:border-rose-800/30 rounded-[2.5rem] space-y-6",children:[e.jsxs("h4",{className:"text-[10px] font-black text-rose-600 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"})," Hazard Zone"]}),e.jsx("p",{className:"text-xs font-bold text-gray-600 dark:text-gray-400 uppercase leading-relaxed p-4 bg-white/50 dark:bg-gray-900/50 rounded-2xl border border-rose-100/50",children:"Hapus jadwal hanya jika belum ada pendaftaran. Jika pendaftaran sudah ada, sistem akan memblokir penghapusan otomatis."}),D("delete schedules")&&e.jsx("button",{onClick:()=>{if(t.booked_count>0)return alert("Sudah ada pasien terdaftar periksa tab Daftar Pasien.");confirm("Hapus slot?")&&j.delete(route("admin.schedules.destroy",t.id))},className:`w-full py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all ${t.booked_count>0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-rose-600 text-white shadow-xl shadow-rose-600/20 hover:bg-rose-700"}`,children:"Hapus Seluruh Jadwal"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-900/40 border border-gray-100 dark:border-gray-700/50 rounded-3xl",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"ID JADWAL"}),e.jsxs("p",{className:"text-xl font-black text-gray-900 dark:text-white font-mono",children:["#",t.id]})]}),e.jsxs("div",{className:"p-6 bg-gray-50/50 dark:bg-gray-900/40 border border-gray-100 dark:border-gray-700/50 rounded-3xl",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"TERAKHIR DIUPDATE"}),e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white uppercase",children:new Date(t.updated_at).toLocaleString("id-ID")})]})]})]})]})},"settings")]})})]})]})}),e.jsx(b,{show:r!==null,onClose:()=>y(null),maxWidth:"7xl",children:r&&e.jsxs("div",{className:"max-h-[90vh] overflow-y-auto custom-scrollbar bg-gray-50 dark:bg-gray-950 p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-[2rem] flex items-center justify-center text-white text-3xl font-black shadow-2xl",children:r.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:r.name}),e.jsx("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-[0.2em]",children:r.email})]})]}),e.jsx("button",{onClick:()=>y(null),className:"p-3 bg-white dark:bg-gray-800 rounded-2xl hover:text-rose-500 transition-colors shadow-sm",children:e.jsx(G,{className:"w-8 h-8"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-8 bg-white/50 dark:bg-gray-800/40 p-2 rounded-[2rem] border border-gray-100 dark:border-gray-700/50 shadow-sm",children:[{id:"summary",label:"Ringkasan",icon:T},{id:"legal",label:"Pernyataan & S&K",icon:I},{id:"screening",label:"Skrining AI",icon:q},{id:"financial",label:"Histori Transaksi",icon:Le}].map(a=>e.jsxs("button",{onClick:()=>$(a.id),className:`flex-1 flex items-center justify-center gap-2 py-3.5 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${g===a.id?"bg-indigo-600 text-white shadow-lg":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"})," ",a.label]},a.id))}),e.jsxs(V,{mode:"wait",children:[g==="summary"&&e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-[2rem] border border-gray-100 dark:border-gray-700/50 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Telepon"}),e.jsx("p",{className:"text-lg font-black text-gray-900 dark:text-white",children:r.phone||"-"})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-[2rem] border border-gray-100 dark:border-gray-700/50 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Usia"}),e.jsxs("p",{className:"text-lg font-black text-gray-900 dark:text-white",children:[r.age||"-"," Tahun"]})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-[2rem] border border-gray-100 dark:border-gray-700/50 shadow-sm",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Gender"}),e.jsx("p",{className:"text-lg font-black text-gray-900 dark:text-white capitalize",children:r.gender||"-"})]})]}),e.jsxs("div",{className:"p-10 bg-white dark:bg-gray-800 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 shadow-sm space-y-8",children:[e.jsxs("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(He,{className:"w-4 h-4 text-rose-500"})," Lokasi & Kontak Darurat"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Alamat Lengkap"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:r.address||"Belum diisi."})]}),e.jsxs("div",{className:"p-6 bg-rose-50/50 dark:bg-rose-950/10 border border-rose-100 dark:border-rose-900/30 rounded-3xl space-y-4",children:[e.jsx("p",{className:"text-[10px] font-black text-rose-600 uppercase",children:"Kontak Darurat"}),e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white uppercase",children:r.emergency_contact_name||"N/A"}),e.jsx("p",{className:"text-sm font-bold text-rose-600",children:r.emergency_contact_phone||"-"})]})]})]})]},"p-summary"),g==="legal"&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:e.jsxs("div",{className:"p-10 bg-white dark:bg-gray-800 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 shadow-sm",children:[e.jsxs("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase mb-8 ml-2 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-emerald-500 rounded-full"}),"Dokumen Persetujuan Digital"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:`p-8 rounded-[2rem] border min-h-[300px] flex flex-col justify-between ${r.agreement_signed_at?"bg-emerald-50/30 dark:bg-emerald-950/10 border-emerald-100 dark:border-emerald-800/50":"bg-gray-50 border-gray-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx(I,{className:`w-10 h-10 ${r.agreement_signed_at?"text-emerald-500":"text-gray-200"}`}),r.agreement_signed_at&&e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"px-4 py-1.5 bg-emerald-500 text-white rounded-full text-[9px] font-black uppercase",children:"Two Docs Signed"}),e.jsx("span",{className:"text-[8px] font-bold text-emerald-600 mt-1 uppercase",children:"VERIFIED DIGITAL"})]})]}),e.jsx("h4",{className:"text-lg font-black text-gray-900 dark:text-white uppercase leading-tight",children:"PERNYATAAN AWAL + PERJANJIAN LAYANAN"}),e.jsxs("p",{className:"text-[10px] font-bold text-gray-400 mt-2 uppercase tracking-widest",children:["Signed at: ",r.agreement_signed_at?new Date(r.agreement_signed_at).toLocaleString("id-ID"):"Not Signed"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-6",children:[r.agreement_data?.signature_1&&e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-900 rounded-xl border border-emerald-100/50 dark:border-emerald-800/50",children:[e.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase mb-1",children:"Doc 1: Pernyataan"}),e.jsx("img",{src:r.agreement_data.signature_1,alt:"Signature 1",className:"h-10 w-full object-contain invert dark:invert-0"})]}),r.digital_signature&&e.jsxs("div",{className:"p-3 bg-white dark:bg-gray-900 rounded-xl border border-emerald-100/50 dark:border-emerald-800/50",children:[e.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase mb-1",children:"Doc 2: Perjanjian"}),e.jsx("img",{src:r.digital_signature,alt:"Signature 2",className:"h-10 w-full object-contain invert dark:invert-0"})]})]}),r.agreement_signed_at&&e.jsxs("a",{href:route("admin.users.agreement",r.id),target:"_blank",rel:"noreferrer",className:"mt-6 w-full py-4 bg-white dark:bg-gray-800 text-center text-[10px] font-black uppercase rounded-2xl border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all flex items-center justify-center gap-2",children:["Lihat Kedua Dokumen ",e.jsx(O,{className:"w-3 h-3"})]})]}),e.jsxs("div",{className:`p-8 rounded-[2rem] border min-h-[300px] flex flex-col justify-between ${r.affiliate_agreement_signed_at?"bg-indigo-50/30 dark:bg-indigo-950/10 border-indigo-100 dark:border-indigo-800/50":"bg-gray-50 border-gray-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx($e,{className:`w-10 h-10 ${r.affiliate_agreement_signed_at?"text-indigo-500":"text-gray-200"}`}),r.affiliate_agreement_signed_at&&e.jsx("span",{className:"px-4 py-1.5 bg-indigo-500 text-white rounded-full text-[9px] font-black uppercase",children:"Affiliate Member"})]}),e.jsx("h4",{className:"text-lg font-black text-gray-900 dark:text-white uppercase leading-tight",children:"PERJANJIAN MITRA AFFILIATE"})]}),r.affiliate_signature?e.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-gray-900 rounded-2xl border border-indigo-100/50",children:[e.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase mb-1",children:"Affiliate Signature"}),e.jsx("img",{src:r.affiliate_signature,className:"h-16 w-full object-contain invert dark:invert-0",alt:"af-signature"})]}):e.jsx("div",{className:"mt-6 text-center text-[10px] font-bold text-gray-400 uppercase italic border border-dashed p-8 rounded-2xl",children:"Belum Bergabung Afiliasi"})]}),r.transactions?.filter(a=>a.transactionable_type?.includes("Course")&&a.payment_agreement_data).map(a=>e.jsxs("div",{className:"p-8 rounded-[2rem] border bg-gray-50/50 dark:bg-gray-800/30 border-gray-100 dark:border-gray-700 md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-1",children:"E-Learning / Kelas"}),e.jsxs("h4",{className:"font-black text-gray-900 dark:text-white uppercase leading-tight",children:["S&K Peserta Kelas: ",a.transactionable?.title||"Course"]}),e.jsxs("p",{className:"text-[9px] font-bold text-gray-400 mt-1",children:["Invoice: ",a.invoice_number]})]}),e.jsx(Be,{className:"w-10 h-10 text-gray-200"})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"p-2.5 bg-emerald-500 rounded-xl text-white",children:e.jsx(x,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-emerald-600 dark:text-emerald-400",children:"Persetujuan Terdaftar"}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 font-mono italic",children:new Date(a.created_at).toLocaleDateString("id-ID",{dateStyle:"medium"})})]})]}),e.jsx("button",{onClick:()=>_({tx:a,data:a.payment_agreement_data}),className:"w-full py-4 bg-white dark:bg-gray-700 border border-gray-100 dark:border-gray-600 text-[10px] font-black uppercase tracking-widest text-indigo-600 dark:text-indigo-400 rounded-2xl hover:shadow-lg transition-all",children:"Lihat Detail S&K Lengkap"})]},`course-legal-${a.id}`))]})]})},"p-legal"),g==="screening"&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:r.screening_results?.length>0?r.screening_results.map((a,s)=>e.jsxs("div",{className:"p-10 bg-white dark:bg-gray-800 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 shadow-sm space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-900 p-6 rounded-[2rem] border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:["Sesi Skrining #",r.screening_results.length-s]}),e.jsx("p",{className:"text-sm font-bold text-gray-500",children:new Date(a.completed_at||a.created_at).toLocaleString("id-ID",{dateStyle:"medium",timeStyle:"short"})})]}),e.jsx("span",{className:"px-5 py-2 bg-rose-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest shadow-lg shadow-rose-600/20",children:a.severity_label||"Analyzed"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Summary Diagnosa AI"}),e.jsxs("p",{className:"text-2xl font-black text-gray-900 dark:text-white leading-tight italic",children:['"',a.ai_summary||"-",'"']})]}),a.chat_history&&e.jsxs("div",{className:"p-8 bg-gray-50/30 dark:bg-gray-900/40 rounded-[2rem] border border-gray-100 dark:border-gray-800",children:[e.jsx("h5",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-6",children:"Chat History Log"}),e.jsx("div",{className:"space-y-4 max-h-[300px] overflow-y-auto pr-4 custom-scrollbar",children:a.chat_history.map((i,f)=>e.jsx("div",{className:`flex ${i.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[85%] p-4 rounded-2xl text-xs font-bold ${i.role==="user"?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700"}`,children:i.content})},f))})]})]},a.id)):e.jsxs("div",{className:"py-24 text-center bg-white dark:bg-gray-800 rounded-[3rem] border border-dashed border-gray-100 dark:border-gray-700",children:[e.jsx(q,{className:"w-16 h-16 text-gray-100 mx-auto mb-4"}),e.jsx("p",{className:"text-[10px] font-black text-gray-300 uppercase underline decoration-rose-500 decoration-4 underline-offset-8",children:"Data Skrining Belum Tersedia"})]})},"p-screening"),g==="financial"&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-[2.5rem] border border-gray-100 dark:border-gray-700/50 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"p-8 bg-emerald-50/30 dark:bg-emerald-950/20 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:e.jsxs("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-emerald-500 rounded-full"})," Log Transaksi"]})}),e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900 sticky top-0 z-10",children:e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[e.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Invoice / Tanggal"}),e.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Layanan"}),e.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest",children:"Nominal"}),e.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Bukti"}),e.jsx("th",{className:"px-8 py-4 text-[10px] font-black text-gray-400 uppercase tracking-widest text-center",children:"Status & Verifikasi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-800/50",children:r.transactions?.length>0?r.transactions.map(a=>e.jsxs("tr",{className:"hover:bg-emerald-50/10 transition-colors",children:[e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("p",{className:"text-sm font-black text-gray-900 dark:text-white",children:a.invoice_number}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:new Date(a.created_at).toLocaleDateString("id-ID")})]}),e.jsxs("td",{className:"px-8 py-6",children:[e.jsx("p",{className:"text-xs font-black uppercase text-indigo-600",children:a.transactionable_type?.split("\\").pop()}),e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase",children:a.transactionable?.package_type||a.transactionable?.title||"System Service"})]}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("p",{className:"text-sm font-black text-gray-900 dark:text-white",children:["Rp ",new Intl.NumberFormat("id-ID").format(a.amount)]})}),e.jsx("td",{className:"px-8 py-6 text-center",children:a.payment_proof?e.jsx("a",{href:`/storage/${a.payment_proof}`,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 group/proof",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-gray-400 group-hover/proof:bg-indigo-600 group-hover/proof:text-white transition-all",children:e.jsx(Y,{className:"w-4 h-4"})})}):e.jsx("span",{className:"text-[10px] font-bold text-gray-300 italic",children:"N/A"})}),e.jsx("td",{className:"px-8 py-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase ${a.status==="paid"?"bg-emerald-100 text-emerald-600":a.status==="rejected"?"bg-rose-100 text-rose-600":"bg-amber-100 text-amber-600"}`,children:a.status==="paid"?"VALID / LUNAS":a.status}),a.status==="paid"&&a.validated_at&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-[8px] font-black text-indigo-500 uppercase flex items-center gap-1",children:[e.jsx(x,{className:"w-2.5 h-2.5"}),"By: ",a.validated_by?.name||"Admin"]}),e.jsx("span",{className:"text-[8px] text-gray-400 font-bold",children:new Date(a.validated_at).toLocaleDateString("id-ID")})]})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"p-12 text-center text-[10px] font-bold text-gray-400 uppercase italic",children:"Belum ada histori transaksi aktif."})})})]})})]})},"p-finance")]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-100 dark:border-gray-800 text-center",children:e.jsx(N,{onClick:()=>y(null),className:"!rounded-2xl !px-12 !py-4 font-black uppercase tracking-widest text-[10px]",children:"Tutup Detail Pasien"})})]})}),e.jsx(b,{show:c!==null,onClose:()=>_(null),maxWidth:"2xl",children:c&&e.jsxs("div",{className:"p-10 dark:bg-gray-900 rounded-[2.5rem] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-600/5 rounded-full -mr-16 -mt-16"}),e.jsx("h3",{className:"text-2xl font-black text-gray-900 dark:text-white uppercase tracking-tight mb-2",children:"Syarat & Ketentuan Peserta"}),e.jsxs("p",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest mb-8",children:["Kelas: ",c.tx.transactionable?.title]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-6 rounded-3xl border border-gray-100 dark:border-gray-700/50 max-h-[400px] overflow-y-auto mb-8 custom-scrollbar",children:e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:c.data.agreement_text||"Peserta setuju untuk mengikuti seluruh rangkaian materi dan mematuhi kode etik bimbingan InDepth Mental Wellness."})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 text-center",children:[e.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase mb-2",children:"Tanda Tangan Peserta"}),e.jsx("img",{src:c.data.signature,className:"h-16 mx-auto object-contain invert dark:invert-0",alt:"course-signature"})]}),e.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/10 rounded-2xl border border-emerald-100/50 flex flex-col justify-center items-center",children:[e.jsx(x,{className:"w-6 h-6 text-emerald-500 mb-1"}),e.jsx("p",{className:"text-[8px] font-black text-emerald-600 uppercase",children:"Tervalidasi Sistem"}),e.jsx("p",{className:"text-[9px] font-bold text-gray-500 mt-1",children:new Date(c.tx.created_at).toLocaleDateString("id-ID")})]})]}),e.jsx("button",{onClick:()=>_(null),className:"w-full py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-black text-[10px] uppercase rounded-2xl shadow-xl tracking-widest",children:"Tutup Dokumen"})]})}),e.jsx(b,{show:w!==null,onClose:()=>u(null),children:e.jsxs("form",{onSubmit:he,className:"p-10 dark:bg-gray-900 rounded-[2.5rem]",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-6 uppercase tracking-tight",children:"Jadwal Ulang Pasien"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("select",{className:"w-full bg-gray-50 dark:bg-gray-800 border-gray-100 dark:border-gray-700 rounded-2xl px-5 py-4 text-sm font-bold shadow-inner",value:o.new_schedule_id,onChange:a=>h(s=>({...s,new_schedule_id:a.target.value,new_date:"",new_start_time:"",new_end_time:""})),children:[e.jsx("option",{value:"",children:"-- Buat Jadwal Custom (Manual) --"}),Z?.filter(a=>a.id!==w?.schedule_id).map(a=>e.jsxs("option",{value:a.id,children:[new Date(a.date).toLocaleDateString("id-ID")," | ",a.start_time.substring(0,5)," WIB | ",a.therapist?.name]},a.id))]}),!o.new_schedule_id&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(A,{type:"date",className:"sm:col-span-2",value:o.new_date,onChange:a=>h("new_date",a.target.value)}),e.jsx(A,{type:"time",value:o.new_start_time,onChange:a=>h("new_start_time",a.target.value)}),e.jsx(A,{type:"time",value:o.new_end_time,onChange:a=>h("new_end_time",a.target.value)})]}),e.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-800 border-gray-100 dark:border-gray-700 rounded-2xl px-5 py-4 text-sm font-bold shadow-inner",rows:"3",placeholder:"Alasan reschedule...",value:o.reschedule_reason,onChange:a=>h("reschedule_reason",a.target.value),required:!0})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(N,{onClick:()=>u(null),children:"Batal"}),e.jsx("button",{type:"submit",disabled:ie,className:"px-8 py-3 bg-amber-600 text-white font-black text-[10px] uppercase rounded-2xl shadow-xl",children:"Konfirmasi"})]})]})}),e.jsx(b,{show:v!==null,onClose:()=>m(null),children:e.jsxs("form",{onSubmit:be,className:"p-10 dark:bg-gray-900 rounded-[2.5rem]",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-6 uppercase tracking-tight",children:"Batalkan / No-Show"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("select",{className:"w-full bg-gray-50 dark:bg-gray-800 border-gray-100 dark:border-gray-700 rounded-2xl px-5 py-4 text-sm font-bold shadow-inner",value:k.no_show_party,onChange:a=>E("no_show_party",a.target.value),children:[e.jsx("option",{value:"cancel",children:"Batalkan Total (Open Slot)"}),e.jsx("option",{value:"patient",children:"Pasien Tidak Hadir (Slot Hangus)"}),e.jsx("option",{value:"therapist",children:"Praktisi Berhalangan (Slot Hangus)"})]}),e.jsx("textarea",{className:"w-full bg-gray-50 dark:bg-gray-800 border-gray-100 dark:border-gray-700 rounded-2xl px-5 py-4 text-sm font-bold shadow-inner",placeholder:"Alasan pembatalan...",rows:"3",value:k.no_show_reason,onChange:a=>E("no_show_reason",a.target.value),required:k.no_show_party!=="cancel"})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx(N,{onClick:()=>m(null),children:"Batal"}),e.jsx("button",{type:"submit",disabled:ne,className:"px-8 py-3 bg-rose-600 text-white font-black text-[10px] uppercase rounded-2xl shadow-xl",children:"Konfirmasi"})]})]})}),e.jsx(b,{show:ae,onClose:()=>p(!1),children:e.jsxs("form",{onSubmit:ue,className:"p-10 dark:bg-gray-900 rounded-[2.5rem]",children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-white mb-6 uppercase tracking-tight",children:"Tambah Pasien Manual"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("select",{className:"w-full bg-gray-50 dark:bg-gray-800 border-gray-100 dark:border-gray-700 rounded-2xl px-5 py-4 text-sm font-bold shadow-inner",value:R.patient_id,onChange:a=>H("patient_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"-- Cari Nama Pasien --"}),Q.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",a.email,")"]},a.id))]}),e.jsxs("select",{className:"w-full bg-gray-50 dark:bg-gray-800 border-gray-100 dark:border-gray-700 rounded-2xl px-5 py-4 text-sm font-bold shadow-inner",value:R.package_type,onChange:a=>H("package_type",a.target.value),children:[e.jsx("option",{value:"reguler",children:"Reguler / Umum"}),e.jsx("option",{value:"hipnoterapi",children:"Paket Hipnoterapi"}),e.jsx("option",{value:"premium",children:"Paket Premium"}),e.jsx("option",{value:"vip",children:"Paket VIP"})]})]}),e.jsxs("div",{className:"mt-10 flex justify-end gap-3",children:[e.jsx(N,{onClick:()=>p(!1),children:"Batal"}),e.jsx("button",{type:"submit",disabled:oe,className:"px-10 py-3 bg-indigo-600 text-white font-black text-[10px] uppercase rounded-2xl shadow-xl",children:"Proses Pendaftaran"})]})]})})]})}function wa(t){return e.jsx(ve,{children:e.jsx(ze,{...t})})}export{wa as default};
