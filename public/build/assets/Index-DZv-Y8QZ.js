import{u as o,r as h,j as e,H as u}from"./app-DXzRYOYu.js";import{A as y}from"./AuthenticatedLayout-BErZoqzA.js";import"./transition-B3E_KlXL.js";import"./ThemeToggle-Do2R1wXr.js";function v({bookings:i,therapists:l}){const{data:n,setData:d,patch:c,processing:r}=o({therapist_id:""}),[x,a]=h.useState(null),m=t=>{c(route("admin.bookings.assign-therapist",t),{onSuccess:()=>a(null)})},p=t=>{const s={pending_screening:"bg-yellow-100 text-yellow-800",pending_payment:"bg-blue-100 text-blue-800",pending_validation:"bg-indigo-100 text-indigo-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},g={pending_screening:"Menunggu Skrining",pending_payment:"Menunggu Pembayaran",pending_validation:"Menunggu Validasi",confirmed:"Dikonfirmasi",completed:"Selesai",cancelled:"Dibatalkan"};return e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s[t]||s.pending_payment}`,children:g[t]||t})};return e.jsxs(y,{header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Manajemen Booking Pasien"}),children:[e.jsx(u,{title:"Booking Pasien"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kode"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pasien"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jadwal Sesi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Terapis"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("div",{className:"font-medium text-gray-900",children:t.booking_code})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.patient?.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.patient?.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.schedule?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:new Date(t.schedule.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsxs("div",{className:"text-xs",children:[t.schedule.start_time.substring(0,5)," - ",t.schedule.end_time.substring(0,5)]})]}):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:p(t.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x===t.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"text-sm border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",value:n.therapist_id,onChange:s=>d("therapist_id",s.target.value),children:[e.jsx("option",{value:"",children:"Pilih Terapis"}),l.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx("button",{onClick:()=>m(t.id),className:"px-3 py-1 bg-indigo-600 text-white text-xs rounded-md hover:bg-indigo-700 disabled:opacity-50",disabled:r||!n.therapist_id,children:"Simpan"}),e.jsx("button",{onClick:()=>a(null),className:"px-3 py-1 bg-gray-200 text-gray-700 text-xs rounded-md hover:bg-gray-300",disabled:r,children:"Batal"})]}):e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsx("span",{className:t.therapist?"text-gray-900 font-medium":"text-gray-400 italic",children:t.therapist?.name||"Belum di-assign"}),e.jsx("button",{onClick:()=>{a(t.id),d("therapist_id",t.therapist_id||"")},className:"ml-2 text-indigo-600 hover:text-indigo-900 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:t.therapist?"Ubah":"Assign"})]})})]},t.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500",children:"Belum ada booking pasien."})})]})]})})})})})]})}export{v as default};
