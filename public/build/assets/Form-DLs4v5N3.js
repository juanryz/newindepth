import{u as O,b as D,j as e,H as $,L as y}from"./app-vKc3cRRF.js";import{A as U}from"./AuthenticatedLayout-DH653c4F.js";import{I as H}from"./InputError-C_T5-u3-.js";import{I as V}from"./InputLabel-DiSudcCk.js";import{T as z}from"./TextInput-8I-Rnike.js";import{S as f}from"./shield-DklbuToC.js";import{S as F}from"./save-DqxFLG5B.js";import{C as J}from"./chevron-left-B2qzJ3bU.js";import{c as j}from"./createLucideIcon-0mOGyO4U.js";import{B as W}from"./book-open-DaGeEjXI.js";import{U as G}from"./users-Dujp3miS.js";import{C as q}from"./credit-card-CtxS6MR5.js";import{C as X}from"./calendar-BsSBqfeL.js";import"./transition-CX76Tz0s.js";import"./ThemeToggle-Z7e88HKE.js";import"./LiquidBackground-B5RfQoiU.js";const Y=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],Z=j("chart-no-axes-column-increasing",Y);const Q=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ee=j("settings",Q);function be({roleModel:c,permissions:x,rolePermissions:w}){const g=!!c.id,{data:t,setData:d,post:v,put:N,processing:C,errors:E}=O({name:c.name||"",permissions:w||[]}),h={"Booking & Konsultasi":["bookings","schedules","own_schedule"],"Transaksi & Pembayaran":["transactions","all_transactions"],"Manajemen Pengguna":["users","roles","permissions"],"Konten Akses Publik":["blog_posts","courses","lessons"],"Laporan & Keuangan":["reports","finance","expenses","petty_cash"]},_={bookings:"Akses mengelola pesanan (booking) layanan.",schedules:"Mengatur keseluruhan jadwal praktek terapis.",own_schedule:"Akses khusus terapis melihat jadwal prakteknya sendiri.",transactions:"Memvalidasi atau menolak pembayaran dari pesanan baru.",all_transactions:"Akses melihat seluruh history transaksi pengguna.",users:"Manajemen daftar pengguna dan pemberian hak akses.",blog_posts:"Mengelola informasi artikel blog publik.",courses:"Mengelola paket dan konten kursus edukasi.",reports:"Export dan view laporan statistik bulanan.",finance:"Melihat arus kas utama & dashboard finance.",petty_cash:"Mengelola pengajuan dan saldo kas kecil."},S=s=>{const r=s.split(" ");if(r.length>=2){const o=r[0],a=r.slice(1).join("_");return{action:o,resource:a}}return{action:s,resource:"general"}},A=D.useMemo(()=>{const s={};return Object.keys(h).forEach(r=>s[r]={}),x.forEach(r=>{const{action:o,resource:a}=S(r.name);let i="Lainnya";for(const[m,p]of Object.entries(h))if(p.includes(a)){i=m;break}s[i]||(s[i]={}),s[i][a]||(s[i][a]=[]),s[i][a].push({id:r.id,name:r.name,action:o,resource:a})}),Object.fromEntries(Object.entries(s).filter(([r,o])=>Object.keys(o).length>0))},[x]),b=s=>{const{value:r,checked:o}=s.target;o?d("permissions",[...t.permissions,r]):d("permissions",t.permissions.filter(a=>a!==r))},L=s=>{const r=s.map(a=>a.name);if(r.every(a=>t.permissions.includes(a)))d("permissions",t.permissions.filter(a=>!r.includes(a)));else{const a=[...new Set([...t.permissions,...r])];d("permissions",a)}},P=s=>{const r=Object.values(s).flat().map(a=>a.name);if(r.every(a=>t.permissions.includes(a)))d("permissions",t.permissions.filter(a=>!r.includes(a)));else{const a=[...new Set([...t.permissions,...r])];d("permissions",a)}},I=s=>{s.preventDefault(),g?N(route("admin.roles.update",c.id)):v(route("admin.roles.store"))},R=s=>{switch(s){case"Booking & Konsultasi":return e.jsx(X,{className:"w-4 h-4"});case"Transaksi & Pembayaran":return e.jsx(q,{className:"w-4 h-4"});case"Manajemen Pengguna":return e.jsx(G,{className:"w-4 h-4"});case"Konten Akses Publik":return e.jsx(W,{className:"w-4 h-4"});case"Laporan & Keuangan":return e.jsx(Z,{className:"w-4 h-4"});default:return e.jsx(ee,{className:"w-4 h-4"})}},M=s=>({bookings:"Data Booking Pasien",schedules:"Jadwal Reguler Terapis",own_schedule:"Jadwal Personal (Terapis)",transactions:"Validasi Transaksi Masuk",all_transactions:"Seluruh Riwayat Transaksi",users:"Manajemen Pengguna & Admin",blog_posts:"Artikel Blog Publik",courses:"Layanan Kursus Edukasi",reports:"Laporan Sistem Utama",finance:"Dashboard Keuangan (Finance)",petty_cash:"Kas Kecil Internal/Eksternal"})[s]||s.replace(/_/g," ").toUpperCase(),k=s=>({view:"VIEW",create:"CREATE",edit:"EDIT",delete:"DELETE",cancel:"CANCEL",validate:"VALIDATE",reject:"REJECT",publish:"PUBLISH",approve:"APPROVE",export:"EXPORT",analyze:"ANALYZE",bulk_delete:"BULK DEL",assign:"ASSIGN",view_agreement:"AGREEMENT"})[s]||s.toUpperCase();return e.jsxs(U,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{href:route("admin.users.index",{tab:"roles"}),className:"p-2 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 text-gray-400 hover:text-indigo-600 transition-colors shadow-sm",children:e.jsx(J,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-gray-900 dark:text-white uppercase tracking-tight",children:g?"Konfigurasi Hak Akses":"Tambah Role Baru"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest mt-1",children:g?`Mengatur Izin Untuk Role: ${c.name}`:"Mendefinisikan Peran Baru Dalam Sistem"})]})]}),children:[e.jsx($,{title:g?"Atur Hak Akses":"Tambah Role"}),e.jsx("div",{className:"py-12 bg-gray-50 dark:bg-gray-950 min-h-[calc(100vh-64px)]",children:e.jsx("div",{className:"max-w-6xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("form",{onSubmit:I,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] p-8 shadow-xl border border-white dark:border-gray-800 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(f,{className:"w-32 h-32"})}),e.jsxs("div",{className:"max-w-xl",children:[e.jsx(V,{htmlFor:"name",className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 mb-3 ml-1",children:"Nama Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{id:"name",type:"text",value:t.name,className:"w-full bg-gray-50 dark:bg-gray-950 border-transparent focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 rounded-2xl pl-6 pr-6 py-4 text-sm font-bold text-gray-900 dark:text-white transition-all",onChange:s=>d("name",s.target.value.toLowerCase().replace(/\s+/g,"_")),placeholder:"Contoh: manager_klinik, asisten_admin",required:!0,disabled:c.name==="super_admin"}),c.name==="super_admin"&&e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 px-3 py-1 bg-rose-50 text-rose-600 rounded-lg text-[9px] font-black uppercase tracking-widest border border-rose-100",children:[e.jsx(f,{className:"w-3 h-3"}),"System Role"]})]}),e.jsx(H,{message:E.name,className:"mt-2 ml-1"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4 px-2",children:[e.jsx("div",{className:"w-1.5 h-6 bg-indigo-600 rounded-full"}),e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white uppercase tracking-tight",children:"Daftar Izin Akses"})]}),Object.entries(A).map(([s,r])=>{const a=Object.values(r).flat().map(i=>i.name).every(i=>t.permissions.includes(i));return e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-[2.5rem] shadow-xl border border-white dark:border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-5 bg-gray-50/50 dark:bg-gray-800/30 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2.5 rounded-2xl bg-white dark:bg-gray-900 shadow-sm text-indigo-600 dark:text-indigo-400 border border-gray-100 dark:border-gray-800",children:R(s)}),e.jsx("span",{className:"text-sm font-black uppercase tracking-[0.1em] text-gray-900 dark:text-white",children:s})]}),e.jsx("button",{type:"button",onClick:()=>P(r),className:`text-[10px] font-black uppercase tracking-widest px-5 py-2 rounded-xl transition-all border ${a?"bg-rose-50 border-rose-100 text-rose-600":"bg-indigo-50 border-indigo-100 text-indigo-600 hover:bg-indigo-600 hover:text-white hover:border-indigo-600"}`,children:a?"Lepas Semua Kategori":"Pilih Semua Kategori"})]}),e.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-800/50",children:Object.entries(r).map(([i,m])=>{const p=m.map(n=>n.name).every(n=>t.permissions.includes(n)),u=["view","create","edit","delete"],T=m.filter(n=>u.includes(n.action)),B=m.filter(n=>!u.includes(n.action));return e.jsx("div",{className:"p-8 hover:bg-gray-50/30 dark:hover:bg-gray-800/10 transition-colors",children:e.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-start gap-8",children:[e.jsxs("div",{className:"xl:w-1/4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-1.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[12px] font-black tracking-widest text-gray-900 dark:text-white block mb-0.5",children:M(i)}),e.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium leading-relaxed",children:_[i]||"Hak akses untuk mengelola modul ini."})]})]}),e.jsx("button",{type:"button",onClick:()=>L(m),className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 uppercase tracking-tighter transition-colors mt-2 ml-5",children:p?"Hapus Semua Centang":"Pilih Semua (Penuh)"})]}),e.jsx("div",{className:"xl:w-3/4",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 gap-3",children:[u.map(n=>{const l=T.find(K=>K.action===n);return l?e.jsxs("label",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl border transition-all cursor-pointer group ${t.permissions.includes(l.name)?"bg-indigo-600 border-indigo-600 shadow-lg shadow-indigo-600/20":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-800 hover:border-indigo-200 dark:hover:border-indigo-800"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",value:l.name,checked:t.permissions.includes(l.name),onChange:b}),e.jsx("div",{className:`w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all ${t.permissions.includes(l.name)?"bg-white border-white":"border-gray-200 dark:border-gray-700 group-hover:border-indigo-400"}`,children:t.permissions.includes(l.name)&&e.jsx("svg",{className:"w-2.5 h-2.5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest transition-colors ${t.permissions.includes(l.name)?"text-white":"text-gray-500 dark:text-gray-400"}`,children:k(n)})]},l.id):e.jsx("div",{className:"hidden sm:block"},n)}),B.map(n=>e.jsxs("label",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl border transition-all cursor-pointer group ${t.permissions.includes(n.name)?"bg-emerald-600 border-emerald-600 shadow-lg shadow-emerald-600/20":"bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-800 hover:border-emerald-200 dark:hover:border-emerald-800"}`,children:[e.jsx("input",{type:"checkbox",className:"hidden",value:n.name,checked:t.permissions.includes(n.name),onChange:b}),e.jsx("div",{className:`w-4 h-4 rounded-md border-2 flex items-center justify-center transition-all ${t.permissions.includes(n.name)?"bg-white border-white":"border-gray-200 dark:border-gray-700 group-hover:border-emerald-400"}`,children:t.permissions.includes(n.name)&&e.jsx("svg",{className:"w-2.5 h-2.5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest transition-colors ${t.permissions.includes(n.name)?"text-white":"text-emerald-500/80 dark:text-emerald-400/80"}`,children:k(n.action)})]},n.id))]})})]})},i)})})]},s)})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-900 p-8 rounded-[2.5rem] shadow-2xl border border-white dark:border-gray-800 sticky bottom-8 transition-all duration-500 backdrop-blur-md bg-white/90 dark:bg-gray-900/90",children:[e.jsx(y,{href:route("admin.users.index",{tab:"roles"}),className:"text-[10px] font-black uppercase tracking-[0.2em] text-gray-400 hover:text-rose-500 transition-colors px-6",children:"Batal & Kembali"}),e.jsxs("button",{type:"submit",disabled:C,className:"flex items-center gap-4 px-10 py-5 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-[0.3em] hover:bg-indigo-700 hover:-translate-y-1 transition-all shadow-xl shadow-indigo-600/30 active:scale-95 disabled:opacity-50",children:[e.jsx(F,{className:"w-5 h-5"}),g?"Simpan Perubahan":"Buat Role Baru"]})]})]})})})]})}export{be as default};
